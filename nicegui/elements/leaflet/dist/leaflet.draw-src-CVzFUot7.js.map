{"version":3,"file":"leaflet.draw-src-CVzFUot7.js","sources":["../node_modules/leaflet-draw/dist/leaflet.draw-src.js"],"sourcesContent":["/*\n Leaflet.draw 1.0.4, a plugin that adds drawing and editing tools to Leaflet powered maps.\n (c) 2012-2017, Jacob Toye, Jon West, Smartrak, Leaflet\n\n https://github.com/Leaflet/Leaflet.draw\n http://leafletjs.com\n */\n(function (window, document, undefined) {/**\n * Leaflet.draw assumes that you have already included the Leaflet library.\n */\nL.drawVersion = \"1.0.4\";\n/**\n * @class L.Draw\n * @aka Draw\n *\n *\n * To add the draw toolbar set the option drawControl: true in the map options.\n *\n * @example\n * ```js\n *      var map = L.map('map', {drawControl: true}).setView([51.505, -0.09], 13);\n *\n *      L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\n *          attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n *      }).addTo(map);\n * ```\n *\n * ### Adding the edit toolbar\n * To use the edit toolbar you must initialise the Leaflet.draw control and manually add it to the map.\n *\n * ```js\n *      var map = L.map('map').setView([51.505, -0.09], 13);\n *\n *      L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {\n *          attribution: '&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\n *      }).addTo(map);\n *\n *      // FeatureGroup is to store editable layers\n *      var drawnItems = new L.FeatureGroup();\n *      map.addLayer(drawnItems);\n *\n *      var drawControl = new L.Control.Draw({\n *          edit: {\n *              featureGroup: drawnItems\n *          }\n *      });\n *      map.addControl(drawControl);\n * ```\n *\n * The key here is the featureGroup option. This tells the plugin which FeatureGroup contains the layers that\n * should be editable. The featureGroup can contain 0 or more features with geometry types Point, LineString, and Polygon.\n * Leaflet.draw does not work with multigeometry features such as MultiPoint, MultiLineString, MultiPolygon,\n * or GeometryCollection. If you need to add multigeometry features to the draw plugin, convert them to a\n * FeatureCollection of non-multigeometries (Points, LineStrings, or Polygons).\n */\nL.Draw = {};\n\n/**\n * @class L.drawLocal\n * @aka L.drawLocal\n *\n * The core toolbar class of the API â€” it is used to create the toolbar ui\n *\n * @example\n * ```js\n *      var modifiedDraw = L.drawLocal.extend({\n *          draw: {\n *              toolbar: {\n *                  buttons: {\n *                      polygon: 'Draw an awesome polygon'\n *                  }\n *              }\n *          }\n *      });\n * ```\n *\n * The default state for the control is the draw toolbar just below the zoom control.\n *  This will allow map users to draw vectors and markers.\n *  **Please note the edit toolbar is not enabled by default.**\n */\nL.drawLocal = {\n\t// format: {\n\t// \tnumeric: {\n\t// \t\tdelimiters: {\n\t// \t\t\tthousands: ',',\n\t// \t\t\tdecimal: '.'\n\t// \t\t}\n\t// \t}\n\t// },\n\tdraw: {\n\t\ttoolbar: {\n\t\t\t// #TODO: this should be reorganized where actions are nested in actions\n\t\t\t// ex: actions.undo  or actions.cancel\n\t\t\tactions: {\n\t\t\t\ttitle: 'Cancel drawing',\n\t\t\t\ttext: 'Cancel'\n\t\t\t},\n\t\t\tfinish: {\n\t\t\t\ttitle: 'Finish drawing',\n\t\t\t\ttext: 'Finish'\n\t\t\t},\n\t\t\tundo: {\n\t\t\t\ttitle: 'Delete last point drawn',\n\t\t\t\ttext: 'Delete last point'\n\t\t\t},\n\t\t\tbuttons: {\n\t\t\t\tpolyline: 'Draw a polyline',\n\t\t\t\tpolygon: 'Draw a polygon',\n\t\t\t\trectangle: 'Draw a rectangle',\n\t\t\t\tcircle: 'Draw a circle',\n\t\t\t\tmarker: 'Draw a marker',\n\t\t\t\tcirclemarker: 'Draw a circlemarker'\n\t\t\t}\n\t\t},\n\t\thandlers: {\n\t\t\tcircle: {\n\t\t\t\ttooltip: {\n\t\t\t\t\tstart: 'Click and drag to draw circle.'\n\t\t\t\t},\n\t\t\t\tradius: 'Radius'\n\t\t\t},\n\t\t\tcirclemarker: {\n\t\t\t\ttooltip: {\n\t\t\t\t\tstart: 'Click map to place circle marker.'\n\t\t\t\t}\n\t\t\t},\n\t\t\tmarker: {\n\t\t\t\ttooltip: {\n\t\t\t\t\tstart: 'Click map to place marker.'\n\t\t\t\t}\n\t\t\t},\n\t\t\tpolygon: {\n\t\t\t\ttooltip: {\n\t\t\t\t\tstart: 'Click to start drawing shape.',\n\t\t\t\t\tcont: 'Click to continue drawing shape.',\n\t\t\t\t\tend: 'Click first point to close this shape.'\n\t\t\t\t}\n\t\t\t},\n\t\t\tpolyline: {\n\t\t\t\terror: '<strong>Error:</strong> shape edges cannot cross!',\n\t\t\t\ttooltip: {\n\t\t\t\t\tstart: 'Click to start drawing line.',\n\t\t\t\t\tcont: 'Click to continue drawing line.',\n\t\t\t\t\tend: 'Click last point to finish line.'\n\t\t\t\t}\n\t\t\t},\n\t\t\trectangle: {\n\t\t\t\ttooltip: {\n\t\t\t\t\tstart: 'Click and drag to draw rectangle.'\n\t\t\t\t}\n\t\t\t},\n\t\t\tsimpleshape: {\n\t\t\t\ttooltip: {\n\t\t\t\t\tend: 'Release mouse to finish drawing.'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\tedit: {\n\t\ttoolbar: {\n\t\t\tactions: {\n\t\t\t\tsave: {\n\t\t\t\t\ttitle: 'Save changes',\n\t\t\t\t\ttext: 'Save'\n\t\t\t\t},\n\t\t\t\tcancel: {\n\t\t\t\t\ttitle: 'Cancel editing, discards all changes',\n\t\t\t\t\ttext: 'Cancel'\n\t\t\t\t},\n\t\t\t\tclearAll: {\n\t\t\t\t\ttitle: 'Clear all layers',\n\t\t\t\t\ttext: 'Clear All'\n\t\t\t\t}\n\t\t\t},\n\t\t\tbuttons: {\n\t\t\t\tedit: 'Edit layers',\n\t\t\t\teditDisabled: 'No layers to edit',\n\t\t\t\tremove: 'Delete layers',\n\t\t\t\tremoveDisabled: 'No layers to delete'\n\t\t\t}\n\t\t},\n\t\thandlers: {\n\t\t\tedit: {\n\t\t\t\ttooltip: {\n\t\t\t\t\ttext: 'Drag handles or markers to edit features.',\n\t\t\t\t\tsubtext: 'Click cancel to undo changes.'\n\t\t\t\t}\n\t\t\t},\n\t\t\tremove: {\n\t\t\t\ttooltip: {\n\t\t\t\t\ttext: 'Click on a feature to remove.'\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\n\n\n/**\n * ### Events\n * Once you have successfully added the Leaflet.draw plugin to your map you will want to respond to the different\n * actions users can initiate. The following events will be triggered on the map:\n *\n * @class L.Draw.Event\n * @aka Draw.Event\n *\n * Use `L.Draw.Event.EVENTNAME` constants to ensure events are correct.\n *\n * @example\n * ```js\n * map.on(L.Draw.Event.CREATED; function (e) {\n *    var type = e.layerType,\n *        layer = e.layer;\n *\n *    if (type === 'marker') {\n *        // Do marker specific actions\n *    }\n *\n *    // Do whatever else you need to. (save to db; add to map etc)\n *    map.addLayer(layer);\n *});\n * ```\n */\nL.Draw.Event = {};\n/**\n * @event draw:created: PolyLine; Polygon; Rectangle; Circle; Marker | String\n *\n * Layer that was just created.\n * The type of layer this is. One of: `polyline`; `polygon`; `rectangle`; `circle`; `marker`\n * Triggered when a new vector or marker has been created.\n *\n */\nL.Draw.Event.CREATED = 'draw:created';\n\n/**\n * @event draw:edited: LayerGroup\n *\n * List of all layers just edited on the map.\n *\n *\n * Triggered when layers in the FeatureGroup; initialised with the plugin; have been edited and saved.\n *\n * @example\n * ```js\n *      map.on('draw:edited', function (e) {\n     *          var layers = e.layers;\n     *          layers.eachLayer(function (layer) {\n     *              //do whatever you want; most likely save back to db\n     *          });\n     *      });\n * ```\n */\nL.Draw.Event.EDITED = 'draw:edited';\n\n/**\n * @event draw:deleted: LayerGroup\n *\n * List of all layers just removed from the map.\n *\n * Triggered when layers have been removed (and saved) from the FeatureGroup.\n */\nL.Draw.Event.DELETED = 'draw:deleted';\n\n/**\n * @event draw:drawstart: String\n *\n * The type of layer this is. One of:`polyline`; `polygon`; `rectangle`; `circle`; `marker`\n *\n * Triggered when the user has chosen to draw a particular vector or marker.\n */\nL.Draw.Event.DRAWSTART = 'draw:drawstart';\n\n/**\n * @event draw:drawstop: String\n *\n * The type of layer this is. One of: `polyline`; `polygon`; `rectangle`; `circle`; `marker`\n *\n * Triggered when the user has finished a particular vector or marker.\n */\n\nL.Draw.Event.DRAWSTOP = 'draw:drawstop';\n\n/**\n * @event draw:drawvertex: LayerGroup\n *\n * List of all layers just being added from the map.\n *\n * Triggered when a vertex is created on a polyline or polygon.\n */\nL.Draw.Event.DRAWVERTEX = 'draw:drawvertex';\n\n/**\n * @event draw:editstart: String\n *\n * The type of edit this is. One of: `edit`\n *\n * Triggered when the user starts edit mode by clicking the edit tool button.\n */\n\nL.Draw.Event.EDITSTART = 'draw:editstart';\n\n/**\n * @event draw:editmove: ILayer\n *\n *  Layer that was just moved.\n *\n * Triggered as the user moves a rectangle; circle or marker.\n */\nL.Draw.Event.EDITMOVE = 'draw:editmove';\n\n/**\n * @event draw:editresize: ILayer\n *\n * Layer that was just moved.\n *\n * Triggered as the user resizes a rectangle or circle.\n */\nL.Draw.Event.EDITRESIZE = 'draw:editresize';\n\n/**\n * @event draw:editvertex: LayerGroup\n *\n * List of all layers just being edited from the map.\n *\n * Triggered when a vertex is edited on a polyline or polygon.\n */\nL.Draw.Event.EDITVERTEX = 'draw:editvertex';\n\n/**\n * @event draw:editstop: String\n *\n * The type of edit this is. One of: `edit`\n *\n * Triggered when the user has finshed editing (edit mode) and saves edits.\n */\nL.Draw.Event.EDITSTOP = 'draw:editstop';\n\n/**\n * @event draw:deletestart: String\n *\n * The type of edit this is. One of: `remove`\n *\n * Triggered when the user starts remove mode by clicking the remove tool button.\n */\nL.Draw.Event.DELETESTART = 'draw:deletestart';\n\n/**\n * @event draw:deletestop: String\n *\n * The type of edit this is. One of: `remove`\n *\n * Triggered when the user has finished removing shapes (remove mode) and saves.\n */\nL.Draw.Event.DELETESTOP = 'draw:deletestop';\n\n/**\n * @event draw:toolbaropened: String\n *\n * Triggered when a toolbar is opened.\n */\nL.Draw.Event.TOOLBAROPENED = 'draw:toolbaropened';\n\n/**\n * @event draw:toolbarclosed: String\n *\n * Triggered when a toolbar is closed.\n */\nL.Draw.Event.TOOLBARCLOSED = 'draw:toolbarclosed';\n\n/**\n * @event draw:markercontext: String\n *\n * Triggered when a marker is right clicked.\n */\nL.Draw.Event.MARKERCONTEXT = 'draw:markercontext';\n\n\nL.Draw = L.Draw || {};\n\n/**\n * @class L.Draw.Feature\n * @aka Draw.Feature\n */\nL.Draw.Feature = L.Handler.extend({\n\n\t// @method initialize(): void\n\tinitialize: function (map, options) {\n\t\tthis._map = map;\n\t\tthis._container = map._container;\n\t\tthis._overlayPane = map._panes.overlayPane;\n\t\tthis._popupPane = map._panes.popupPane;\n\n\t\t// Merge default shapeOptions options with custom shapeOptions\n\t\tif (options && options.shapeOptions) {\n\t\t\toptions.shapeOptions = L.Util.extend({}, this.options.shapeOptions, options.shapeOptions);\n\t\t}\n\t\tL.setOptions(this, options);\n\n\t\tvar version = L.version.split('.');\n\t\t//If Version is >= 1.2.0\n\t\tif (parseInt(version[0], 10) === 1 && parseInt(version[1], 10) >= 2) {\n\t\t\tL.Draw.Feature.include(L.Evented.prototype);\n\t\t} else {\n\t\t\tL.Draw.Feature.include(L.Mixin.Events);\n\t\t}\n\t},\n\n\t// @method enable(): void\n\t// Enables this handler\n\tenable: function () {\n\t\tif (this._enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tL.Handler.prototype.enable.call(this);\n\n\t\tthis.fire('enabled', {handler: this.type});\n\n\t\tthis._map.fire(L.Draw.Event.DRAWSTART, {layerType: this.type});\n\t},\n\n\t// @method disable(): void\n\tdisable: function () {\n\t\tif (!this._enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tL.Handler.prototype.disable.call(this);\n\n\t\tthis._map.fire(L.Draw.Event.DRAWSTOP, {layerType: this.type});\n\n\t\tthis.fire('disabled', {handler: this.type});\n\t},\n\n\t// @method addHooks(): void\n\t// Add's event listeners to this handler\n\taddHooks: function () {\n\t\tvar map = this._map;\n\n\t\tif (map) {\n\t\t\tL.DomUtil.disableTextSelection();\n\n\t\t\tmap.getContainer().focus();\n\n\t\t\tthis._tooltip = new L.Draw.Tooltip(this._map);\n\n\t\t\tL.DomEvent.on(this._container, 'keyup', this._cancelDrawing, this);\n\t\t}\n\t},\n\n\t// @method removeHooks(): void\n\t// Removes event listeners from this handler\n\tremoveHooks: function () {\n\t\tif (this._map) {\n\t\t\tL.DomUtil.enableTextSelection();\n\n\t\t\tthis._tooltip.dispose();\n\t\t\tthis._tooltip = null;\n\n\t\t\tL.DomEvent.off(this._container, 'keyup', this._cancelDrawing, this);\n\t\t}\n\t},\n\n\t// @method setOptions(object): void\n\t// Sets new options to this handler\n\tsetOptions: function (options) {\n\t\tL.setOptions(this, options);\n\t},\n\n\t_fireCreatedEvent: function (layer) {\n\t\tthis._map.fire(L.Draw.Event.CREATED, {layer: layer, layerType: this.type});\n\t},\n\n\t// Cancel drawing when the escape key is pressed\n\t_cancelDrawing: function (e) {\n\t\tif (e.keyCode === 27) {\n\t\t\tthis._map.fire('draw:canceled', {layerType: this.type});\n\t\t\tthis.disable();\n\t\t}\n\t}\n});\n\n\n\n/**\n * @class L.Draw.Polyline\n * @aka Draw.Polyline\n * @inherits L.Draw.Feature\n */\nL.Draw.Polyline = L.Draw.Feature.extend({\n\tstatics: {\n\t\tTYPE: 'polyline'\n\t},\n\n\tPoly: L.Polyline,\n\n\toptions: {\n\t\tallowIntersection: true,\n\t\trepeatMode: false,\n\t\tdrawError: {\n\t\t\tcolor: '#b00b00',\n\t\t\ttimeout: 2500\n\t\t},\n\t\ticon: new L.DivIcon({\n\t\t\ticonSize: new L.Point(8, 8),\n\t\t\tclassName: 'leaflet-div-icon leaflet-editing-icon'\n\t\t}),\n\t\ttouchIcon: new L.DivIcon({\n\t\t\ticonSize: new L.Point(20, 20),\n\t\t\tclassName: 'leaflet-div-icon leaflet-editing-icon leaflet-touch-icon'\n\t\t}),\n\t\tguidelineDistance: 20,\n\t\tmaxGuideLineLength: 4000,\n\t\tshapeOptions: {\n\t\t\tstroke: true,\n\t\t\tcolor: '#3388ff',\n\t\t\tweight: 4,\n\t\t\topacity: 0.5,\n\t\t\tfill: false,\n\t\t\tclickable: true\n\t\t},\n\t\tmetric: true, // Whether to use the metric measurement system or imperial\n\t\tfeet: true, // When not metric, to use feet instead of yards for display.\n\t\tnautic: false, // When not metric, not feet use nautic mile for display\n\t\tshowLength: true, // Whether to display distance in the tooltip\n\t\tzIndexOffset: 2000, // This should be > than the highest z-index any map layers\n\t\tfactor: 1, // To change distance calculation\n\t\tmaxPoints: 0 // Once this number of points are placed, finish shape\n\t},\n\n\t// @method initialize(): void\n\tinitialize: function (map, options) {\n\t\t// if touch, switch to touch icon\n\t\tif (L.Browser.touch) {\n\t\t\tthis.options.icon = this.options.touchIcon;\n\t\t}\n\n\t\t// Need to set this here to ensure the correct message is used.\n\t\tthis.options.drawError.message = L.drawLocal.draw.handlers.polyline.error;\n\n\t\t// Merge default drawError options with custom options\n\t\tif (options && options.drawError) {\n\t\t\toptions.drawError = L.Util.extend({}, this.options.drawError, options.drawError);\n\t\t}\n\n\t\t// Save the type so super can fire, need to do this as cannot do this.TYPE :(\n\t\tthis.type = L.Draw.Polyline.TYPE;\n\n\t\tL.Draw.Feature.prototype.initialize.call(this, map, options);\n\t},\n\n\t// @method addHooks(): void\n\t// Add listener hooks to this handler\n\taddHooks: function () {\n\t\tL.Draw.Feature.prototype.addHooks.call(this);\n\t\tif (this._map) {\n\t\t\tthis._markers = [];\n\n\t\t\tthis._markerGroup = new L.LayerGroup();\n\t\t\tthis._map.addLayer(this._markerGroup);\n\n\t\t\tthis._poly = new L.Polyline([], this.options.shapeOptions);\n\n\t\t\tthis._tooltip.updateContent(this._getTooltipText());\n\n\t\t\t// Make a transparent marker that will used to catch click events. These click\n\t\t\t// events will create the vertices. We need to do this so we can ensure that\n\t\t\t// we can create vertices over other map layers (markers, vector layers). We\n\t\t\t// also do not want to trigger any click handlers of objects we are clicking on\n\t\t\t// while drawing.\n\t\t\tif (!this._mouseMarker) {\n\t\t\t\tthis._mouseMarker = L.marker(this._map.getCenter(), {\n\t\t\t\t\ticon: L.divIcon({\n\t\t\t\t\t\tclassName: 'leaflet-mouse-marker',\n\t\t\t\t\t\ticonAnchor: [20, 20],\n\t\t\t\t\t\ticonSize: [40, 40]\n\t\t\t\t\t}),\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tzIndexOffset: this.options.zIndexOffset\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._mouseMarker\n\t\t\t\t.on('mouseout', this._onMouseOut, this)\n\t\t\t\t.on('mousemove', this._onMouseMove, this) // Necessary to prevent 0.8 stutter\n\t\t\t\t.on('mousedown', this._onMouseDown, this)\n\t\t\t\t.on('mouseup', this._onMouseUp, this) // Necessary for 0.8 compatibility\n\t\t\t\t.addTo(this._map);\n\n\t\t\tthis._map\n\t\t\t\t.on('mouseup', this._onMouseUp, this) // Necessary for 0.7 compatibility\n\t\t\t\t.on('mousemove', this._onMouseMove, this)\n\t\t\t\t.on('zoomlevelschange', this._onZoomEnd, this)\n\t\t\t\t.on('touchstart', this._onTouch, this)\n\t\t\t\t.on('zoomend', this._onZoomEnd, this);\n\n\t\t}\n\t},\n\n\t// @method removeHooks(): void\n\t// Remove listener hooks from this handler.\n\tremoveHooks: function () {\n\t\tL.Draw.Feature.prototype.removeHooks.call(this);\n\n\t\tthis._clearHideErrorTimeout();\n\n\t\tthis._cleanUpShape();\n\n\t\t// remove markers from map\n\t\tthis._map.removeLayer(this._markerGroup);\n\t\tdelete this._markerGroup;\n\t\tdelete this._markers;\n\n\t\tthis._map.removeLayer(this._poly);\n\t\tdelete this._poly;\n\n\t\tthis._mouseMarker\n\t\t\t.off('mousedown', this._onMouseDown, this)\n\t\t\t.off('mouseout', this._onMouseOut, this)\n\t\t\t.off('mouseup', this._onMouseUp, this)\n\t\t\t.off('mousemove', this._onMouseMove, this);\n\t\tthis._map.removeLayer(this._mouseMarker);\n\t\tdelete this._mouseMarker;\n\n\t\t// clean up DOM\n\t\tthis._clearGuides();\n\n\t\tthis._map\n\t\t\t.off('mouseup', this._onMouseUp, this)\n\t\t\t.off('mousemove', this._onMouseMove, this)\n\t\t\t.off('zoomlevelschange', this._onZoomEnd, this)\n\t\t\t.off('zoomend', this._onZoomEnd, this)\n\t\t\t.off('touchstart', this._onTouch, this)\n\t\t\t.off('click', this._onTouch, this);\n\t},\n\n\t// @method deleteLastVertex(): void\n\t// Remove the last vertex from the polyline, removes polyline from map if only one point exists.\n\tdeleteLastVertex: function () {\n\t\tif (this._markers.length <= 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar lastMarker = this._markers.pop(),\n\t\t\tpoly = this._poly,\n\t\t\t// Replaces .spliceLatLngs()\n\t\t\tlatlngs = poly.getLatLngs(),\n\t\t\tlatlng = latlngs.splice(-1, 1)[0];\n\t\tthis._poly.setLatLngs(latlngs);\n\n\t\tthis._markerGroup.removeLayer(lastMarker);\n\n\t\tif (poly.getLatLngs().length < 2) {\n\t\t\tthis._map.removeLayer(poly);\n\t\t}\n\n\t\tthis._vertexChanged(latlng, false);\n\t},\n\n\t// @method addVertex(): void\n\t// Add a vertex to the end of the polyline\n\taddVertex: function (latlng) {\n\t\tvar markersLength = this._markers.length;\n\t\t// markersLength must be greater than or equal to 2 before intersections can occur\n\t\tif (markersLength >= 2 && !this.options.allowIntersection && this._poly.newLatLngIntersects(latlng)) {\n\t\t\tthis._showErrorTooltip();\n\t\t\treturn;\n\t\t}\n\t\telse if (this._errorShown) {\n\t\t\tthis._hideErrorTooltip();\n\t\t}\n\n\t\tthis._markers.push(this._createMarker(latlng));\n\n\t\tthis._poly.addLatLng(latlng);\n\n\t\tif (this._poly.getLatLngs().length === 2) {\n\t\t\tthis._map.addLayer(this._poly);\n\t\t}\n\n\t\tthis._vertexChanged(latlng, true);\n\t},\n\n\t// @method completeShape(): void\n\t// Closes the polyline between the first and last points\n\tcompleteShape: function () {\n\t\tif (this._markers.length <= 1 || !this._shapeIsValid()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._fireCreatedEvent();\n\t\tthis.disable();\n\n\t\tif (this.options.repeatMode) {\n\t\t\tthis.enable();\n\t\t}\n\t},\n\n\t_finishShape: function () {\n\t\tvar latlngs = this._poly._defaultShape ? this._poly._defaultShape() : this._poly.getLatLngs();\n\t\tvar intersects = this._poly.newLatLngIntersects(latlngs[latlngs.length - 1]);\n\n\t\tif ((!this.options.allowIntersection && intersects) || !this._shapeIsValid()) {\n\t\t\tthis._showErrorTooltip();\n\t\t\treturn;\n\t\t}\n\n\t\tthis._fireCreatedEvent();\n\t\tthis.disable();\n\t\tif (this.options.repeatMode) {\n\t\t\tthis.enable();\n\t\t}\n\t},\n\n\t// Called to verify the shape is valid when the user tries to finish it\n\t// Return false if the shape is not valid\n\t_shapeIsValid: function () {\n\t\treturn true;\n\t},\n\n\t_onZoomEnd: function () {\n\t\tif (this._markers !== null) {\n\t\t\tthis._updateGuide();\n\t\t}\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tvar newPos = this._map.mouseEventToLayerPoint(e.originalEvent);\n\t\tvar latlng = this._map.layerPointToLatLng(newPos);\n\n\t\t// Save latlng\n\t\t// should this be moved to _updateGuide() ?\n\t\tthis._currentLatLng = latlng;\n\n\t\tthis._updateTooltip(latlng);\n\n\t\t// Update the guide line\n\t\tthis._updateGuide(newPos);\n\n\t\t// Update the mouse marker position\n\t\tthis._mouseMarker.setLatLng(latlng);\n\n\t\tL.DomEvent.preventDefault(e.originalEvent);\n\t},\n\n\t_vertexChanged: function (latlng, added) {\n\t\tthis._map.fire(L.Draw.Event.DRAWVERTEX, {layers: this._markerGroup});\n\t\tthis._updateFinishHandler();\n\n\t\tthis._updateRunningMeasure(latlng, added);\n\n\t\tthis._clearGuides();\n\n\t\tthis._updateTooltip();\n\t},\n\n\t_onMouseDown: function (e) {\n\t\tif (!this._clickHandled && !this._touchHandled && !this._disableMarkers) {\n\t\t\tthis._onMouseMove(e);\n\t\t\tthis._clickHandled = true;\n\t\t\tthis._disableNewMarkers();\n\t\t\tvar originalEvent = e.originalEvent;\n\t\t\tvar clientX = originalEvent.clientX;\n\t\t\tvar clientY = originalEvent.clientY;\n\t\t\tthis._startPoint.call(this, clientX, clientY);\n\t\t}\n\t},\n\n\t_startPoint: function (clientX, clientY) {\n\t\tthis._mouseDownOrigin = L.point(clientX, clientY);\n\t},\n\n\t_onMouseUp: function (e) {\n\t\tvar originalEvent = e.originalEvent;\n\t\tvar clientX = originalEvent.clientX;\n\t\tvar clientY = originalEvent.clientY;\n\t\tthis._endPoint.call(this, clientX, clientY, e);\n\t\tthis._clickHandled = null;\n\t},\n\n\t_endPoint: function (clientX, clientY, e) {\n\t\tif (this._mouseDownOrigin) {\n\t\t\tvar dragCheckDistance = L.point(clientX, clientY)\n\t\t\t\t.distanceTo(this._mouseDownOrigin);\n\t\t\tvar lastPtDistance = this._calculateFinishDistance(e.latlng);\n\t\t\tif (this.options.maxPoints > 1 && this.options.maxPoints == this._markers.length + 1) {\n\t\t\t\tthis.addVertex(e.latlng);\n\t\t\t\tthis._finishShape();\n\t\t\t} else if (lastPtDistance < 10 && L.Browser.touch) {\n\t\t\t\tthis._finishShape();\n\t\t\t} else if (Math.abs(dragCheckDistance) < 9 * (window.devicePixelRatio || 1)) {\n\t\t\t\tthis.addVertex(e.latlng);\n\t\t\t}\n\t\t\tthis._enableNewMarkers(); // after a short pause, enable new markers\n\t\t}\n\t\tthis._mouseDownOrigin = null;\n\t},\n\n\t// ontouch prevented by clickHandled flag because some browsers fire both click/touch events,\n\t// causing unwanted behavior\n\t_onTouch: function (e) {\n\t\tvar originalEvent = e.originalEvent;\n\t\tvar clientX;\n\t\tvar clientY;\n\t\tif (originalEvent.touches && originalEvent.touches[0] && !this._clickHandled && !this._touchHandled && !this._disableMarkers) {\n\t\t\tclientX = originalEvent.touches[0].clientX;\n\t\t\tclientY = originalEvent.touches[0].clientY;\n\t\t\tthis._disableNewMarkers();\n\t\t\tthis._touchHandled = true;\n\t\t\tthis._startPoint.call(this, clientX, clientY);\n\t\t\tthis._endPoint.call(this, clientX, clientY, e);\n\t\t\tthis._touchHandled = null;\n\t\t}\n\t\tthis._clickHandled = null;\n\t},\n\n\t_onMouseOut: function () {\n\t\tif (this._tooltip) {\n\t\t\tthis._tooltip._onMouseOut.call(this._tooltip);\n\t\t}\n\t},\n\n\t// calculate if we are currently within close enough distance\n\t// of the closing point (first point for shapes, last point for lines)\n\t// this is semi-ugly code but the only reliable way i found to get the job done\n\t// note: calculating point.distanceTo between mouseDownOrigin and last marker did NOT work\n\t_calculateFinishDistance: function (potentialLatLng) {\n\t\tvar lastPtDistance;\n\t\tif (this._markers.length > 0) {\n\t\t\tvar finishMarker;\n\t\t\tif (this.type === L.Draw.Polyline.TYPE) {\n\t\t\t\tfinishMarker = this._markers[this._markers.length - 1];\n\t\t\t} else if (this.type === L.Draw.Polygon.TYPE) {\n\t\t\t\tfinishMarker = this._markers[0];\n\t\t\t} else {\n\t\t\t\treturn Infinity;\n\t\t\t}\n\t\t\tvar lastMarkerPoint = this._map.latLngToContainerPoint(finishMarker.getLatLng()),\n\t\t\t\tpotentialMarker = new L.Marker(potentialLatLng, {\n\t\t\t\t\ticon: this.options.icon,\n\t\t\t\t\tzIndexOffset: this.options.zIndexOffset * 2\n\t\t\t\t});\n\t\t\tvar potentialMarkerPint = this._map.latLngToContainerPoint(potentialMarker.getLatLng());\n\t\t\tlastPtDistance = lastMarkerPoint.distanceTo(potentialMarkerPint);\n\t\t} else {\n\t\t\tlastPtDistance = Infinity;\n\t\t}\n\t\treturn lastPtDistance;\n\t},\n\n\t_updateFinishHandler: function () {\n\t\tvar markerCount = this._markers.length;\n\t\t// The last marker should have a click handler to close the polyline\n\t\tif (markerCount > 1) {\n\t\t\tthis._markers[markerCount - 1].on('click', this._finishShape, this);\n\t\t}\n\n\t\t// Remove the old marker click handler (as only the last point should close the polyline)\n\t\tif (markerCount > 2) {\n\t\t\tthis._markers[markerCount - 2].off('click', this._finishShape, this);\n\t\t}\n\t},\n\n\t_createMarker: function (latlng) {\n\t\tvar marker = new L.Marker(latlng, {\n\t\t\ticon: this.options.icon,\n\t\t\tzIndexOffset: this.options.zIndexOffset * 2\n\t\t});\n\n\t\tthis._markerGroup.addLayer(marker);\n\n\t\treturn marker;\n\t},\n\n\t_updateGuide: function (newPos) {\n\t\tvar markerCount = this._markers ? this._markers.length : 0;\n\n\t\tif (markerCount > 0) {\n\t\t\tnewPos = newPos || this._map.latLngToLayerPoint(this._currentLatLng);\n\n\t\t\t// draw the guide line\n\t\t\tthis._clearGuides();\n\t\t\tthis._drawGuide(\n\t\t\t\tthis._map.latLngToLayerPoint(this._markers[markerCount - 1].getLatLng()),\n\t\t\t\tnewPos\n\t\t\t);\n\t\t}\n\t},\n\n\t_updateTooltip: function (latLng) {\n\t\tvar text = this._getTooltipText();\n\n\t\tif (latLng) {\n\t\t\tthis._tooltip.updatePosition(latLng);\n\t\t}\n\n\t\tif (!this._errorShown) {\n\t\t\tthis._tooltip.updateContent(text);\n\t\t}\n\t},\n\n\t_drawGuide: function (pointA, pointB) {\n\t\tvar length = Math.floor(Math.sqrt(Math.pow((pointB.x - pointA.x), 2) + Math.pow((pointB.y - pointA.y), 2))),\n\t\t\tguidelineDistance = this.options.guidelineDistance,\n\t\t\tmaxGuideLineLength = this.options.maxGuideLineLength,\n\t\t\t// Only draw a guideline with a max length\n\t\t\ti = length > maxGuideLineLength ? length - maxGuideLineLength : guidelineDistance,\n\t\t\tfraction,\n\t\t\tdashPoint,\n\t\t\tdash;\n\n\t\t//create the guides container if we haven't yet\n\t\tif (!this._guidesContainer) {\n\t\t\tthis._guidesContainer = L.DomUtil.create('div', 'leaflet-draw-guides', this._overlayPane);\n\t\t}\n\n\t\t//draw a dash every GuildeLineDistance\n\t\tfor (; i < length; i += this.options.guidelineDistance) {\n\t\t\t//work out fraction along line we are\n\t\t\tfraction = i / length;\n\n\t\t\t//calculate new x,y point\n\t\t\tdashPoint = {\n\t\t\t\tx: Math.floor((pointA.x * (1 - fraction)) + (fraction * pointB.x)),\n\t\t\t\ty: Math.floor((pointA.y * (1 - fraction)) + (fraction * pointB.y))\n\t\t\t};\n\n\t\t\t//add guide dash to guide container\n\t\t\tdash = L.DomUtil.create('div', 'leaflet-draw-guide-dash', this._guidesContainer);\n\t\t\tdash.style.backgroundColor =\n\t\t\t\t!this._errorShown ? this.options.shapeOptions.color : this.options.drawError.color;\n\n\t\t\tL.DomUtil.setPosition(dash, dashPoint);\n\t\t}\n\t},\n\n\t_updateGuideColor: function (color) {\n\t\tif (this._guidesContainer) {\n\t\t\tfor (var i = 0, l = this._guidesContainer.childNodes.length; i < l; i++) {\n\t\t\t\tthis._guidesContainer.childNodes[i].style.backgroundColor = color;\n\t\t\t}\n\t\t}\n\t},\n\n\t// removes all child elements (guide dashes) from the guides container\n\t_clearGuides: function () {\n\t\tif (this._guidesContainer) {\n\t\t\twhile (this._guidesContainer.firstChild) {\n\t\t\t\tthis._guidesContainer.removeChild(this._guidesContainer.firstChild);\n\t\t\t}\n\t\t}\n\t},\n\n\t_getTooltipText: function () {\n\t\tvar showLength = this.options.showLength,\n\t\t\tlabelText, distanceStr;\n\t\tif (this._markers.length === 0) {\n\t\t\tlabelText = {\n\t\t\t\ttext: L.drawLocal.draw.handlers.polyline.tooltip.start\n\t\t\t};\n\t\t} else {\n\t\t\tdistanceStr = showLength ? this._getMeasurementString() : '';\n\n\t\t\tif (this._markers.length === 1) {\n\t\t\t\tlabelText = {\n\t\t\t\t\ttext: L.drawLocal.draw.handlers.polyline.tooltip.cont,\n\t\t\t\t\tsubtext: distanceStr\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tlabelText = {\n\t\t\t\t\ttext: L.drawLocal.draw.handlers.polyline.tooltip.end,\n\t\t\t\t\tsubtext: distanceStr\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn labelText;\n\t},\n\n\t_updateRunningMeasure: function (latlng, added) {\n\t\tvar markersLength = this._markers.length,\n\t\t\tpreviousMarkerIndex, distance;\n\n\t\tif (this._markers.length === 1) {\n\t\t\tthis._measurementRunningTotal = 0;\n\t\t} else {\n\t\t\tpreviousMarkerIndex = markersLength - (added ? 2 : 1);\n\n\t\t\t// Calculate the distance based on the version\n\t\t\tif (L.GeometryUtil.isVersion07x()) {\n\t\t\t\tdistance = latlng.distanceTo(this._markers[previousMarkerIndex].getLatLng()) * (this.options.factor || 1);\n\t\t\t} else {\n\t\t\t\tdistance = this._map.distance(latlng, this._markers[previousMarkerIndex].getLatLng()) * (this.options.factor || 1);\n\t\t\t}\n\n\t\t\tthis._measurementRunningTotal += distance * (added ? 1 : -1);\n\t\t}\n\t},\n\n\t_getMeasurementString: function () {\n\t\tvar currentLatLng = this._currentLatLng,\n\t\t\tpreviousLatLng = this._markers[this._markers.length - 1].getLatLng(),\n\t\t\tdistance;\n\n\t\t// Calculate the distance from the last fixed point to the mouse position based on the version\n\t\tif (L.GeometryUtil.isVersion07x()) {\n\t\t\tdistance = previousLatLng && currentLatLng && currentLatLng.distanceTo ? this._measurementRunningTotal + currentLatLng.distanceTo(previousLatLng) * (this.options.factor || 1) : this._measurementRunningTotal || 0;\n\t\t} else {\n\t\t\tdistance = previousLatLng && currentLatLng ? this._measurementRunningTotal + this._map.distance(currentLatLng, previousLatLng) * (this.options.factor || 1) : this._measurementRunningTotal || 0;\n\t\t}\n\n\t\treturn L.GeometryUtil.readableDistance(distance, this.options.metric, this.options.feet, this.options.nautic, this.options.precision);\n\t},\n\n\t_showErrorTooltip: function () {\n\t\tthis._errorShown = true;\n\n\t\t// Update tooltip\n\t\tthis._tooltip\n\t\t\t.showAsError()\n\t\t\t.updateContent({text: this.options.drawError.message});\n\n\t\t// Update shape\n\t\tthis._updateGuideColor(this.options.drawError.color);\n\t\tthis._poly.setStyle({color: this.options.drawError.color});\n\n\t\t// Hide the error after 2 seconds\n\t\tthis._clearHideErrorTimeout();\n\t\tthis._hideErrorTimeout = setTimeout(L.Util.bind(this._hideErrorTooltip, this), this.options.drawError.timeout);\n\t},\n\n\t_hideErrorTooltip: function () {\n\t\tthis._errorShown = false;\n\n\t\tthis._clearHideErrorTimeout();\n\n\t\t// Revert tooltip\n\t\tthis._tooltip\n\t\t\t.removeError()\n\t\t\t.updateContent(this._getTooltipText());\n\n\t\t// Revert shape\n\t\tthis._updateGuideColor(this.options.shapeOptions.color);\n\t\tthis._poly.setStyle({color: this.options.shapeOptions.color});\n\t},\n\n\t_clearHideErrorTimeout: function () {\n\t\tif (this._hideErrorTimeout) {\n\t\t\tclearTimeout(this._hideErrorTimeout);\n\t\t\tthis._hideErrorTimeout = null;\n\t\t}\n\t},\n\n\t// disable new markers temporarily;\n\t// this is to prevent duplicated touch/click events in some browsers\n\t_disableNewMarkers: function () {\n\t\tthis._disableMarkers = true;\n\t},\n\n\t// see _disableNewMarkers\n\t_enableNewMarkers: function () {\n\t\tsetTimeout(function () {\n\t\t\tthis._disableMarkers = false;\n\t\t}.bind(this), 50);\n\t},\n\n\t_cleanUpShape: function () {\n\t\tif (this._markers.length > 1) {\n\t\t\tthis._markers[this._markers.length - 1].off('click', this._finishShape, this);\n\t\t}\n\t},\n\n\t_fireCreatedEvent: function () {\n\t\tvar poly = new this.Poly(this._poly.getLatLngs(), this.options.shapeOptions);\n\t\tL.Draw.Feature.prototype._fireCreatedEvent.call(this, poly);\n\t}\n});\n\n\n\n/**\n * @class L.Draw.Polygon\n * @aka Draw.Polygon\n * @inherits L.Draw.Polyline\n */\nL.Draw.Polygon = L.Draw.Polyline.extend({\n\tstatics: {\n\t\tTYPE: 'polygon'\n\t},\n\n\tPoly: L.Polygon,\n\n\toptions: {\n\t\tshowArea: false,\n\t\tshowLength: false,\n\t\tshapeOptions: {\n\t\t\tstroke: true,\n\t\t\tcolor: '#3388ff',\n\t\t\tweight: 4,\n\t\t\topacity: 0.5,\n\t\t\tfill: true,\n\t\t\tfillColor: null, //same as color by default\n\t\t\tfillOpacity: 0.2,\n\t\t\tclickable: true\n\t\t},\n\t\t// Whether to use the metric measurement system (truthy) or not (falsy).\n\t\t// Also defines the units to use for the metric system as an array of\n\t\t// strings (e.g. `['ha', 'm']`).\n\t\tmetric: true,\n\t\tfeet: true, // When not metric, to use feet instead of yards for display.\n\t\tnautic: false, // When not metric, not feet use nautic mile for display\n\t\t// Defines the precision for each type of unit (e.g. {km: 2, ft: 0}\n\t\tprecision: {}\n\t},\n\n\t// @method initialize(): void\n\tinitialize: function (map, options) {\n\t\tL.Draw.Polyline.prototype.initialize.call(this, map, options);\n\n\t\t// Save the type so super can fire, need to do this as cannot do this.TYPE :(\n\t\tthis.type = L.Draw.Polygon.TYPE;\n\t},\n\n\t_updateFinishHandler: function () {\n\t\tvar markerCount = this._markers.length;\n\n\t\t// The first marker should have a click handler to close the polygon\n\t\tif (markerCount === 1) {\n\t\t\tthis._markers[0].on('click', this._finishShape, this);\n\t\t}\n\n\t\t// Add and update the double click handler\n\t\tif (markerCount > 2) {\n\t\t\tthis._markers[markerCount - 1].on('dblclick', this._finishShape, this);\n\t\t\t// Only need to remove handler if has been added before\n\t\t\tif (markerCount > 3) {\n\t\t\t\tthis._markers[markerCount - 2].off('dblclick', this._finishShape, this);\n\t\t\t}\n\t\t}\n\t},\n\n\t_getTooltipText: function () {\n\t\tvar text, subtext;\n\n\t\tif (this._markers.length === 0) {\n\t\t\ttext = L.drawLocal.draw.handlers.polygon.tooltip.start;\n\t\t} else if (this._markers.length < 3) {\n\t\t\ttext = L.drawLocal.draw.handlers.polygon.tooltip.cont;\n\t\t\tsubtext = this._getMeasurementString();\n\t\t} else {\n\t\t\ttext = L.drawLocal.draw.handlers.polygon.tooltip.end;\n\t\t\tsubtext = this._getMeasurementString();\n\t\t}\n\n\t\treturn {\n\t\t\ttext: text,\n\t\t\tsubtext: subtext\n\t\t};\n\t},\n\n\t_getMeasurementString: function () {\n\t\tvar area = this._area,\n\t\t\tmeasurementString = '';\n\n\n\t\tif (!area && !this.options.showLength) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (this.options.showLength) {\n\t\t\tmeasurementString = L.Draw.Polyline.prototype._getMeasurementString.call(this);\n\t\t}\n\n\t\tif (area) {\n\t\t\tmeasurementString += '<br>' + L.GeometryUtil.readableArea(area, this.options.metric, this.options.precision);\n\t\t}\n\n\t\treturn measurementString;\n\t},\n\n\t_shapeIsValid: function () {\n\t\treturn this._markers.length >= 3;\n\t},\n\n\t_vertexChanged: function (latlng, added) {\n\t\tvar latLngs;\n\n\t\t// Check to see if we should show the area\n\t\tif (!this.options.allowIntersection && this.options.showArea) {\n\t\t\tlatLngs = this._poly.getLatLngs();\n\n\t\t\tthis._area = L.GeometryUtil.geodesicArea(latLngs);\n\t\t}\n\n\t\tL.Draw.Polyline.prototype._vertexChanged.call(this, latlng, added);\n\t},\n\n\t_cleanUpShape: function () {\n\t\tvar markerCount = this._markers.length;\n\n\t\tif (markerCount > 0) {\n\t\t\tthis._markers[0].off('click', this._finishShape, this);\n\n\t\t\tif (markerCount > 2) {\n\t\t\t\tthis._markers[markerCount - 1].off('dblclick', this._finishShape, this);\n\t\t\t}\n\t\t}\n\t}\n});\n\n\n\nL.SimpleShape = {};\n/**\n * @class L.Draw.SimpleShape\n * @aka Draw.SimpleShape\n * @inherits L.Draw.Feature\n */\nL.Draw.SimpleShape = L.Draw.Feature.extend({\n\toptions: {\n\t\trepeatMode: false\n\t},\n\n\t// @method initialize(): void\n\tinitialize: function (map, options) {\n\t\tthis._endLabelText = L.drawLocal.draw.handlers.simpleshape.tooltip.end;\n\n\t\tL.Draw.Feature.prototype.initialize.call(this, map, options);\n\t},\n\n\t// @method addHooks(): void\n\t// Add listener hooks to this handler.\n\taddHooks: function () {\n\t\tL.Draw.Feature.prototype.addHooks.call(this);\n\t\tif (this._map) {\n\t\t\tthis._mapDraggable = this._map.dragging.enabled();\n\n\t\t\tif (this._mapDraggable) {\n\t\t\t\tthis._map.dragging.disable();\n\t\t\t}\n\n\t\t\t//TODO refactor: move cursor to styles\n\t\t\tthis._container.style.cursor = 'crosshair';\n\n\t\t\tthis._tooltip.updateContent({text: this._initialLabelText});\n\n\t\t\tthis._map\n\t\t\t\t.on('mousedown', this._onMouseDown, this)\n\t\t\t\t.on('mousemove', this._onMouseMove, this)\n\t\t\t\t.on('touchstart', this._onMouseDown, this)\n\t\t\t\t.on('touchmove', this._onMouseMove, this);\n\n\t\t\t// we should prevent default, otherwise default behavior (scrolling) will fire,\n\t\t\t// and that will cause document.touchend to fire and will stop the drawing\n\t\t\t// (circle, rectangle) in touch mode.\n\t\t\t// (update): we have to send passive now to prevent scroll, because by default it is {passive: true} now, which means,\n\t\t\t// handler can't event.preventDefault\n\t\t\t// check the news https://developers.google.com/web/updates/2016/06/passive-event-listeners\n\t\t\tdocument.addEventListener('touchstart', L.DomEvent.preventDefault, {passive: false});\n\t\t}\n\t},\n\n\t// @method removeHooks(): void\n\t// Remove listener hooks from this handler.\n\tremoveHooks: function () {\n\t\tL.Draw.Feature.prototype.removeHooks.call(this);\n\t\tif (this._map) {\n\t\t\tif (this._mapDraggable) {\n\t\t\t\tthis._map.dragging.enable();\n\t\t\t}\n\n\t\t\t//TODO refactor: move cursor to styles\n\t\t\tthis._container.style.cursor = '';\n\n\t\t\tthis._map\n\t\t\t\t.off('mousedown', this._onMouseDown, this)\n\t\t\t\t.off('mousemove', this._onMouseMove, this)\n\t\t\t\t.off('touchstart', this._onMouseDown, this)\n\t\t\t\t.off('touchmove', this._onMouseMove, this);\n\n\t\t\tL.DomEvent.off(document, 'mouseup', this._onMouseUp, this);\n\t\t\tL.DomEvent.off(document, 'touchend', this._onMouseUp, this);\n\n\t\t\tdocument.removeEventListener('touchstart', L.DomEvent.preventDefault);\n\n\t\t\t// If the box element doesn't exist they must not have moved the mouse, so don't need to destroy/return\n\t\t\tif (this._shape) {\n\t\t\t\tthis._map.removeLayer(this._shape);\n\t\t\t\tdelete this._shape;\n\t\t\t}\n\t\t}\n\t\tthis._isDrawing = false;\n\t},\n\n\t_getTooltipText: function () {\n\t\treturn {\n\t\t\ttext: this._endLabelText\n\t\t};\n\t},\n\n\t_onMouseDown: function (e) {\n\t\tthis._isDrawing = true;\n\t\tthis._startLatLng = e.latlng;\n\n\t\tL.DomEvent\n\t\t\t.on(document, 'mouseup', this._onMouseUp, this)\n\t\t\t.on(document, 'touchend', this._onMouseUp, this)\n\t\t\t.preventDefault(e.originalEvent);\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tvar latlng = e.latlng;\n\n\t\tthis._tooltip.updatePosition(latlng);\n\t\tif (this._isDrawing) {\n\t\t\tthis._tooltip.updateContent(this._getTooltipText());\n\t\t\tthis._drawShape(latlng);\n\t\t}\n\t},\n\n\t_onMouseUp: function () {\n\t\tif (this._shape) {\n\t\t\tthis._fireCreatedEvent();\n\t\t}\n\n\t\tthis.disable();\n\t\tif (this.options.repeatMode) {\n\t\t\tthis.enable();\n\t\t}\n\t}\n});\n\n\n\n/**\n * @class L.Draw.Rectangle\n * @aka Draw.Rectangle\n * @inherits L.Draw.SimpleShape\n */\nL.Draw.Rectangle = L.Draw.SimpleShape.extend({\n\tstatics: {\n\t\tTYPE: 'rectangle'\n\t},\n\n\toptions: {\n\t\tshapeOptions: {\n\t\t\tstroke: true,\n\t\t\tcolor: '#3388ff',\n\t\t\tweight: 4,\n\t\t\topacity: 0.5,\n\t\t\tfill: true,\n\t\t\tfillColor: null, //same as color by default\n\t\t\tfillOpacity: 0.2,\n\t\t\tclickable: true\n\t\t},\n\t\tshowArea: true, //Whether to show the area in the tooltip\n\t\tmetric: true // Whether to use the metric measurement system or imperial\n\t},\n\n\t// @method initialize(): void\n\tinitialize: function (map, options) {\n\t\t// Save the type so super can fire, need to do this as cannot do this.TYPE :(\n\t\tthis.type = L.Draw.Rectangle.TYPE;\n\n\t\tthis._initialLabelText = L.drawLocal.draw.handlers.rectangle.tooltip.start;\n\n\t\tL.Draw.SimpleShape.prototype.initialize.call(this, map, options);\n\t},\n\n\t// @method disable(): void\n\tdisable: function () {\n\t\tif (!this._enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isCurrentlyTwoClickDrawing = false;\n\t\tL.Draw.SimpleShape.prototype.disable.call(this);\n\t},\n\n\t_onMouseUp: function (e) {\n\t\tif (!this._shape && !this._isCurrentlyTwoClickDrawing) {\n\t\t\tthis._isCurrentlyTwoClickDrawing = true;\n\t\t\treturn;\n\t\t}\n\n\t\t// Make sure closing click is on map\n\t\tif (this._isCurrentlyTwoClickDrawing && !_hasAncestor(e.target, 'leaflet-pane')) {\n\t\t\treturn;\n\t\t}\n\n\t\tL.Draw.SimpleShape.prototype._onMouseUp.call(this);\n\t},\n\n\t_drawShape: function (latlng) {\n\t\tif (!this._shape) {\n\t\t\tthis._shape = new L.Rectangle(new L.LatLngBounds(this._startLatLng, latlng), this.options.shapeOptions);\n\t\t\tthis._map.addLayer(this._shape);\n\t\t} else {\n\t\t\tthis._shape.setBounds(new L.LatLngBounds(this._startLatLng, latlng));\n\t\t}\n\t},\n\n\t_fireCreatedEvent: function () {\n\t\tvar rectangle = new L.Rectangle(this._shape.getBounds(), this.options.shapeOptions);\n\t\tL.Draw.SimpleShape.prototype._fireCreatedEvent.call(this, rectangle);\n\t},\n\n\t_getTooltipText: function () {\n\t\tvar tooltipText = L.Draw.SimpleShape.prototype._getTooltipText.call(this),\n\t\t\tshape = this._shape,\n\t\t\tshowArea = this.options.showArea,\n\t\t\tlatLngs, area, subtext;\n\n\t\tif (shape) {\n\t\t\tlatLngs = this._shape._defaultShape ? this._shape._defaultShape() : this._shape.getLatLngs();\n\t\t\tarea = L.GeometryUtil.geodesicArea(latLngs);\n\t\t\tsubtext = showArea ? L.GeometryUtil.readableArea(area, this.options.metric) : '';\n\t\t}\n\n\t\treturn {\n\t\t\ttext: tooltipText.text,\n\t\t\tsubtext: subtext\n\t\t};\n\t}\n});\n\nfunction _hasAncestor(el, cls) {\n\twhile ((el = el.parentElement) && !el.classList.contains(cls)) {\n\t\t;\n\t}\n\treturn el;\n}\n\n\n\n/**\n * @class L.Draw.Marker\n * @aka Draw.Marker\n * @inherits L.Draw.Feature\n */\nL.Draw.Marker = L.Draw.Feature.extend({\n\tstatics: {\n\t\tTYPE: 'marker'\n\t},\n\n\toptions: {\n\t\ticon: new L.Icon.Default(),\n\t\trepeatMode: false,\n\t\tzIndexOffset: 2000 // This should be > than the highest z-index any markers\n\t},\n\n\t// @method initialize(): void\n\tinitialize: function (map, options) {\n\t\t// Save the type so super can fire, need to do this as cannot do this.TYPE :(\n\t\tthis.type = L.Draw.Marker.TYPE;\n\n\t\tthis._initialLabelText = L.drawLocal.draw.handlers.marker.tooltip.start;\n\n\t\tL.Draw.Feature.prototype.initialize.call(this, map, options);\n\t},\n\n\t// @method addHooks(): void\n\t// Add listener hooks to this handler.\n\taddHooks: function () {\n\t\tL.Draw.Feature.prototype.addHooks.call(this);\n\n\t\tif (this._map) {\n\t\t\tthis._tooltip.updateContent({text: this._initialLabelText});\n\n\t\t\t// Same mouseMarker as in Draw.Polyline\n\t\t\tif (!this._mouseMarker) {\n\t\t\t\tthis._mouseMarker = L.marker(this._map.getCenter(), {\n\t\t\t\t\ticon: L.divIcon({\n\t\t\t\t\t\tclassName: 'leaflet-mouse-marker',\n\t\t\t\t\t\ticonAnchor: [20, 20],\n\t\t\t\t\t\ticonSize: [40, 40]\n\t\t\t\t\t}),\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tzIndexOffset: this.options.zIndexOffset\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._mouseMarker\n\t\t\t\t.on('click', this._onClick, this)\n\t\t\t\t.addTo(this._map);\n\n\t\t\tthis._map.on('mousemove', this._onMouseMove, this);\n\t\t\tthis._map.on('click', this._onTouch, this);\n\t\t}\n\t},\n\n\t// @method removeHooks(): void\n\t// Remove listener hooks from this handler.\n\tremoveHooks: function () {\n\t\tL.Draw.Feature.prototype.removeHooks.call(this);\n\n\t\tif (this._map) {\n\t\t\tthis._map\n\t\t\t\t.off('click', this._onClick, this)\n\t\t\t\t.off('click', this._onTouch, this);\n\t\t\tif (this._marker) {\n\t\t\t\tthis._marker.off('click', this._onClick, this);\n\t\t\t\tthis._map\n\t\t\t\t\t.removeLayer(this._marker);\n\t\t\t\tdelete this._marker;\n\t\t\t}\n\n\t\t\tthis._mouseMarker.off('click', this._onClick, this);\n\t\t\tthis._map.removeLayer(this._mouseMarker);\n\t\t\tdelete this._mouseMarker;\n\n\t\t\tthis._map.off('mousemove', this._onMouseMove, this);\n\t\t}\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tvar latlng = e.latlng;\n\n\t\tthis._tooltip.updatePosition(latlng);\n\t\tthis._mouseMarker.setLatLng(latlng);\n\n\t\tif (!this._marker) {\n\t\t\tthis._marker = this._createMarker(latlng);\n\t\t\t// Bind to both marker and map to make sure we get the click event.\n\t\t\tthis._marker.on('click', this._onClick, this);\n\t\t\tthis._map\n\t\t\t\t.on('click', this._onClick, this)\n\t\t\t\t.addLayer(this._marker);\n\t\t}\n\t\telse {\n\t\t\tlatlng = this._mouseMarker.getLatLng();\n\t\t\tthis._marker.setLatLng(latlng);\n\t\t}\n\t},\n\n\t_createMarker: function (latlng) {\n\t\treturn new L.Marker(latlng, {\n\t\t\ticon: this.options.icon,\n\t\t\tzIndexOffset: this.options.zIndexOffset\n\t\t});\n\t},\n\n\t_onClick: function () {\n\t\tthis._fireCreatedEvent();\n\n\t\tthis.disable();\n\t\tif (this.options.repeatMode) {\n\t\t\tthis.enable();\n\t\t}\n\t},\n\n\t_onTouch: function (e) {\n\t\t// called on click & tap, only really does any thing on tap\n\t\tthis._onMouseMove(e); // creates & places marker\n\t\tthis._onClick(); // permanently places marker & ends interaction\n\t},\n\n\t_fireCreatedEvent: function () {\n\t\tvar marker = new L.Marker.Touch(this._marker.getLatLng(), {icon: this.options.icon});\n\t\tL.Draw.Feature.prototype._fireCreatedEvent.call(this, marker);\n\t}\n});\n\n\n\n/**\n * @class L.Draw.CircleMarker\n * @aka Draw.CircleMarker\n * @inherits L.Draw.Marker\n */\nL.Draw.CircleMarker = L.Draw.Marker.extend({\n\tstatics: {\n\t\tTYPE: 'circlemarker'\n\t},\n\n\toptions: {\n\t\tstroke: true,\n\t\tcolor: '#3388ff',\n\t\tweight: 4,\n\t\topacity: 0.5,\n\t\tfill: true,\n\t\tfillColor: null, //same as color by default\n\t\tfillOpacity: 0.2,\n\t\tclickable: true,\n\t\tzIndexOffset: 2000 // This should be > than the highest z-index any markers\n\t},\n\n\t// @method initialize(): void\n\tinitialize: function (map, options) {\n\t\t// Save the type so super can fire, need to do this as cannot do this.TYPE :(\n\t\tthis.type = L.Draw.CircleMarker.TYPE;\n\n\t\tthis._initialLabelText = L.drawLocal.draw.handlers.circlemarker.tooltip.start;\n\n\t\tL.Draw.Feature.prototype.initialize.call(this, map, options);\n\t},\n\n\n\t_fireCreatedEvent: function () {\n\t\tvar circleMarker = new L.CircleMarker(this._marker.getLatLng(), this.options);\n\t\tL.Draw.Feature.prototype._fireCreatedEvent.call(this, circleMarker);\n\t},\n\n\t_createMarker: function (latlng) {\n\t\treturn new L.CircleMarker(latlng, this.options);\n\t}\n});\n\n\n\n/**\n * @class L.Draw.Circle\n * @aka Draw.Circle\n * @inherits L.Draw.SimpleShape\n */\nL.Draw.Circle = L.Draw.SimpleShape.extend({\n\tstatics: {\n\t\tTYPE: 'circle'\n\t},\n\n\toptions: {\n\t\tshapeOptions: {\n\t\t\tstroke: true,\n\t\t\tcolor: '#3388ff',\n\t\t\tweight: 4,\n\t\t\topacity: 0.5,\n\t\t\tfill: true,\n\t\t\tfillColor: null, //same as color by default\n\t\t\tfillOpacity: 0.2,\n\t\t\tclickable: true\n\t\t},\n\t\tshowRadius: true,\n\t\tmetric: true, // Whether to use the metric measurement system or imperial\n\t\tfeet: true, // When not metric, use feet instead of yards for display\n\t\tnautic: false // When not metric, not feet use nautic mile for display\n\t},\n\n\t// @method initialize(): void\n\tinitialize: function (map, options) {\n\t\t// Save the type so super can fire, need to do this as cannot do this.TYPE :(\n\t\tthis.type = L.Draw.Circle.TYPE;\n\n\t\tthis._initialLabelText = L.drawLocal.draw.handlers.circle.tooltip.start;\n\n\t\tL.Draw.SimpleShape.prototype.initialize.call(this, map, options);\n\t},\n\n\t_drawShape: function (latlng) {\n\t\t// Calculate the distance based on the version\n\t\tif (L.GeometryUtil.isVersion07x()) {\n\t\t\tvar distance = this._startLatLng.distanceTo(latlng);\n\t\t} else {\n\t\t\tvar distance = this._map.distance(this._startLatLng, latlng);\n\t\t}\n\n\t\tif (!this._shape) {\n\t\t\tthis._shape = new L.Circle(this._startLatLng, distance, this.options.shapeOptions);\n\t\t\tthis._map.addLayer(this._shape);\n\t\t} else {\n\t\t\tthis._shape.setRadius(distance);\n\t\t}\n\t},\n\n\t_fireCreatedEvent: function () {\n\t\tvar circle = new L.Circle(this._startLatLng, this._shape.getRadius(), this.options.shapeOptions);\n\t\tL.Draw.SimpleShape.prototype._fireCreatedEvent.call(this, circle);\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tvar latlng = e.latlng,\n\t\t\tshowRadius = this.options.showRadius,\n\t\t\tuseMetric = this.options.metric,\n\t\t\tradius;\n\n\t\tthis._tooltip.updatePosition(latlng);\n\t\tif (this._isDrawing) {\n\t\t\tthis._drawShape(latlng);\n\n\t\t\t// Get the new radius (rounded to 1 dp)\n\t\t\tradius = this._shape.getRadius().toFixed(1);\n\n\t\t\tvar subtext = '';\n\t\t\tif (showRadius) {\n\t\t\t\tsubtext = L.drawLocal.draw.handlers.circle.radius + ': ' +\n\t\t\t\t\tL.GeometryUtil.readableDistance(radius, useMetric, this.options.feet, this.options.nautic);\n\t\t\t}\n\t\t\tthis._tooltip.updateContent({\n\t\t\t\ttext: this._endLabelText,\n\t\t\t\tsubtext: subtext\n\t\t\t});\n\t\t}\n\t}\n});\n\n\n\nL.Edit = L.Edit || {};\n\n/**\n * @class L.Edit.Marker\n * @aka Edit.Marker\n */\nL.Edit.Marker = L.Handler.extend({\n\t// @method initialize(): void\n\tinitialize: function (marker, options) {\n\t\tthis._marker = marker;\n\t\tL.setOptions(this, options);\n\t},\n\n\t// @method addHooks(): void\n\t// Add listener hooks to this handler\n\taddHooks: function () {\n\t\tvar marker = this._marker;\n\n\t\tmarker.dragging.enable();\n\t\tmarker.on('dragend', this._onDragEnd, marker);\n\t\tthis._toggleMarkerHighlight();\n\t},\n\n\t// @method removeHooks(): void\n\t// Remove listener hooks from this handler\n\tremoveHooks: function () {\n\t\tvar marker = this._marker;\n\n\t\tmarker.dragging.disable();\n\t\tmarker.off('dragend', this._onDragEnd, marker);\n\t\tthis._toggleMarkerHighlight();\n\t},\n\n\t_onDragEnd: function (e) {\n\t\tvar layer = e.target;\n\t\tlayer.edited = true;\n\t\tthis._map.fire(L.Draw.Event.EDITMOVE, {layer: layer});\n\t},\n\n\t_toggleMarkerHighlight: function () {\n\t\tvar icon = this._marker._icon;\n\n\t\t// Don't do anything if this layer is a marker but doesn't have an icon. Markers\n\t\t// should usually have icons. If using Leaflet.draw with Leaflet.markercluster there\n\t\t// is a chance that a marker doesn't.\n\t\tif (!icon) {\n\t\t\treturn;\n\t\t}\n\n\t\t// This is quite naughty, but I don't see another way of doing it. (short of setting a new icon)\n\t\ticon.style.display = 'none';\n\n\t\tif (L.DomUtil.hasClass(icon, 'leaflet-edit-marker-selected')) {\n\t\t\tL.DomUtil.removeClass(icon, 'leaflet-edit-marker-selected');\n\t\t\t// Offset as the border will make the icon move.\n\t\t\tthis._offsetMarker(icon, -4);\n\n\t\t} else {\n\t\t\tL.DomUtil.addClass(icon, 'leaflet-edit-marker-selected');\n\t\t\t// Offset as the border will make the icon move.\n\t\t\tthis._offsetMarker(icon, 4);\n\t\t}\n\n\t\ticon.style.display = '';\n\t},\n\n\t_offsetMarker: function (icon, offset) {\n\t\tvar iconMarginTop = parseInt(icon.style.marginTop, 10) - offset,\n\t\t\ticonMarginLeft = parseInt(icon.style.marginLeft, 10) - offset;\n\n\t\ticon.style.marginTop = iconMarginTop + 'px';\n\t\ticon.style.marginLeft = iconMarginLeft + 'px';\n\t}\n});\n\nL.Marker.addInitHook(function () {\n\tif (L.Edit.Marker) {\n\t\tthis.editing = new L.Edit.Marker(this);\n\n\t\tif (this.options.editable) {\n\t\t\tthis.editing.enable();\n\t\t}\n\t}\n});\n\n\n\nL.Edit = L.Edit || {};\n\n/**\n * @class L.Edit.Polyline\n * @aka L.Edit.Poly\n * @aka Edit.Poly\n */\nL.Edit.Poly = L.Handler.extend({\n\t// @method initialize(): void\n\tinitialize: function (poly) {\n\n\t\tthis.latlngs = [poly._latlngs];\n\t\tif (poly._holes) {\n\t\t\tthis.latlngs = this.latlngs.concat(poly._holes);\n\t\t}\n\n\t\tthis._poly = poly;\n\n\t\tthis._poly.on('revert-edited', this._updateLatLngs, this);\n\t},\n\n\t// Compatibility method to normalize Poly* objects\n\t// between 0.7.x and 1.0+\n\t_defaultShape: function () {\n\t\tif (!L.Polyline._flat) {\n\t\t\treturn this._poly._latlngs;\n\t\t}\n\t\treturn L.Polyline._flat(this._poly._latlngs) ? this._poly._latlngs : this._poly._latlngs[0];\n\t},\n\n\t_eachVertexHandler: function (callback) {\n\t\tfor (var i = 0; i < this._verticesHandlers.length; i++) {\n\t\t\tcallback(this._verticesHandlers[i]);\n\t\t}\n\t},\n\n\t// @method addHooks(): void\n\t// Add listener hooks to this handler\n\taddHooks: function () {\n\t\tthis._initHandlers();\n\t\tthis._eachVertexHandler(function (handler) {\n\t\t\thandler.addHooks();\n\t\t});\n\t},\n\n\t// @method removeHooks(): void\n\t// Remove listener hooks from this handler\n\tremoveHooks: function () {\n\t\tthis._eachVertexHandler(function (handler) {\n\t\t\thandler.removeHooks();\n\t\t});\n\t},\n\n\t// @method updateMarkers(): void\n\t// Fire an update for each vertex handler\n\tupdateMarkers: function () {\n\t\tthis._eachVertexHandler(function (handler) {\n\t\t\thandler.updateMarkers();\n\t\t});\n\t},\n\n\t_initHandlers: function () {\n\t\tthis._verticesHandlers = [];\n\t\tfor (var i = 0; i < this.latlngs.length; i++) {\n\t\t\tthis._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly, this.latlngs[i], this._poly.options.poly));\n\t\t}\n\t},\n\n\t_updateLatLngs: function (e) {\n\t\tthis.latlngs = [e.layer._latlngs];\n\t\tif (e.layer._holes) {\n\t\t\tthis.latlngs = this.latlngs.concat(e.layer._holes);\n\t\t}\n\t}\n\n});\n\n/**\n * @class L.Edit.PolyVerticesEdit\n * @aka Edit.PolyVerticesEdit\n */\nL.Edit.PolyVerticesEdit = L.Handler.extend({\n\toptions: {\n\t\ticon: new L.DivIcon({\n\t\t\ticonSize: new L.Point(8, 8),\n\t\t\tclassName: 'leaflet-div-icon leaflet-editing-icon'\n\t\t}),\n\t\ttouchIcon: new L.DivIcon({\n\t\t\ticonSize: new L.Point(20, 20),\n\t\t\tclassName: 'leaflet-div-icon leaflet-editing-icon leaflet-touch-icon'\n\t\t}),\n\t\tdrawError: {\n\t\t\tcolor: '#b00b00',\n\t\t\ttimeout: 1000\n\t\t}\n\n\n\t},\n\n\t// @method intialize(): void\n\tinitialize: function (poly, latlngs, options) {\n\t\t// if touch, switch to touch icon\n\t\tif (L.Browser.touch) {\n\t\t\tthis.options.icon = this.options.touchIcon;\n\t\t}\n\t\tthis._poly = poly;\n\n\t\tif (options && options.drawError) {\n\t\t\toptions.drawError = L.Util.extend({}, this.options.drawError, options.drawError);\n\t\t}\n\n\t\tthis._latlngs = latlngs;\n\n\t\tL.setOptions(this, options);\n\t},\n\n\t// Compatibility method to normalize Poly* objects\n\t// between 0.7.x and 1.0+\n\t_defaultShape: function () {\n\t\tif (!L.Polyline._flat) {\n\t\t\treturn this._latlngs;\n\t\t}\n\t\treturn L.Polyline._flat(this._latlngs) ? this._latlngs : this._latlngs[0];\n\t},\n\n\t// @method addHooks(): void\n\t// Add listener hooks to this handler.\n\taddHooks: function () {\n\t\tvar poly = this._poly;\n\t\tvar path = poly._path;\n\n\t\tif (!(poly instanceof L.Polygon)) {\n\t\t\tpoly.options.fill = false;\n\t\t\tif (poly.options.editing) {\n\t\t\t\tpoly.options.editing.fill = false;\n\t\t\t}\n\t\t}\n\n\t\tif (path) {\n\t\t\tif (poly.options.editing && poly.options.editing.className) {\n\t\t\t\tif (poly.options.original.className) {\n\t\t\t\t\tpoly.options.original.className.split(' ').forEach(function (className) {\n\t\t\t\t\t\tL.DomUtil.removeClass(path, className);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tpoly.options.editing.className.split(' ').forEach(function (className) {\n\t\t\t\t\tL.DomUtil.addClass(path, className);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tpoly.setStyle(poly.options.editing);\n\n\t\tif (this._poly._map) {\n\n\t\t\tthis._map = this._poly._map; // Set map\n\n\t\t\tif (!this._markerGroup) {\n\t\t\t\tthis._initMarkers();\n\t\t\t}\n\t\t\tthis._poly._map.addLayer(this._markerGroup);\n\t\t}\n\t},\n\n\t// @method removeHooks(): void\n\t// Remove listener hooks from this handler.\n\tremoveHooks: function () {\n\t\tvar poly = this._poly;\n\t\tvar path = poly._path;\n\n\t\tif (path) {\n\t\t\tif (poly.options.editing && poly.options.editing.className) {\n\t\t\t\tpoly.options.editing.className.split(' ').forEach(function (className) {\n\t\t\t\t\tL.DomUtil.removeClass(path, className);\n\t\t\t\t});\n\t\t\t\tif (poly.options.original.className) {\n\t\t\t\t\tpoly.options.original.className.split(' ').forEach(function (className) {\n\t\t\t\t\t\tL.DomUtil.addClass(path, className);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tpoly.setStyle(poly.options.original);\n\n\t\tif (poly._map) {\n\t\t\tpoly._map.removeLayer(this._markerGroup);\n\t\t\tdelete this._markerGroup;\n\t\t\tdelete this._markers;\n\t\t}\n\t},\n\n\t// @method updateMarkers(): void\n\t// Clear markers and update their location\n\tupdateMarkers: function () {\n\t\tthis._markerGroup.clearLayers();\n\t\tthis._initMarkers();\n\t},\n\n\t_initMarkers: function () {\n\t\tif (!this._markerGroup) {\n\t\t\tthis._markerGroup = new L.LayerGroup();\n\t\t}\n\t\tthis._markers = [];\n\n\t\tvar latlngs = this._defaultShape(),\n\t\t\ti, j, len, marker;\n\n\t\tfor (i = 0, len = latlngs.length; i < len; i++) {\n\n\t\t\tmarker = this._createMarker(latlngs[i], i);\n\t\t\tmarker.on('click', this._onMarkerClick, this);\n\t\t\tmarker.on('contextmenu', this._onContextMenu, this);\n\t\t\tthis._markers.push(marker);\n\t\t}\n\n\t\tvar markerLeft, markerRight;\n\n\t\tfor (i = 0, j = len - 1; i < len; j = i++) {\n\t\t\tif (i === 0 && !(L.Polygon && (this._poly instanceof L.Polygon))) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tmarkerLeft = this._markers[j];\n\t\t\tmarkerRight = this._markers[i];\n\n\t\t\tthis._createMiddleMarker(markerLeft, markerRight);\n\t\t\tthis._updatePrevNext(markerLeft, markerRight);\n\t\t}\n\t},\n\n\t_createMarker: function (latlng, index) {\n\t\t// Extending L.Marker in TouchEvents.js to include touch.\n\t\tvar marker = new L.Marker.Touch(latlng, {\n\t\t\tdraggable: true,\n\t\t\ticon: this.options.icon,\n\t\t});\n\n\t\tmarker._origLatLng = latlng;\n\t\tmarker._index = index;\n\n\t\tmarker\n\t\t\t.on('dragstart', this._onMarkerDragStart, this)\n\t\t\t.on('drag', this._onMarkerDrag, this)\n\t\t\t.on('dragend', this._fireEdit, this)\n\t\t\t.on('touchmove', this._onTouchMove, this)\n\t\t\t.on('touchend', this._fireEdit, this)\n\t\t\t.on('MSPointerMove', this._onTouchMove, this)\n\t\t\t.on('MSPointerUp', this._fireEdit, this);\n\n\t\tthis._markerGroup.addLayer(marker);\n\n\t\treturn marker;\n\t},\n\n\t_onMarkerDragStart: function () {\n\t\tthis._poly.fire('editstart');\n\t},\n\n\t_spliceLatLngs: function () {\n\t\tvar latlngs = this._defaultShape();\n\t\tvar removed = [].splice.apply(latlngs, arguments);\n\t\tthis._poly._convertLatLngs(latlngs, true);\n\t\tthis._poly.redraw();\n\t\treturn removed;\n\t},\n\n\t_removeMarker: function (marker) {\n\t\tvar i = marker._index;\n\n\t\tthis._markerGroup.removeLayer(marker);\n\t\tthis._markers.splice(i, 1);\n\t\tthis._spliceLatLngs(i, 1);\n\t\tthis._updateIndexes(i, -1);\n\n\t\tmarker\n\t\t\t.off('dragstart', this._onMarkerDragStart, this)\n\t\t\t.off('drag', this._onMarkerDrag, this)\n\t\t\t.off('dragend', this._fireEdit, this)\n\t\t\t.off('touchmove', this._onMarkerDrag, this)\n\t\t\t.off('touchend', this._fireEdit, this)\n\t\t\t.off('click', this._onMarkerClick, this)\n\t\t\t.off('MSPointerMove', this._onTouchMove, this)\n\t\t\t.off('MSPointerUp', this._fireEdit, this);\n\t},\n\n\t_fireEdit: function () {\n\t\tthis._poly.edited = true;\n\t\tthis._poly.fire('edit');\n\t\tthis._poly._map.fire(L.Draw.Event.EDITVERTEX, {layers: this._markerGroup, poly: this._poly});\n\t},\n\n\t_onMarkerDrag: function (e) {\n\t\tvar marker = e.target;\n\t\tvar poly = this._poly;\n\n\t\tvar oldOrigLatLng = L.LatLngUtil.cloneLatLng(marker._origLatLng);\n\t\tL.extend(marker._origLatLng, marker._latlng);\n\t\tif (poly.options.poly) {\n\t\t\tvar tooltip = poly._map._editTooltip; // Access the tooltip\n\n\t\t\t// If we don't allow intersections and the polygon intersects\n\t\t\tif (!poly.options.poly.allowIntersection && poly.intersects()) {\n\t\t\t\tL.extend(marker._origLatLng, oldOrigLatLng);\n\t\t\t\tmarker.setLatLng(oldOrigLatLng);\n\t\t\t\tvar originalColor = poly.options.color;\n\t\t\t\tpoly.setStyle({color: this.options.drawError.color});\n\t\t\t\tif (tooltip) {\n\t\t\t\t\ttooltip.updateContent({\n\t\t\t\t\t\ttext: L.drawLocal.draw.handlers.polyline.error\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Reset everything back to normal after a second\n\t\t\t\tsetTimeout(function () {\n\t\t\t\t\tpoly.setStyle({color: originalColor});\n\t\t\t\t\tif (tooltip) {\n\t\t\t\t\t\ttooltip.updateContent({\n\t\t\t\t\t\t\ttext: L.drawLocal.edit.handlers.edit.tooltip.text,\n\t\t\t\t\t\t\tsubtext: L.drawLocal.edit.handlers.edit.tooltip.subtext\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t}\n\n\t\tif (marker._middleLeft) {\n\t\t\tmarker._middleLeft.setLatLng(this._getMiddleLatLng(marker._prev, marker));\n\t\t}\n\t\tif (marker._middleRight) {\n\t\t\tmarker._middleRight.setLatLng(this._getMiddleLatLng(marker, marker._next));\n\t\t}\n\n\t\t//refresh the bounds when draging\n\t\tthis._poly._bounds._southWest = L.latLng(Infinity, Infinity);\n\t\tthis._poly._bounds._northEast = L.latLng(-Infinity, -Infinity);\n\t\tvar latlngs = this._poly.getLatLngs();\n\t\tthis._poly._convertLatLngs(latlngs, true);\n\t\tthis._poly.redraw();\n\t\tthis._poly.fire('editdrag');\n\t},\n\n\t_onMarkerClick: function (e) {\n\n\t\tvar minPoints = L.Polygon && (this._poly instanceof L.Polygon) ? 4 : 3,\n\t\t\tmarker = e.target;\n\n\t\t// If removing this point would create an invalid polyline/polygon don't remove\n\t\tif (this._defaultShape().length < minPoints) {\n\t\t\treturn;\n\t\t}\n\n\t\t// remove the marker\n\t\tthis._removeMarker(marker);\n\n\t\t// update prev/next links of adjacent markers\n\t\tthis._updatePrevNext(marker._prev, marker._next);\n\n\t\t// remove ghost markers near the removed marker\n\t\tif (marker._middleLeft) {\n\t\t\tthis._markerGroup.removeLayer(marker._middleLeft);\n\t\t}\n\t\tif (marker._middleRight) {\n\t\t\tthis._markerGroup.removeLayer(marker._middleRight);\n\t\t}\n\n\t\t// create a ghost marker in place of the removed one\n\t\tif (marker._prev && marker._next) {\n\t\t\tthis._createMiddleMarker(marker._prev, marker._next);\n\n\t\t} else if (!marker._prev) {\n\t\t\tmarker._next._middleLeft = null;\n\n\t\t} else if (!marker._next) {\n\t\t\tmarker._prev._middleRight = null;\n\t\t}\n\n\t\tthis._fireEdit();\n\t},\n\n\t_onContextMenu: function (e) {\n\t\tvar marker = e.target;\n\t\tvar poly = this._poly;\n\t\tthis._poly._map.fire(L.Draw.Event.MARKERCONTEXT, {marker: marker, layers: this._markerGroup, poly: this._poly});\n\t\tL.DomEvent.stopPropagation;\n\t},\n\n\t_onTouchMove: function (e) {\n\n\t\tvar layerPoint = this._map.mouseEventToLayerPoint(e.originalEvent.touches[0]),\n\t\t\tlatlng = this._map.layerPointToLatLng(layerPoint),\n\t\t\tmarker = e.target;\n\n\t\tL.extend(marker._origLatLng, latlng);\n\n\t\tif (marker._middleLeft) {\n\t\t\tmarker._middleLeft.setLatLng(this._getMiddleLatLng(marker._prev, marker));\n\t\t}\n\t\tif (marker._middleRight) {\n\t\t\tmarker._middleRight.setLatLng(this._getMiddleLatLng(marker, marker._next));\n\t\t}\n\n\t\tthis._poly.redraw();\n\t\tthis.updateMarkers();\n\t},\n\n\t_updateIndexes: function (index, delta) {\n\t\tthis._markerGroup.eachLayer(function (marker) {\n\t\t\tif (marker._index > index) {\n\t\t\t\tmarker._index += delta;\n\t\t\t}\n\t\t});\n\t},\n\n\t_createMiddleMarker: function (marker1, marker2) {\n\t\tvar latlng = this._getMiddleLatLng(marker1, marker2),\n\t\t\tmarker = this._createMarker(latlng),\n\t\t\tonClick,\n\t\t\tonDragStart,\n\t\t\tonDragEnd;\n\n\t\tmarker.setOpacity(0.6);\n\n\t\tmarker1._middleRight = marker2._middleLeft = marker;\n\n\t\tonDragStart = function () {\n\t\t\tmarker.off('touchmove', onDragStart, this);\n\t\t\tvar i = marker2._index;\n\n\t\t\tmarker._index = i;\n\n\t\t\tmarker\n\t\t\t\t.off('click', onClick, this)\n\t\t\t\t.on('click', this._onMarkerClick, this);\n\n\t\t\tlatlng.lat = marker.getLatLng().lat;\n\t\t\tlatlng.lng = marker.getLatLng().lng;\n\t\t\tthis._spliceLatLngs(i, 0, latlng);\n\t\t\tthis._markers.splice(i, 0, marker);\n\n\t\t\tmarker.setOpacity(1);\n\n\t\t\tthis._updateIndexes(i, 1);\n\t\t\tmarker2._index++;\n\t\t\tthis._updatePrevNext(marker1, marker);\n\t\t\tthis._updatePrevNext(marker, marker2);\n\n\t\t\tthis._poly.fire('editstart');\n\t\t};\n\n\t\tonDragEnd = function () {\n\t\t\tmarker.off('dragstart', onDragStart, this);\n\t\t\tmarker.off('dragend', onDragEnd, this);\n\t\t\tmarker.off('touchmove', onDragStart, this);\n\n\t\t\tthis._createMiddleMarker(marker1, marker);\n\t\t\tthis._createMiddleMarker(marker, marker2);\n\t\t};\n\n\t\tonClick = function () {\n\t\t\tonDragStart.call(this);\n\t\t\tonDragEnd.call(this);\n\t\t\tthis._fireEdit();\n\t\t};\n\n\t\tmarker\n\t\t\t.on('click', onClick, this)\n\t\t\t.on('dragstart', onDragStart, this)\n\t\t\t.on('dragend', onDragEnd, this)\n\t\t\t.on('touchmove', onDragStart, this);\n\n\t\tthis._markerGroup.addLayer(marker);\n\t},\n\n\t_updatePrevNext: function (marker1, marker2) {\n\t\tif (marker1) {\n\t\t\tmarker1._next = marker2;\n\t\t}\n\t\tif (marker2) {\n\t\t\tmarker2._prev = marker1;\n\t\t}\n\t},\n\n\t_getMiddleLatLng: function (marker1, marker2) {\n\t\tvar map = this._poly._map,\n\t\t\tp1 = map.project(marker1.getLatLng()),\n\t\t\tp2 = map.project(marker2.getLatLng());\n\n\t\treturn map.unproject(p1._add(p2)._divideBy(2));\n\t}\n});\n\nL.Polyline.addInitHook(function () {\n\n\t// Check to see if handler has already been initialized. This is to support versions of Leaflet that still have L.Handler.PolyEdit\n\tif (this.editing) {\n\t\treturn;\n\t}\n\n\tif (L.Edit.Poly) {\n\n\t\tthis.editing = new L.Edit.Poly(this);\n\n\t\tif (this.options.editable) {\n\t\t\tthis.editing.enable();\n\t\t}\n\t}\n\n\tthis.on('add', function () {\n\t\tif (this.editing && this.editing.enabled()) {\n\t\t\tthis.editing.addHooks();\n\t\t}\n\t});\n\n\tthis.on('remove', function () {\n\t\tif (this.editing && this.editing.enabled()) {\n\t\t\tthis.editing.removeHooks();\n\t\t}\n\t});\n});\n\n\n\nL.Edit = L.Edit || {};\n/**\n * @class L.Edit.SimpleShape\n * @aka Edit.SimpleShape\n */\nL.Edit.SimpleShape = L.Handler.extend({\n\toptions: {\n\t\tmoveIcon: new L.DivIcon({\n\t\t\ticonSize: new L.Point(8, 8),\n\t\t\tclassName: 'leaflet-div-icon leaflet-editing-icon leaflet-edit-move'\n\t\t}),\n\t\tresizeIcon: new L.DivIcon({\n\t\t\ticonSize: new L.Point(8, 8),\n\t\t\tclassName: 'leaflet-div-icon leaflet-editing-icon leaflet-edit-resize'\n\t\t}),\n\t\ttouchMoveIcon: new L.DivIcon({\n\t\t\ticonSize: new L.Point(20, 20),\n\t\t\tclassName: 'leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon'\n\t\t}),\n\t\ttouchResizeIcon: new L.DivIcon({\n\t\t\ticonSize: new L.Point(20, 20),\n\t\t\tclassName: 'leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon'\n\t\t}),\n\t},\n\n\t// @method intialize(): void\n\tinitialize: function (shape, options) {\n\t\t// if touch, switch to touch icon\n\t\tif (L.Browser.touch) {\n\t\t\tthis.options.moveIcon = this.options.touchMoveIcon;\n\t\t\tthis.options.resizeIcon = this.options.touchResizeIcon;\n\t\t}\n\n\t\tthis._shape = shape;\n\t\tL.Util.setOptions(this, options);\n\t},\n\n\t// @method addHooks(): void\n\t// Add listener hooks to this handler\n\taddHooks: function () {\n\t\tvar shape = this._shape;\n\t\tif (this._shape._map) {\n\t\t\tthis._map = this._shape._map;\n\t\t\tshape.setStyle(shape.options.editing);\n\n\t\t\tif (shape._map) {\n\t\t\t\tthis._map = shape._map;\n\t\t\t\tif (!this._markerGroup) {\n\t\t\t\t\tthis._initMarkers();\n\t\t\t\t}\n\t\t\t\tthis._map.addLayer(this._markerGroup);\n\t\t\t}\n\t\t}\n\t},\n\n\t// @method removeHooks(): void\n\t// Remove listener hooks from this handler\n\tremoveHooks: function () {\n\t\tvar shape = this._shape;\n\n\t\tshape.setStyle(shape.options.original);\n\n\t\tif (shape._map) {\n\t\t\tthis._unbindMarker(this._moveMarker);\n\n\t\t\tfor (var i = 0, l = this._resizeMarkers.length; i < l; i++) {\n\t\t\t\tthis._unbindMarker(this._resizeMarkers[i]);\n\t\t\t}\n\t\t\tthis._resizeMarkers = null;\n\n\t\t\tthis._map.removeLayer(this._markerGroup);\n\t\t\tdelete this._markerGroup;\n\t\t}\n\n\t\tthis._map = null;\n\t},\n\n\t// @method updateMarkers(): void\n\t// Remove the edit markers from this layer\n\tupdateMarkers: function () {\n\t\tthis._markerGroup.clearLayers();\n\t\tthis._initMarkers();\n\t},\n\n\t_initMarkers: function () {\n\t\tif (!this._markerGroup) {\n\t\t\tthis._markerGroup = new L.LayerGroup();\n\t\t}\n\n\t\t// Create center marker\n\t\tthis._createMoveMarker();\n\n\t\t// Create edge marker\n\t\tthis._createResizeMarker();\n\t},\n\n\t_createMoveMarker: function () {\n\t\t// Children override\n\t},\n\n\t_createResizeMarker: function () {\n\t\t// Children override\n\t},\n\n\t_createMarker: function (latlng, icon) {\n\t\t// Extending L.Marker in TouchEvents.js to include touch.\n\t\tvar marker = new L.Marker.Touch(latlng, {\n\t\t\tdraggable: true,\n\t\t\ticon: icon,\n\t\t\tzIndexOffset: 10\n\t\t});\n\n\t\tthis._bindMarker(marker);\n\n\t\tthis._markerGroup.addLayer(marker);\n\n\t\treturn marker;\n\t},\n\n\t_bindMarker: function (marker) {\n\t\tmarker\n\t\t\t.on('dragstart', this._onMarkerDragStart, this)\n\t\t\t.on('drag', this._onMarkerDrag, this)\n\t\t\t.on('dragend', this._onMarkerDragEnd, this)\n\t\t\t.on('touchstart', this._onTouchStart, this)\n\t\t\t.on('touchmove', this._onTouchMove, this)\n\t\t\t.on('MSPointerMove', this._onTouchMove, this)\n\t\t\t.on('touchend', this._onTouchEnd, this)\n\t\t\t.on('MSPointerUp', this._onTouchEnd, this);\n\t},\n\n\t_unbindMarker: function (marker) {\n\t\tmarker\n\t\t\t.off('dragstart', this._onMarkerDragStart, this)\n\t\t\t.off('drag', this._onMarkerDrag, this)\n\t\t\t.off('dragend', this._onMarkerDragEnd, this)\n\t\t\t.off('touchstart', this._onTouchStart, this)\n\t\t\t.off('touchmove', this._onTouchMove, this)\n\t\t\t.off('MSPointerMove', this._onTouchMove, this)\n\t\t\t.off('touchend', this._onTouchEnd, this)\n\t\t\t.off('MSPointerUp', this._onTouchEnd, this);\n\t},\n\n\t_onMarkerDragStart: function (e) {\n\t\tvar marker = e.target;\n\t\tmarker.setOpacity(0);\n\n\t\tthis._shape.fire('editstart');\n\t},\n\n\t_fireEdit: function () {\n\t\tthis._shape.edited = true;\n\t\tthis._shape.fire('edit');\n\t},\n\n\t_onMarkerDrag: function (e) {\n\t\tvar marker = e.target,\n\t\t\tlatlng = marker.getLatLng();\n\n\t\tif (marker === this._moveMarker) {\n\t\t\tthis._move(latlng);\n\t\t} else {\n\t\t\tthis._resize(latlng);\n\t\t}\n\n\t\tthis._shape.redraw();\n\t\tthis._shape.fire('editdrag');\n\t},\n\n\t_onMarkerDragEnd: function (e) {\n\t\tvar marker = e.target;\n\t\tmarker.setOpacity(1);\n\n\t\tthis._fireEdit();\n\t},\n\n\t_onTouchStart: function (e) {\n\t\tL.Edit.SimpleShape.prototype._onMarkerDragStart.call(this, e);\n\n\t\tif (typeof(this._getCorners) === 'function') {\n\t\t\t// Save a reference to the opposite point\n\t\t\tvar corners = this._getCorners(),\n\t\t\t\tmarker = e.target,\n\t\t\t\tcurrentCornerIndex = marker._cornerIndex;\n\n\t\t\tmarker.setOpacity(0);\n\n\t\t\t// Copyed from Edit.Rectangle.js line 23 _onMarkerDragStart()\n\t\t\t// Latlng is null otherwise.\n\t\t\tthis._oppositeCorner = corners[(currentCornerIndex + 2) % 4];\n\t\t\tthis._toggleCornerMarkers(0, currentCornerIndex);\n\t\t}\n\n\t\tthis._shape.fire('editstart');\n\t},\n\n\t_onTouchMove: function (e) {\n\t\tvar layerPoint = this._map.mouseEventToLayerPoint(e.originalEvent.touches[0]),\n\t\t\tlatlng = this._map.layerPointToLatLng(layerPoint),\n\t\t\tmarker = e.target;\n\n\t\tif (marker === this._moveMarker) {\n\t\t\tthis._move(latlng);\n\t\t} else {\n\t\t\tthis._resize(latlng);\n\t\t}\n\n\t\tthis._shape.redraw();\n\n\t\t// prevent touchcancel in IOS\n\t\t// e.preventDefault();\n\t\treturn false;\n\t},\n\n\t_onTouchEnd: function (e) {\n\t\tvar marker = e.target;\n\t\tmarker.setOpacity(1);\n\t\tthis.updateMarkers();\n\t\tthis._fireEdit();\n\t},\n\n\t_move: function () {\n\t\t// Children override\n\t},\n\n\t_resize: function () {\n\t\t// Children override\n\t}\n});\n\n\n\nL.Edit = L.Edit || {};\n/**\n * @class L.Edit.Rectangle\n * @aka Edit.Rectangle\n * @inherits L.Edit.SimpleShape\n */\nL.Edit.Rectangle = L.Edit.SimpleShape.extend({\n\t_createMoveMarker: function () {\n\t\tvar bounds = this._shape.getBounds(),\n\t\t\tcenter = bounds.getCenter();\n\n\t\tthis._moveMarker = this._createMarker(center, this.options.moveIcon);\n\t},\n\n\t_createResizeMarker: function () {\n\t\tvar corners = this._getCorners();\n\n\t\tthis._resizeMarkers = [];\n\n\t\tfor (var i = 0, l = corners.length; i < l; i++) {\n\t\t\tthis._resizeMarkers.push(this._createMarker(corners[i], this.options.resizeIcon));\n\t\t\t// Monkey in the corner index as we will need to know this for dragging\n\t\t\tthis._resizeMarkers[i]._cornerIndex = i;\n\t\t}\n\t},\n\n\t_onMarkerDragStart: function (e) {\n\t\tL.Edit.SimpleShape.prototype._onMarkerDragStart.call(this, e);\n\n\t\t// Save a reference to the opposite point\n\t\tvar corners = this._getCorners(),\n\t\t\tmarker = e.target,\n\t\t\tcurrentCornerIndex = marker._cornerIndex;\n\n\t\tthis._oppositeCorner = corners[(currentCornerIndex + 2) % 4];\n\n\t\tthis._toggleCornerMarkers(0, currentCornerIndex);\n\t},\n\n\t_onMarkerDragEnd: function (e) {\n\t\tvar marker = e.target,\n\t\t\tbounds, center;\n\n\t\t// Reset move marker position to the center\n\t\tif (marker === this._moveMarker) {\n\t\t\tbounds = this._shape.getBounds();\n\t\t\tcenter = bounds.getCenter();\n\n\t\t\tmarker.setLatLng(center);\n\t\t}\n\n\t\tthis._toggleCornerMarkers(1);\n\n\t\tthis._repositionCornerMarkers();\n\n\t\tL.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this, e);\n\t},\n\n\t_move: function (newCenter) {\n\t\tvar latlngs = this._shape._defaultShape ? this._shape._defaultShape() : this._shape.getLatLngs(),\n\t\t\tbounds = this._shape.getBounds(),\n\t\t\tcenter = bounds.getCenter(),\n\t\t\toffset, newLatLngs = [];\n\n\t\t// Offset the latlngs to the new center\n\t\tfor (var i = 0, l = latlngs.length; i < l; i++) {\n\t\t\toffset = [latlngs[i].lat - center.lat, latlngs[i].lng - center.lng];\n\t\t\tnewLatLngs.push([newCenter.lat + offset[0], newCenter.lng + offset[1]]);\n\t\t}\n\n\t\tthis._shape.setLatLngs(newLatLngs);\n\n\t\t// Reposition the resize markers\n\t\tthis._repositionCornerMarkers();\n\n\t\tthis._map.fire(L.Draw.Event.EDITMOVE, {layer: this._shape});\n\t},\n\n\t_resize: function (latlng) {\n\t\tvar bounds;\n\n\t\t// Update the shape based on the current position of this corner and the opposite point\n\t\tthis._shape.setBounds(L.latLngBounds(latlng, this._oppositeCorner));\n\n\t\t// Reposition the move marker\n\t\tbounds = this._shape.getBounds();\n\t\tthis._moveMarker.setLatLng(bounds.getCenter());\n\n\t\tthis._map.fire(L.Draw.Event.EDITRESIZE, {layer: this._shape});\n\t},\n\n\t_getCorners: function () {\n\t\tvar bounds = this._shape.getBounds(),\n\t\t\tnw = bounds.getNorthWest(),\n\t\t\tne = bounds.getNorthEast(),\n\t\t\tse = bounds.getSouthEast(),\n\t\t\tsw = bounds.getSouthWest();\n\n\t\treturn [nw, ne, se, sw];\n\t},\n\n\t_toggleCornerMarkers: function (opacity) {\n\t\tfor (var i = 0, l = this._resizeMarkers.length; i < l; i++) {\n\t\t\tthis._resizeMarkers[i].setOpacity(opacity);\n\t\t}\n\t},\n\n\t_repositionCornerMarkers: function () {\n\t\tvar corners = this._getCorners();\n\n\t\tfor (var i = 0, l = this._resizeMarkers.length; i < l; i++) {\n\t\t\tthis._resizeMarkers[i].setLatLng(corners[i]);\n\t\t}\n\t}\n});\n\nL.Rectangle.addInitHook(function () {\n\tif (L.Edit.Rectangle) {\n\t\tthis.editing = new L.Edit.Rectangle(this);\n\n\t\tif (this.options.editable) {\n\t\t\tthis.editing.enable();\n\t\t}\n\t}\n});\n\n\n\nL.Edit = L.Edit || {};\n/**\n * @class L.Edit.CircleMarker\n * @aka Edit.Circle\n * @inherits L.Edit.SimpleShape\n */\nL.Edit.CircleMarker = L.Edit.SimpleShape.extend({\n\t_createMoveMarker: function () {\n\t\tvar center = this._shape.getLatLng();\n\n\t\tthis._moveMarker = this._createMarker(center, this.options.moveIcon);\n\t},\n\n\t_createResizeMarker: function () {\n\t\t// To avoid an undefined check in L.Edit.SimpleShape.removeHooks\n\t\tthis._resizeMarkers = [];\n\t},\n\n\t_move: function (latlng) {\n\t\tif (this._resizeMarkers.length) {\n\t\t\tvar resizemarkerPoint = this._getResizeMarkerPoint(latlng);\n\t\t\t// Move the resize marker\n\t\t\tthis._resizeMarkers[0].setLatLng(resizemarkerPoint);\n\t\t}\n\n\t\t// Move the circle\n\t\tthis._shape.setLatLng(latlng);\n\n\t\tthis._map.fire(L.Draw.Event.EDITMOVE, {layer: this._shape});\n\t},\n});\n\nL.CircleMarker.addInitHook(function () {\n\tif (L.Edit.CircleMarker) {\n\t\tthis.editing = new L.Edit.CircleMarker(this);\n\n\t\tif (this.options.editable) {\n\t\t\tthis.editing.enable();\n\t\t}\n\t}\n\n\tthis.on('add', function () {\n\t\tif (this.editing && this.editing.enabled()) {\n\t\t\tthis.editing.addHooks();\n\t\t}\n\t});\n\n\tthis.on('remove', function () {\n\t\tif (this.editing && this.editing.enabled()) {\n\t\t\tthis.editing.removeHooks();\n\t\t}\n\t});\n});\n\n\n\nL.Edit = L.Edit || {};\n/**\n * @class L.Edit.Circle\n * @aka Edit.Circle\n * @inherits L.Edit.CircleMarker\n */\nL.Edit.Circle = L.Edit.CircleMarker.extend({\n\n\t_createResizeMarker: function () {\n\t\tvar center = this._shape.getLatLng(),\n\t\t\tresizemarkerPoint = this._getResizeMarkerPoint(center);\n\n\t\tthis._resizeMarkers = [];\n\t\tthis._resizeMarkers.push(this._createMarker(resizemarkerPoint, this.options.resizeIcon));\n\t},\n\n\t_getResizeMarkerPoint: function (latlng) {\n\t\t// From L.shape.getBounds()\n\t\tvar delta = this._shape._radius * Math.cos(Math.PI / 4),\n\t\t\tpoint = this._map.project(latlng);\n\t\treturn this._map.unproject([point.x + delta, point.y - delta]);\n\t},\n\n\t_resize: function (latlng) {\n\t\tvar moveLatLng = this._moveMarker.getLatLng();\n\t\tvar radius;\n\n\t\t// Calculate the radius based on the version\n\t\tif (L.GeometryUtil.isVersion07x()) {\n\t\t\tradius = moveLatLng.distanceTo(latlng);\n\t\t} else {\n\t\t\tradius = this._map.distance(moveLatLng, latlng);\n\t\t}\n\t\tthis._shape.setRadius(radius);\n\n\t\tif (this._map.editTooltip) {\n\t\t\tthis._map._editTooltip.updateContent({\n\t\t\t\ttext: L.drawLocal.edit.handlers.edit.tooltip.subtext + '<br />' + L.drawLocal.edit.handlers.edit.tooltip.text,\n\t\t\t\tsubtext: L.drawLocal.draw.handlers.circle.radius + ': ' +\n\t\t\t\tL.GeometryUtil.readableDistance(radius, true, this.options.feet, this.options.nautic)\n\t\t\t});\n\t\t}\n\n\t\tthis._shape.setRadius(radius);\n\n\t\tthis._map.fire(L.Draw.Event.EDITRESIZE, {layer: this._shape});\n\t}\n});\n\nL.Circle.addInitHook(function () {\n\tif (L.Edit.Circle) {\n\t\tthis.editing = new L.Edit.Circle(this);\n\n\t\tif (this.options.editable) {\n\t\t\tthis.editing.enable();\n\t\t}\n\t}\n});\n\n\n\nL.Map.mergeOptions({\n\ttouchExtend: true\n});\n\n/**\n * @class L.Map.TouchExtend\n * @aka TouchExtend\n */\nL.Map.TouchExtend = L.Handler.extend({\n\n\t// @method initialize(): void\n\t// Sets TouchExtend private accessor variables\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\t\tthis._container = map._container;\n\t\tthis._pane = map._panes.overlayPane;\n\t},\n\n\t// @method addHooks(): void\n\t// Adds dom listener events to the map container\n\taddHooks: function () {\n\t\tL.DomEvent.on(this._container, 'touchstart', this._onTouchStart, this);\n\t\tL.DomEvent.on(this._container, 'touchend', this._onTouchEnd, this);\n\t\tL.DomEvent.on(this._container, 'touchmove', this._onTouchMove, this);\n\t\tif (this._detectIE()) {\n\t\t\tL.DomEvent.on(this._container, 'MSPointerDown', this._onTouchStart, this);\n\t\t\tL.DomEvent.on(this._container, 'MSPointerUp', this._onTouchEnd, this);\n\t\t\tL.DomEvent.on(this._container, 'MSPointerMove', this._onTouchMove, this);\n\t\t\tL.DomEvent.on(this._container, 'MSPointerCancel', this._onTouchCancel, this);\n\n\t\t} else {\n\t\t\tL.DomEvent.on(this._container, 'touchcancel', this._onTouchCancel, this);\n\t\t\tL.DomEvent.on(this._container, 'touchleave', this._onTouchLeave, this);\n\t\t}\n\t},\n\n\t// @method removeHooks(): void\n\t// Removes dom listener events from the map container\n\tremoveHooks: function () {\n\t\tL.DomEvent.off(this._container, 'touchstart', this._onTouchStart, this);\n\t\tL.DomEvent.off(this._container, 'touchend', this._onTouchEnd, this);\n\t\tL.DomEvent.off(this._container, 'touchmove', this._onTouchMove, this);\n\t\tif (this._detectIE()) {\n\t\t\tL.DomEvent.off(this._container, 'MSPointerDown', this._onTouchStart, this);\n\t\t\tL.DomEvent.off(this._container, 'MSPointerUp', this._onTouchEnd, this);\n\t\t\tL.DomEvent.off(this._container, 'MSPointerMove', this._onTouchMove, this);\n\t\t\tL.DomEvent.off(this._container, 'MSPointerCancel', this._onTouchCancel, this);\n\t\t} else {\n\t\t\tL.DomEvent.off(this._container, 'touchcancel', this._onTouchCancel, this);\n\t\t\tL.DomEvent.off(this._container, 'touchleave', this._onTouchLeave, this);\n\t\t}\n\t},\n\n\t_touchEvent: function (e, type) {\n\t\t// #TODO: fix the pageX error that is do a bug in Android where a single touch triggers two click events\n\t\t// _filterClick is what leaflet uses as a workaround.\n\t\t// This is a problem with more things than just android. Another problem is touchEnd has no touches in\n\t\t// its touch list.\n\t\tvar touchEvent = {};\n\t\tif (typeof e.touches !== 'undefined') {\n\t\t\tif (!e.touches.length) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttouchEvent = e.touches[0];\n\t\t} else if (e.pointerType === 'touch') {\n\t\t\ttouchEvent = e;\n\t\t\tif (!this._filterClick(e)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\treturn;\n\t\t}\n\n\t\tvar containerPoint = this._map.mouseEventToContainerPoint(touchEvent),\n\t\t\tlayerPoint = this._map.mouseEventToLayerPoint(touchEvent),\n\t\t\tlatlng = this._map.layerPointToLatLng(layerPoint);\n\n\t\tthis._map.fire(type, {\n\t\t\tlatlng: latlng,\n\t\t\tlayerPoint: layerPoint,\n\t\t\tcontainerPoint: containerPoint,\n\t\t\tpageX: touchEvent.pageX,\n\t\t\tpageY: touchEvent.pageY,\n\t\t\toriginalEvent: e\n\t\t});\n\t},\n\n\t/** Borrowed from Leaflet and modified for bool ops **/\n\t_filterClick: function (e) {\n\t\tvar timeStamp = (e.timeStamp || e.originalEvent.timeStamp),\n\t\t\telapsed = L.DomEvent._lastClick && (timeStamp - L.DomEvent._lastClick);\n\n\t\t// are they closer together than 500ms yet more than 100ms?\n\t\t// Android typically triggers them ~300ms apart while multiple listeners\n\t\t// on the same event should be triggered far faster;\n\t\t// or check if click is simulated on the element, and if it is, reject any non-simulated events\n\t\tif ((elapsed && elapsed > 100 && elapsed < 500) || (e.target._simulatedClick && !e._simulated)) {\n\t\t\tL.DomEvent.stop(e);\n\t\t\treturn false;\n\t\t}\n\t\tL.DomEvent._lastClick = timeStamp;\n\t\treturn true;\n\t},\n\n\t_onTouchStart: function (e) {\n\t\tif (!this._map._loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar type = 'touchstart';\n\t\tthis._touchEvent(e, type);\n\n\t},\n\n\t_onTouchEnd: function (e) {\n\t\tif (!this._map._loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar type = 'touchend';\n\t\tthis._touchEvent(e, type);\n\t},\n\n\t_onTouchCancel: function (e) {\n\t\tif (!this._map._loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar type = 'touchcancel';\n\t\tif (this._detectIE()) {\n\t\t\ttype = 'pointercancel';\n\t\t}\n\t\tthis._touchEvent(e, type);\n\t},\n\n\t_onTouchLeave: function (e) {\n\t\tif (!this._map._loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar type = 'touchleave';\n\t\tthis._touchEvent(e, type);\n\t},\n\n\t_onTouchMove: function (e) {\n\t\tif (!this._map._loaded) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar type = 'touchmove';\n\t\tthis._touchEvent(e, type);\n\t},\n\n\t_detectIE: function () {\n\t\tvar ua = window.navigator.userAgent;\n\n\t\tvar msie = ua.indexOf('MSIE ');\n\t\tif (msie > 0) {\n\t\t\t// IE 10 or older => return version number\n\t\t\treturn parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n\t\t}\n\n\t\tvar trident = ua.indexOf('Trident/');\n\t\tif (trident > 0) {\n\t\t\t// IE 11 => return version number\n\t\t\tvar rv = ua.indexOf('rv:');\n\t\t\treturn parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n\t\t}\n\n\t\tvar edge = ua.indexOf('Edge/');\n\t\tif (edge > 0) {\n\t\t\t// IE 12 => return version number\n\t\t\treturn parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n\t\t}\n\n\t\t// other browser\n\t\treturn false;\n\t}\n});\n\nL.Map.addInitHook('addHandler', 'touchExtend', L.Map.TouchExtend);\n\n\n/**\n * @class L.Marker.Touch\n * @aka Marker.Touch\n *\n * This isn't full Touch support. This is just to get markers to also support dom touch events after creation\n * #TODO: find a better way of getting markers to support touch.\n */\nL.Marker.Touch = L.Marker.extend({\n\n\t_initInteraction: function () {\n\t\tif (!this.addInteractiveTarget) {\n\t\t\t// 0.7.x support\n\t\t\treturn this._initInteractionLegacy();\n\t\t}\n\t\t// TODO this may need be updated to re-add touch events for 1.0+\n\t\treturn L.Marker.prototype._initInteraction.apply(this);\n\t},\n\n\t// This is an exact copy of https://github.com/Leaflet/Leaflet/blob/v0.7/src/layer/marker/Marker.js\n\t// with the addition of the touch events\n\t_initInteractionLegacy: function () {\n\n\t\tif (!this.options.clickable) {\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO refactor into something shared with Map/Path/etc. to DRY it up\n\n\t\tvar icon = this._icon,\n\t\t\tevents = ['dblclick',\n\t\t\t\t'mousedown',\n\t\t\t\t'mouseover',\n\t\t\t\t'mouseout',\n\t\t\t\t'contextmenu',\n\t\t\t\t'touchstart',\n\t\t\t\t'touchend',\n\t\t\t\t'touchmove'];\n\t\tif (this._detectIE) {\n\t\t\tevents.concat(['MSPointerDown',\n\t\t\t\t'MSPointerUp',\n\t\t\t\t'MSPointerMove',\n\t\t\t\t'MSPointerCancel']);\n\t\t} else {\n\t\t\tevents.concat(['touchcancel']);\n\t\t}\n\n\t\tL.DomUtil.addClass(icon, 'leaflet-clickable');\n\t\tL.DomEvent.on(icon, 'click', this._onMouseClick, this);\n\t\tL.DomEvent.on(icon, 'keypress', this._onKeyPress, this);\n\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tL.DomEvent.on(icon, events[i], this._fireMouseEvent, this);\n\t\t}\n\n\t\tif (L.Handler.MarkerDrag) {\n\t\t\tthis.dragging = new L.Handler.MarkerDrag(this);\n\n\t\t\tif (this.options.draggable) {\n\t\t\t\tthis.dragging.enable();\n\t\t\t}\n\t\t}\n\t},\n\n\t_detectIE: function () {\n\t\tvar ua = window.navigator.userAgent;\n\n\t\tvar msie = ua.indexOf('MSIE ');\n\t\tif (msie > 0) {\n\t\t\t// IE 10 or older => return version number\n\t\t\treturn parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n\t\t}\n\n\t\tvar trident = ua.indexOf('Trident/');\n\t\tif (trident > 0) {\n\t\t\t// IE 11 => return version number\n\t\t\tvar rv = ua.indexOf('rv:');\n\t\t\treturn parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n\t\t}\n\n\t\tvar edge = ua.indexOf('Edge/');\n\t\tif (edge > 0) {\n\t\t\t// IE 12 => return version number\n\t\t\treturn parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n\t\t}\n\n\t\t// other browser\n\t\treturn false;\n\t}\n});\n\n\n\n/**\n * @class L.LatLngUtil\n * @aka LatLngUtil\n */\nL.LatLngUtil = {\n\t// Clones a LatLngs[], returns [][]\n\n\t// @method cloneLatLngs(LatLngs[]): L.LatLngs[]\n\t// Clone the latLng point or points or nested points and return an array with those points\n\tcloneLatLngs: function (latlngs) {\n\t\tvar clone = [];\n\t\tfor (var i = 0, l = latlngs.length; i < l; i++) {\n\t\t\t// Check for nested array (Polyline/Polygon)\n\t\t\tif (Array.isArray(latlngs[i])) {\n\t\t\t\tclone.push(L.LatLngUtil.cloneLatLngs(latlngs[i]));\n\t\t\t} else {\n\t\t\t\tclone.push(this.cloneLatLng(latlngs[i]));\n\t\t\t}\n\t\t}\n\t\treturn clone;\n\t},\n\n\t// @method cloneLatLng(LatLng): L.LatLng\n\t// Clone the latLng and return a new LatLng object.\n\tcloneLatLng: function (latlng) {\n\t\treturn L.latLng(latlng.lat, latlng.lng);\n\t}\n};\n\n\n\n(function () {\n\n\tvar defaultPrecision = {\n\t\tkm: 2,\n\t\tha: 2,\n\t\tm: 0,\n\t\tmi: 2,\n\t\tac: 2,\n\t\tyd: 0,\n\t\tft: 0,\n\t\tnm: 2\n\t};\n\n\n\t/**\n\t * @class L.GeometryUtil\n\t * @aka GeometryUtil\n\t */\n\tL.GeometryUtil = L.extend(L.GeometryUtil || {}, {\n\t\t// Ported from the OpenLayers implementation. See https://github.com/openlayers/openlayers/blob/master/lib/OpenLayers/Geometry/LinearRing.js#L270\n\n\t\t// @method geodesicArea(): number\n\t\tgeodesicArea: function (latLngs) {\n\t\t\tvar pointsCount = latLngs.length,\n\t\t\t\tarea = 0.0,\n\t\t\t\td2r = Math.PI / 180,\n\t\t\t\tp1, p2;\n\n\t\t\tif (pointsCount > 2) {\n\t\t\t\tfor (var i = 0; i < pointsCount; i++) {\n\t\t\t\t\tp1 = latLngs[i];\n\t\t\t\t\tp2 = latLngs[(i + 1) % pointsCount];\n\t\t\t\t\tarea += ((p2.lng - p1.lng) * d2r) *\n\t\t\t\t\t\t(2 + Math.sin(p1.lat * d2r) + Math.sin(p2.lat * d2r));\n\t\t\t\t}\n\t\t\t\tarea = area * 6378137.0 * 6378137.0 / 2.0;\n\t\t\t}\n\n\t\t\treturn Math.abs(area);\n\t\t},\n\n\t\t// @method formattedNumber(n, precision): string\n\t\t// Returns n in specified number format (if defined) and precision\n\t\tformattedNumber: function (n, precision) {\n\t\t\tvar formatted = parseFloat(n).toFixed(precision),\n\t\t\t\tformat = L.drawLocal.format && L.drawLocal.format.numeric,\n\t\t\t\tdelimiters = format && format.delimiters,\n\t\t\t\tthousands = delimiters && delimiters.thousands,\n\t\t\t\tdecimal = delimiters && delimiters.decimal;\n\n\t\t\tif (thousands || decimal) {\n\t\t\t\tvar splitValue = formatted.split('.');\n\t\t\t\tformatted = thousands ? splitValue[0].replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1' + thousands) : splitValue[0];\n\t\t\t\tdecimal = decimal || '.';\n\t\t\t\tif (splitValue.length > 1) {\n\t\t\t\t\tformatted = formatted + decimal + splitValue[1];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn formatted;\n\t\t},\n\n\t\t// @method readableArea(area, isMetric, precision): string\n\t\t// Returns a readable area string in yards or metric.\n\t\t// The value will be rounded as defined by the precision option object.\n\t\treadableArea: function (area, isMetric, precision) {\n\t\t\tvar areaStr,\n\t\t\t\tunits,\n\t\t\t\tprecision = L.Util.extend({}, defaultPrecision, precision);\n\n\t\t\tif (isMetric) {\n\t\t\t\tunits = ['ha', 'm'];\n\t\t\t\ttype = typeof isMetric;\n\t\t\t\tif (type === 'string') {\n\t\t\t\t\tunits = [isMetric];\n\t\t\t\t} else if (type !== 'boolean') {\n\t\t\t\t\tunits = isMetric;\n\t\t\t\t}\n\n\t\t\t\tif (area >= 1000000 && units.indexOf('km') !== -1) {\n\t\t\t\t\tareaStr = L.GeometryUtil.formattedNumber(area * 0.000001, precision['km']) + ' kmÂ²';\n\t\t\t\t} else if (area >= 10000 && units.indexOf('ha') !== -1) {\n\t\t\t\t\tareaStr = L.GeometryUtil.formattedNumber(area * 0.0001, precision['ha']) + ' ha';\n\t\t\t\t} else {\n\t\t\t\t\tareaStr = L.GeometryUtil.formattedNumber(area, precision['m']) + ' mÂ²';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tarea /= 0.836127; // Square yards in 1 meter\n\n\t\t\t\tif (area >= 3097600) { //3097600 square yards in 1 square mile\n\t\t\t\t\tareaStr = L.GeometryUtil.formattedNumber(area / 3097600, precision['mi']) + ' miÂ²';\n\t\t\t\t} else if (area >= 4840) { //4840 square yards in 1 acre\n\t\t\t\t\tareaStr = L.GeometryUtil.formattedNumber(area / 4840, precision['ac']) + ' acres';\n\t\t\t\t} else {\n\t\t\t\t\tareaStr = L.GeometryUtil.formattedNumber(area, precision['yd']) + ' ydÂ²';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn areaStr;\n\t\t},\n\n\t\t// @method readableDistance(distance, units): string\n\t\t// Converts a metric distance to one of [ feet, nauticalMile, metric or yards ] string\n\t\t//\n\t\t// @alternative\n\t\t// @method readableDistance(distance, isMetric, useFeet, isNauticalMile, precision): string\n\t\t// Converts metric distance to distance string.\n\t\t// The value will be rounded as defined by the precision option object.\n\t\treadableDistance: function (distance, isMetric, isFeet, isNauticalMile, precision) {\n\t\t\tvar distanceStr,\n\t\t\t\tunits,\n\t\t\t\tprecision = L.Util.extend({}, defaultPrecision, precision);\n\n\t\t\tif (isMetric) {\n\t\t\t\tunits = typeof isMetric == 'string' ? isMetric : 'metric';\n\t\t\t} else if (isFeet) {\n\t\t\t\tunits = 'feet';\n\t\t\t} else if (isNauticalMile) {\n\t\t\t\tunits = 'nauticalMile';\n\t\t\t} else {\n\t\t\t\tunits = 'yards';\n\t\t\t}\n\n\t\t\tswitch (units) {\n\t\t\t\tcase 'metric':\n\t\t\t\t\t// show metres when distance is < 1km, then show km\n\t\t\t\t\tif (distance > 1000) {\n\t\t\t\t\t\tdistanceStr = L.GeometryUtil.formattedNumber(distance / 1000, precision['km']) + ' km';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdistanceStr = L.GeometryUtil.formattedNumber(distance, precision['m']) + ' m';\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'feet':\n\t\t\t\t\tdistance *= 1.09361 * 3;\n\t\t\t\t\tdistanceStr = L.GeometryUtil.formattedNumber(distance, precision['ft']) + ' ft';\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'nauticalMile':\n\t\t\t\t\tdistance *= 0.53996;\n\t\t\t\t\tdistanceStr = L.GeometryUtil.formattedNumber(distance / 1000, precision['nm']) + ' nm';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'yards':\n\t\t\t\tdefault:\n\t\t\t\t\tdistance *= 1.09361;\n\n\t\t\t\t\tif (distance > 1760) {\n\t\t\t\t\t\tdistanceStr = L.GeometryUtil.formattedNumber(distance / 1760, precision['mi']) + ' miles';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdistanceStr = L.GeometryUtil.formattedNumber(distance, precision['yd']) + ' yd';\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn distanceStr;\n\t\t},\n\n\t\t// @method isVersion07x(): boolean\n\t\t// Returns true if the Leaflet version is 0.7.x, false otherwise.\n\t\tisVersion07x: function () {\n\t\t\tvar version = L.version.split('.');\n\t\t\t//If Version is == 0.7.*\n\t\t\treturn parseInt(version[0], 10) === 0 && parseInt(version[1], 10) === 7;\n\t\t},\n\t});\n\n})();\n\n\n\n/**\n * @class L.LineUtil\n * @aka Util\n * @aka L.Utils\n */\nL.Util.extend(L.LineUtil, {\n\n\t// @method segmentsIntersect(): boolean\n\t// Checks to see if two line segments intersect. Does not handle degenerate cases.\n\t// http://compgeom.cs.uiuc.edu/~jeffe/teaching/373/notes/x06-sweepline.pdf\n\tsegmentsIntersect: function (/*Point*/ p, /*Point*/ p1, /*Point*/ p2, /*Point*/ p3) {\n\t\treturn this._checkCounterclockwise(p, p2, p3) !==\n\t\t\tthis._checkCounterclockwise(p1, p2, p3) &&\n\t\t\tthis._checkCounterclockwise(p, p1, p2) !==\n\t\t\tthis._checkCounterclockwise(p, p1, p3);\n\t},\n\n\t// check to see if points are in counterclockwise order\n\t_checkCounterclockwise: function (/*Point*/ p, /*Point*/ p1, /*Point*/ p2) {\n\t\treturn (p2.y - p.y) * (p1.x - p.x) > (p1.y - p.y) * (p2.x - p.x);\n\t}\n});\n\n\n\n/**\n * @class L.Polyline\n * @aka Polyline\n */\nL.Polyline.include({\n\n\t// @method intersects(): boolean\n\t// Check to see if this polyline has any linesegments that intersect.\n\t// NOTE: does not support detecting intersection for degenerate cases.\n\tintersects: function () {\n\t\tvar points = this._getProjectedPoints(),\n\t\t\tlen = points ? points.length : 0,\n\t\t\ti, p, p1;\n\n\t\tif (this._tooFewPointsForIntersection()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (i = len - 1; i >= 3; i--) {\n\t\t\tp = points[i - 1];\n\t\t\tp1 = points[i];\n\n\n\t\t\tif (this._lineSegmentsIntersectsRange(p, p1, i - 2)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t// @method newLatLngIntersects(): boolean\n\t// Check for intersection if new latlng was added to this polyline.\n\t// NOTE: does not support detecting intersection for degenerate cases.\n\tnewLatLngIntersects: function (latlng, skipFirst) {\n\t\t// Cannot check a polyline for intersecting lats/lngs when not added to the map\n\t\tif (!this._map) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.newPointIntersects(this._map.latLngToLayerPoint(latlng), skipFirst);\n\t},\n\n\t// @method newPointIntersects(): boolean\n\t// Check for intersection if new point was added to this polyline.\n\t// newPoint must be a layer point.\n\t// NOTE: does not support detecting intersection for degenerate cases.\n\tnewPointIntersects: function (newPoint, skipFirst) {\n\t\tvar points = this._getProjectedPoints(),\n\t\t\tlen = points ? points.length : 0,\n\t\t\tlastPoint = points ? points[len - 1] : null,\n\t\t\t// The previous previous line segment. Previous line segment doesn't need testing.\n\t\t\tmaxIndex = len - 2;\n\n\t\tif (this._tooFewPointsForIntersection(1)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this._lineSegmentsIntersectsRange(lastPoint, newPoint, maxIndex, skipFirst ? 1 : 0);\n\t},\n\n\t// Polylines with 2 sides can only intersect in cases where points are collinear (we don't support detecting these).\n\t// Cannot have intersection when < 3 line segments (< 4 points)\n\t_tooFewPointsForIntersection: function (extraPoints) {\n\t\tvar points = this._getProjectedPoints(),\n\t\t\tlen = points ? points.length : 0;\n\t\t// Increment length by extraPoints if present\n\t\tlen += extraPoints || 0;\n\n\t\treturn !points || len <= 3;\n\t},\n\n\t// Checks a line segment intersections with any line segments before its predecessor.\n\t// Don't need to check the predecessor as will never intersect.\n\t_lineSegmentsIntersectsRange: function (p, p1, maxIndex, minIndex) {\n\t\tvar points = this._getProjectedPoints(),\n\t\t\tp2, p3;\n\n\t\tminIndex = minIndex || 0;\n\n\t\t// Check all previous line segments (beside the immediately previous) for intersections\n\t\tfor (var j = maxIndex; j > minIndex; j--) {\n\t\t\tp2 = points[j - 1];\n\t\t\tp3 = points[j];\n\n\t\t\tif (L.LineUtil.segmentsIntersect(p, p1, p2, p3)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t_getProjectedPoints: function () {\n\t\tif (!this._defaultShape) {\n\t\t\treturn this._originalPoints;\n\t\t}\n\t\tvar points = [],\n\t\t\t_shape = this._defaultShape();\n\n\t\tfor (var i = 0; i < _shape.length; i++) {\n\t\t\tpoints.push(this._map.latLngToLayerPoint(_shape[i]));\n\t\t}\n\t\treturn points;\n\t}\n});\n\n\n\n/**\n * @class L.Polygon\n * @aka Polygon\n */\nL.Polygon.include({\n\n\t// @method intersects(): boolean\n\t// Checks a polygon for any intersecting line segments. Ignores holes.\n\tintersects: function () {\n\t\tvar polylineIntersects,\n\t\t\tpoints = this._getProjectedPoints(),\n\t\t\tlen, firstPoint, lastPoint, maxIndex;\n\n\t\tif (this._tooFewPointsForIntersection()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tpolylineIntersects = L.Polyline.prototype.intersects.call(this);\n\n\t\t// If already found an intersection don't need to check for any more.\n\t\tif (polylineIntersects) {\n\t\t\treturn true;\n\t\t}\n\n\t\tlen = points.length;\n\t\tfirstPoint = points[0];\n\t\tlastPoint = points[len - 1];\n\t\tmaxIndex = len - 2;\n\n\t\t// Check the line segment between last and first point. Don't need to check the first line segment (minIndex = 1)\n\t\treturn this._lineSegmentsIntersectsRange(lastPoint, firstPoint, maxIndex, 1);\n\t}\n});\n\n\n\n/**\n * @class L.Control.Draw\n * @aka L.Draw\n */\nL.Control.Draw = L.Control.extend({\n\n\t// Options\n\toptions: {\n\t\tposition: 'topleft',\n\t\tdraw: {},\n\t\tedit: false\n\t},\n\n\t// @method initialize(): void\n\t// Initializes draw control, toolbars from the options\n\tinitialize: function (options) {\n\t\tif (L.version < '0.7') {\n\t\t\tthrow new Error('Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/');\n\t\t}\n\n\t\tL.Control.prototype.initialize.call(this, options);\n\n\t\tvar toolbar;\n\n\t\tthis._toolbars = {};\n\n\t\t// Initialize toolbars\n\t\tif (L.DrawToolbar && this.options.draw) {\n\t\t\ttoolbar = new L.DrawToolbar(this.options.draw);\n\n\t\t\tthis._toolbars[L.DrawToolbar.TYPE] = toolbar;\n\n\t\t\t// Listen for when toolbar is enabled\n\t\t\tthis._toolbars[L.DrawToolbar.TYPE].on('enable', this._toolbarEnabled, this);\n\t\t}\n\n\t\tif (L.EditToolbar && this.options.edit) {\n\t\t\ttoolbar = new L.EditToolbar(this.options.edit);\n\n\t\t\tthis._toolbars[L.EditToolbar.TYPE] = toolbar;\n\n\t\t\t// Listen for when toolbar is enabled\n\t\t\tthis._toolbars[L.EditToolbar.TYPE].on('enable', this._toolbarEnabled, this);\n\t\t}\n\t\tL.toolbar = this; //set global var for editing the toolbar\n\t},\n\n\t// @method onAdd(): container\n\t// Adds the toolbar container to the map\n\tonAdd: function (map) {\n\t\tvar container = L.DomUtil.create('div', 'leaflet-draw'),\n\t\t\taddedTopClass = false,\n\t\t\ttopClassName = 'leaflet-draw-toolbar-top',\n\t\t\ttoolbarContainer;\n\n\t\tfor (var toolbarId in this._toolbars) {\n\t\t\tif (this._toolbars.hasOwnProperty(toolbarId)) {\n\t\t\t\ttoolbarContainer = this._toolbars[toolbarId].addToolbar(map);\n\n\t\t\t\tif (toolbarContainer) {\n\t\t\t\t\t// Add class to the first toolbar to remove the margin\n\t\t\t\t\tif (!addedTopClass) {\n\t\t\t\t\t\tif (!L.DomUtil.hasClass(toolbarContainer, topClassName)) {\n\t\t\t\t\t\t\tL.DomUtil.addClass(toolbarContainer.childNodes[0], topClassName);\n\t\t\t\t\t\t}\n\t\t\t\t\t\taddedTopClass = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tcontainer.appendChild(toolbarContainer);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn container;\n\t},\n\n\t// @method onRemove(): void\n\t// Removes the toolbars from the map toolbar container\n\tonRemove: function () {\n\t\tfor (var toolbarId in this._toolbars) {\n\t\t\tif (this._toolbars.hasOwnProperty(toolbarId)) {\n\t\t\t\tthis._toolbars[toolbarId].removeToolbar();\n\t\t\t}\n\t\t}\n\t},\n\n\t// @method setDrawingOptions(options): void\n\t// Sets options to all toolbar instances\n\tsetDrawingOptions: function (options) {\n\t\tfor (var toolbarId in this._toolbars) {\n\t\t\tif (this._toolbars[toolbarId] instanceof L.DrawToolbar) {\n\t\t\t\tthis._toolbars[toolbarId].setOptions(options);\n\t\t\t}\n\t\t}\n\t},\n\n\t_toolbarEnabled: function (e) {\n\t\tvar enabledToolbar = e.target;\n\n\t\tfor (var toolbarId in this._toolbars) {\n\t\t\tif (this._toolbars[toolbarId] !== enabledToolbar) {\n\t\t\t\tthis._toolbars[toolbarId].disable();\n\t\t\t}\n\t\t}\n\t}\n});\n\nL.Map.mergeOptions({\n\tdrawControlTooltips: true,\n\tdrawControl: false\n});\n\nL.Map.addInitHook(function () {\n\tif (this.options.drawControl) {\n\t\tthis.drawControl = new L.Control.Draw();\n\t\tthis.addControl(this.drawControl);\n\t}\n});\n\n\n\n/**\n * @class L.Draw.Toolbar\n * @aka Toolbar\n *\n * The toolbar class of the API â€” it is used to create the ui\n * This will be depreciated\n *\n * @example\n *\n * ```js\n *    var toolbar = L.Toolbar();\n *    toolbar.addToolbar(map);\n * ```\n *\n * ### Disabling a toolbar\n *\n * If you do not want a particular toolbar in your app you can turn it off by setting the toolbar to false.\n *\n * ```js\n *      var drawControl = new L.Control.Draw({\n *          draw: false,\n *          edit: {\n *              featureGroup: editableLayers\n *          }\n *      });\n * ```\n *\n * ### Disabling a toolbar item\n *\n * If you want to turn off a particular toolbar item, set it to false. The following disables drawing polygons and\n * markers. It also turns off the ability to edit layers.\n *\n * ```js\n *      var drawControl = new L.Control.Draw({\n *          draw: {\n *              polygon: false,\n *              marker: false\n *          },\n *          edit: {\n *              featureGroup: editableLayers,\n *              edit: false\n *          }\n *      });\n * ```\n */\nL.Toolbar = L.Class.extend({\n\t// @section Methods for modifying the toolbar\n\n\t// @method initialize(options): void\n\t// Toolbar constructor\n\tinitialize: function (options) {\n\t\tL.setOptions(this, options);\n\n\t\tthis._modes = {};\n\t\tthis._actionButtons = [];\n\t\tthis._activeMode = null;\n\n\t\tvar version = L.version.split('.');\n\t\t//If Version is >= 1.2.0\n\t\tif (parseInt(version[0], 10) === 1 && parseInt(version[1], 10) >= 2) {\n\t\t\tL.Toolbar.include(L.Evented.prototype);\n\t\t} else {\n\t\t\tL.Toolbar.include(L.Mixin.Events);\n\t\t}\n\t},\n\n\t// @method enabled(): boolean\n\t// Gets a true/false of whether the toolbar is enabled\n\tenabled: function () {\n\t\treturn this._activeMode !== null;\n\t},\n\n\t// @method disable(): void\n\t// Disables the toolbar\n\tdisable: function () {\n\t\tif (!this.enabled()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._activeMode.handler.disable();\n\t},\n\n\t// @method addToolbar(map): L.DomUtil\n\t// Adds the toolbar to the map and returns the toolbar dom element\n\taddToolbar: function (map) {\n\t\tvar container = L.DomUtil.create('div', 'leaflet-draw-section'),\n\t\t\tbuttonIndex = 0,\n\t\t\tbuttonClassPrefix = this._toolbarClass || '',\n\t\t\tmodeHandlers = this.getModeHandlers(map),\n\t\t\ti;\n\n\t\tthis._toolbarContainer = L.DomUtil.create('div', 'leaflet-draw-toolbar leaflet-bar');\n\t\tthis._map = map;\n\n\t\tfor (i = 0; i < modeHandlers.length; i++) {\n\t\t\tif (modeHandlers[i].enabled) {\n\t\t\t\tthis._initModeHandler(\n\t\t\t\t\tmodeHandlers[i].handler,\n\t\t\t\t\tthis._toolbarContainer,\n\t\t\t\t\tbuttonIndex++,\n\t\t\t\t\tbuttonClassPrefix,\n\t\t\t\t\tmodeHandlers[i].title\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// if no buttons were added, do not add the toolbar\n\t\tif (!buttonIndex) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Save button index of the last button, -1 as we would have ++ after the last button\n\t\tthis._lastButtonIndex = --buttonIndex;\n\n\t\t// Create empty actions part of the toolbar\n\t\tthis._actionsContainer = L.DomUtil.create('ul', 'leaflet-draw-actions');\n\n\t\t// Add draw and cancel containers to the control container\n\t\tcontainer.appendChild(this._toolbarContainer);\n\t\tcontainer.appendChild(this._actionsContainer);\n\n\t\treturn container;\n\t},\n\n\t// @method removeToolbar(): void\n\t// Removes the toolbar and drops the handler event listeners\n\tremoveToolbar: function () {\n\t\t// Dispose each handler\n\t\tfor (var handlerId in this._modes) {\n\t\t\tif (this._modes.hasOwnProperty(handlerId)) {\n\t\t\t\t// Unbind handler button\n\t\t\t\tthis._disposeButton(\n\t\t\t\t\tthis._modes[handlerId].button,\n\t\t\t\t\tthis._modes[handlerId].handler.enable,\n\t\t\t\t\tthis._modes[handlerId].handler\n\t\t\t\t);\n\n\t\t\t\t// Make sure is disabled\n\t\t\t\tthis._modes[handlerId].handler.disable();\n\n\t\t\t\t// Unbind handler\n\t\t\t\tthis._modes[handlerId].handler\n\t\t\t\t\t.off('enabled', this._handlerActivated, this)\n\t\t\t\t\t.off('disabled', this._handlerDeactivated, this);\n\t\t\t}\n\t\t}\n\t\tthis._modes = {};\n\n\t\t// Dispose the actions toolbar\n\t\tfor (var i = 0, l = this._actionButtons.length; i < l; i++) {\n\t\t\tthis._disposeButton(\n\t\t\t\tthis._actionButtons[i].button,\n\t\t\t\tthis._actionButtons[i].callback,\n\t\t\t\tthis\n\t\t\t);\n\t\t}\n\t\tthis._actionButtons = [];\n\t\tthis._actionsContainer = null;\n\t},\n\n\t_initModeHandler: function (handler, container, buttonIndex, classNamePredix, buttonTitle) {\n\t\tvar type = handler.type;\n\n\t\tthis._modes[type] = {};\n\n\t\tthis._modes[type].handler = handler;\n\n\t\tthis._modes[type].button = this._createButton({\n\t\t\ttype: type,\n\t\t\ttitle: buttonTitle,\n\t\t\tclassName: classNamePredix + '-' + type,\n\t\t\tcontainer: container,\n\t\t\tcallback: this._modes[type].handler.enable,\n\t\t\tcontext: this._modes[type].handler\n\t\t});\n\n\t\tthis._modes[type].buttonIndex = buttonIndex;\n\n\t\tthis._modes[type].handler\n\t\t\t.on('enabled', this._handlerActivated, this)\n\t\t\t.on('disabled', this._handlerDeactivated, this);\n\t},\n\n\t/* Detect iOS based on browser User Agent, based on:\n\t * http://stackoverflow.com/a/9039885 */\n\t_detectIOS: function () {\n\t\tvar iOS = (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream);\n\t\treturn iOS;\n\t},\n\n\t_createButton: function (options) {\n\n\t\tvar link = L.DomUtil.create('a', options.className || '', options.container);\n\t\t// Screen reader tag\n\t\tvar sr = L.DomUtil.create('span', 'sr-only', options.container);\n\n\t\tlink.href = '#';\n\t\tlink.appendChild(sr);\n\n\t\tif (options.title) {\n\t\t\tlink.title = options.title;\n\t\t\tsr.innerHTML = options.title;\n\t\t}\n\n\t\tif (options.text) {\n\t\t\tlink.innerHTML = options.text;\n\t\t\tsr.innerHTML = options.text;\n\t\t}\n\n\t\t/* iOS does not use click events */\n\t\tvar buttonEvent = this._detectIOS() ? 'touchstart' : 'click';\n\n\t\tL.DomEvent\n\t\t\t.on(link, 'click', L.DomEvent.stopPropagation)\n\t\t\t.on(link, 'mousedown', L.DomEvent.stopPropagation)\n\t\t\t.on(link, 'dblclick', L.DomEvent.stopPropagation)\n\t\t\t.on(link, 'touchstart', L.DomEvent.stopPropagation)\n\t\t\t.on(link, 'click', L.DomEvent.preventDefault)\n\t\t\t.on(link, buttonEvent, options.callback, options.context);\n\n\t\treturn link;\n\t},\n\n\t_disposeButton: function (button, callback) {\n\t\t/* iOS does not use click events */\n\t\tvar buttonEvent = this._detectIOS() ? 'touchstart' : 'click';\n\n\t\tL.DomEvent\n\t\t\t.off(button, 'click', L.DomEvent.stopPropagation)\n\t\t\t.off(button, 'mousedown', L.DomEvent.stopPropagation)\n\t\t\t.off(button, 'dblclick', L.DomEvent.stopPropagation)\n\t\t\t.off(button, 'touchstart', L.DomEvent.stopPropagation)\n\t\t\t.off(button, 'click', L.DomEvent.preventDefault)\n\t\t\t.off(button, buttonEvent, callback);\n\t},\n\n\t_handlerActivated: function (e) {\n\t\t// Disable active mode (if present)\n\t\tthis.disable();\n\n\t\t// Cache new active feature\n\t\tthis._activeMode = this._modes[e.handler];\n\n\t\tL.DomUtil.addClass(this._activeMode.button, 'leaflet-draw-toolbar-button-enabled');\n\n\t\tthis._showActionsToolbar();\n\n\t\tthis.fire('enable');\n\t},\n\n\t_handlerDeactivated: function () {\n\t\tthis._hideActionsToolbar();\n\n\t\tL.DomUtil.removeClass(this._activeMode.button, 'leaflet-draw-toolbar-button-enabled');\n\n\t\tthis._activeMode = null;\n\n\t\tthis.fire('disable');\n\t},\n\n\t_createActions: function (handler) {\n\t\tvar container = this._actionsContainer,\n\t\t\tbuttons = this.getActions(handler),\n\t\t\tl = buttons.length,\n\t\t\tli, di, dl, button;\n\n\t\t// Dispose the actions toolbar (todo: dispose only not used buttons)\n\t\tfor (di = 0, dl = this._actionButtons.length; di < dl; di++) {\n\t\t\tthis._disposeButton(this._actionButtons[di].button, this._actionButtons[di].callback);\n\t\t}\n\t\tthis._actionButtons = [];\n\n\t\t// Remove all old buttons\n\t\twhile (container.firstChild) {\n\t\t\tcontainer.removeChild(container.firstChild);\n\t\t}\n\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tif ('enabled' in buttons[i] && !buttons[i].enabled) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tli = L.DomUtil.create('li', '', container);\n\n\t\t\tbutton = this._createButton({\n\t\t\t\ttitle: buttons[i].title,\n\t\t\t\ttext: buttons[i].text,\n\t\t\t\tcontainer: li,\n\t\t\t\tcallback: buttons[i].callback,\n\t\t\t\tcontext: buttons[i].context\n\t\t\t});\n\n\t\t\tthis._actionButtons.push({\n\t\t\t\tbutton: button,\n\t\t\t\tcallback: buttons[i].callback\n\t\t\t});\n\t\t}\n\t},\n\n\t_showActionsToolbar: function () {\n\t\tvar buttonIndex = this._activeMode.buttonIndex,\n\t\t\tlastButtonIndex = this._lastButtonIndex,\n\t\t\ttoolbarPosition = this._activeMode.button.offsetTop - 1;\n\n\t\t// Recreate action buttons on every click\n\t\tthis._createActions(this._activeMode.handler);\n\n\t\t// Correctly position the cancel button\n\t\tthis._actionsContainer.style.top = toolbarPosition + 'px';\n\n\t\tif (buttonIndex === 0) {\n\t\t\tL.DomUtil.addClass(this._toolbarContainer, 'leaflet-draw-toolbar-notop');\n\t\t\tL.DomUtil.addClass(this._actionsContainer, 'leaflet-draw-actions-top');\n\t\t}\n\n\t\tif (buttonIndex === lastButtonIndex) {\n\t\t\tL.DomUtil.addClass(this._toolbarContainer, 'leaflet-draw-toolbar-nobottom');\n\t\t\tL.DomUtil.addClass(this._actionsContainer, 'leaflet-draw-actions-bottom');\n\t\t}\n\n\t\tthis._actionsContainer.style.display = 'block';\n\t\tthis._map.fire(L.Draw.Event.TOOLBAROPENED);\n\t},\n\n\t_hideActionsToolbar: function () {\n\t\tthis._actionsContainer.style.display = 'none';\n\n\t\tL.DomUtil.removeClass(this._toolbarContainer, 'leaflet-draw-toolbar-notop');\n\t\tL.DomUtil.removeClass(this._toolbarContainer, 'leaflet-draw-toolbar-nobottom');\n\t\tL.DomUtil.removeClass(this._actionsContainer, 'leaflet-draw-actions-top');\n\t\tL.DomUtil.removeClass(this._actionsContainer, 'leaflet-draw-actions-bottom');\n\t\tthis._map.fire(L.Draw.Event.TOOLBARCLOSED);\n\t}\n});\n\n\n\nL.Draw = L.Draw || {};\n/**\n * @class L.Draw.Tooltip\n * @aka Tooltip\n *\n * The tooltip class â€” it is used to display the tooltip while drawing\n * This will be depreciated\n *\n * @example\n *\n * ```js\n *    var tooltip = L.Draw.Tooltip();\n * ```\n *\n */\nL.Draw.Tooltip = L.Class.extend({\n\n\t// @section Methods for modifying draw state\n\n\t// @method initialize(map): void\n\t// Tooltip constructor\n\tinitialize: function (map) {\n\t\tthis._map = map;\n\t\tthis._popupPane = map._panes.popupPane;\n\t\tthis._visible = false;\n\n\t\tthis._container = map.options.drawControlTooltips ?\n\t\t\tL.DomUtil.create('div', 'leaflet-draw-tooltip', this._popupPane) : null;\n\t\tthis._singleLineLabel = false;\n\n\t\tthis._map.on('mouseout', this._onMouseOut, this);\n\t},\n\n\t// @method dispose(): void\n\t// Remove Tooltip DOM and unbind events\n\tdispose: function () {\n\t\tthis._map.off('mouseout', this._onMouseOut, this);\n\n\t\tif (this._container) {\n\t\t\tthis._popupPane.removeChild(this._container);\n\t\t\tthis._container = null;\n\t\t}\n\t},\n\n\t// @method updateContent(labelText): this\n\t// Changes the tooltip text to string in function call\n\tupdateContent: function (labelText) {\n\t\tif (!this._container) {\n\t\t\treturn this;\n\t\t}\n\t\tlabelText.subtext = labelText.subtext || '';\n\n\t\t// update the vertical position (only if changed)\n\t\tif (labelText.subtext.length === 0 && !this._singleLineLabel) {\n\t\t\tL.DomUtil.addClass(this._container, 'leaflet-draw-tooltip-single');\n\t\t\tthis._singleLineLabel = true;\n\t\t}\n\t\telse if (labelText.subtext.length > 0 && this._singleLineLabel) {\n\t\t\tL.DomUtil.removeClass(this._container, 'leaflet-draw-tooltip-single');\n\t\t\tthis._singleLineLabel = false;\n\t\t}\n\n\t\tthis._container.innerHTML =\n\t\t\t(labelText.subtext.length > 0 ?\n\t\t\t\t'<span class=\"leaflet-draw-tooltip-subtext\">' + labelText.subtext + '</span>' + '<br />' : '') +\n\t\t\t'<span>' + labelText.text + '</span>';\n\n\t\tif (!labelText.text && !labelText.subtext) {\n\t\t\tthis._visible = false;\n\t\t\tthis._container.style.visibility = 'hidden';\n\t\t} else {\n\t\t\tthis._visible = true;\n\t\t\tthis._container.style.visibility = 'inherit';\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// @method updatePosition(latlng): this\n\t// Changes the location of the tooltip\n\tupdatePosition: function (latlng) {\n\t\tvar pos = this._map.latLngToLayerPoint(latlng),\n\t\t\ttooltipContainer = this._container;\n\n\t\tif (this._container) {\n\t\t\tif (this._visible) {\n\t\t\t\ttooltipContainer.style.visibility = 'inherit';\n\t\t\t}\n\t\t\tL.DomUtil.setPosition(tooltipContainer, pos);\n\t\t}\n\n\t\treturn this;\n\t},\n\n\t// @method showAsError(): this\n\t// Applies error class to tooltip\n\tshowAsError: function () {\n\t\tif (this._container) {\n\t\t\tL.DomUtil.addClass(this._container, 'leaflet-error-draw-tooltip');\n\t\t}\n\t\treturn this;\n\t},\n\n\t// @method removeError(): this\n\t// Removes the error class from the tooltip\n\tremoveError: function () {\n\t\tif (this._container) {\n\t\t\tL.DomUtil.removeClass(this._container, 'leaflet-error-draw-tooltip');\n\t\t}\n\t\treturn this;\n\t},\n\n\t_onMouseOut: function () {\n\t\tif (this._container) {\n\t\t\tthis._container.style.visibility = 'hidden';\n\t\t}\n\t}\n});\n\n\n\n/**\n * @class L.DrawToolbar\n * @aka Toolbar\n */\nL.DrawToolbar = L.Toolbar.extend({\n\n\tstatics: {\n\t\tTYPE: 'draw'\n\t},\n\n\toptions: {\n\t\tpolyline: {},\n\t\tpolygon: {},\n\t\trectangle: {},\n\t\tcircle: {},\n\t\tmarker: {},\n\t\tcirclemarker: {}\n\t},\n\n\t// @method initialize(): void\n\tinitialize: function (options) {\n\t\t// Ensure that the options are merged correctly since L.extend is only shallow\n\t\tfor (var type in this.options) {\n\t\t\tif (this.options.hasOwnProperty(type)) {\n\t\t\t\tif (options[type]) {\n\t\t\t\t\toptions[type] = L.extend({}, this.options[type], options[type]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._toolbarClass = 'leaflet-draw-draw';\n\t\tL.Toolbar.prototype.initialize.call(this, options);\n\t},\n\n\t// @method getModeHandlers(): object\n\t// Get mode handlers information\n\tgetModeHandlers: function (map) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tenabled: this.options.polyline,\n\t\t\t\thandler: new L.Draw.Polyline(map, this.options.polyline),\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.buttons.polyline\n\t\t\t},\n\t\t\t{\n\t\t\t\tenabled: this.options.polygon,\n\t\t\t\thandler: new L.Draw.Polygon(map, this.options.polygon),\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.buttons.polygon\n\t\t\t},\n\t\t\t{\n\t\t\t\tenabled: this.options.rectangle,\n\t\t\t\thandler: new L.Draw.Rectangle(map, this.options.rectangle),\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.buttons.rectangle\n\t\t\t},\n\t\t\t{\n\t\t\t\tenabled: this.options.circle,\n\t\t\t\thandler: new L.Draw.Circle(map, this.options.circle),\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.buttons.circle\n\t\t\t},\n\t\t\t{\n\t\t\t\tenabled: this.options.marker,\n\t\t\t\thandler: new L.Draw.Marker(map, this.options.marker),\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.buttons.marker\n\t\t\t},\n\t\t\t{\n\t\t\t\tenabled: this.options.circlemarker,\n\t\t\t\thandler: new L.Draw.CircleMarker(map, this.options.circlemarker),\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.buttons.circlemarker\n\t\t\t}\n\t\t];\n\t},\n\n\t// @method getActions(): object\n\t// Get action information\n\tgetActions: function (handler) {\n\t\treturn [\n\t\t\t{\n\t\t\t\tenabled: handler.completeShape,\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.finish.title,\n\t\t\t\ttext: L.drawLocal.draw.toolbar.finish.text,\n\t\t\t\tcallback: handler.completeShape,\n\t\t\t\tcontext: handler\n\t\t\t},\n\t\t\t{\n\t\t\t\tenabled: handler.deleteLastVertex,\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.undo.title,\n\t\t\t\ttext: L.drawLocal.draw.toolbar.undo.text,\n\t\t\t\tcallback: handler.deleteLastVertex,\n\t\t\t\tcontext: handler\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: L.drawLocal.draw.toolbar.actions.title,\n\t\t\t\ttext: L.drawLocal.draw.toolbar.actions.text,\n\t\t\t\tcallback: this.disable,\n\t\t\t\tcontext: this\n\t\t\t}\n\t\t];\n\t},\n\n\t// @method setOptions(): void\n\t// Sets the options to the toolbar\n\tsetOptions: function (options) {\n\t\tL.setOptions(this, options);\n\n\t\tfor (var type in this._modes) {\n\t\t\tif (this._modes.hasOwnProperty(type) && options.hasOwnProperty(type)) {\n\t\t\t\tthis._modes[type].handler.setOptions(options[type]);\n\t\t\t}\n\t\t}\n\t}\n});\n\n\n\n/*L.Map.mergeOptions({\n editControl: true\n });*/\n/**\n * @class L.EditToolbar\n * @aka EditToolbar\n */\nL.EditToolbar = L.Toolbar.extend({\n\tstatics: {\n\t\tTYPE: 'edit'\n\t},\n\n\toptions: {\n\t\tedit: {\n\t\t\tselectedPathOptions: {\n\t\t\t\tdashArray: '10, 10',\n\n\t\t\t\tfill: true,\n\t\t\t\tfillColor: '#fe57a1',\n\t\t\t\tfillOpacity: 0.1,\n\n\t\t\t\t// Whether to user the existing layers color\n\t\t\t\tmaintainColor: false\n\t\t\t}\n\t\t},\n\t\tremove: {},\n\t\tpoly: null,\n\t\tfeatureGroup: null /* REQUIRED! TODO: perhaps if not set then all layers on the map are selectable? */\n\t},\n\n\t// @method intialize(): void\n\tinitialize: function (options) {\n\t\t// Need to set this manually since null is an acceptable value here\n\t\tif (options.edit) {\n\t\t\tif (typeof options.edit.selectedPathOptions === 'undefined') {\n\t\t\t\toptions.edit.selectedPathOptions = this.options.edit.selectedPathOptions;\n\t\t\t}\n\t\t\toptions.edit.selectedPathOptions = L.extend({}, this.options.edit.selectedPathOptions, options.edit.selectedPathOptions);\n\t\t}\n\n\t\tif (options.remove) {\n\t\t\toptions.remove = L.extend({}, this.options.remove, options.remove);\n\t\t}\n\n\t\tif (options.poly) {\n\t\t\toptions.poly = L.extend({}, this.options.poly, options.poly);\n\t\t}\n\n\t\tthis._toolbarClass = 'leaflet-draw-edit';\n\t\tL.Toolbar.prototype.initialize.call(this, options);\n\n\t\tthis._selectedFeatureCount = 0;\n\t},\n\n\t// @method getModeHandlers(): object\n\t// Get mode handlers information\n\tgetModeHandlers: function (map) {\n\t\tvar featureGroup = this.options.featureGroup;\n\t\treturn [\n\t\t\t{\n\t\t\t\tenabled: this.options.edit,\n\t\t\t\thandler: new L.EditToolbar.Edit(map, {\n\t\t\t\t\tfeatureGroup: featureGroup,\n\t\t\t\t\tselectedPathOptions: this.options.edit.selectedPathOptions,\n\t\t\t\t\tpoly: this.options.poly\n\t\t\t\t}),\n\t\t\t\ttitle: L.drawLocal.edit.toolbar.buttons.edit\n\t\t\t},\n\t\t\t{\n\t\t\t\tenabled: this.options.remove,\n\t\t\t\thandler: new L.EditToolbar.Delete(map, {\n\t\t\t\t\tfeatureGroup: featureGroup\n\t\t\t\t}),\n\t\t\t\ttitle: L.drawLocal.edit.toolbar.buttons.remove\n\t\t\t}\n\t\t];\n\t},\n\n\t// @method getActions(): object\n\t// Get actions information\n\tgetActions: function (handler) {\n\t\tvar actions = [\n\t\t\t{\n\t\t\t\ttitle: L.drawLocal.edit.toolbar.actions.save.title,\n\t\t\t\ttext: L.drawLocal.edit.toolbar.actions.save.text,\n\t\t\t\tcallback: this._save,\n\t\t\t\tcontext: this\n\t\t\t},\n\t\t\t{\n\t\t\t\ttitle: L.drawLocal.edit.toolbar.actions.cancel.title,\n\t\t\t\ttext: L.drawLocal.edit.toolbar.actions.cancel.text,\n\t\t\t\tcallback: this.disable,\n\t\t\t\tcontext: this\n\t\t\t}\n\t\t];\n\n\t\tif (handler.removeAllLayers) {\n\t\t\tactions.push({\n\t\t\t\ttitle: L.drawLocal.edit.toolbar.actions.clearAll.title,\n\t\t\t\ttext: L.drawLocal.edit.toolbar.actions.clearAll.text,\n\t\t\t\tcallback: this._clearAllLayers,\n\t\t\t\tcontext: this\n\t\t\t});\n\t\t}\n\n\t\treturn actions;\n\t},\n\n\t// @method addToolbar(map): L.DomUtil\n\t// Adds the toolbar to the map\n\taddToolbar: function (map) {\n\t\tvar container = L.Toolbar.prototype.addToolbar.call(this, map);\n\n\t\tthis._checkDisabled();\n\n\t\tthis.options.featureGroup.on('layeradd layerremove', this._checkDisabled, this);\n\n\t\treturn container;\n\t},\n\n\t// @method removeToolbar(): void\n\t// Removes the toolbar from the map\n\tremoveToolbar: function () {\n\t\tthis.options.featureGroup.off('layeradd layerremove', this._checkDisabled, this);\n\n\t\tL.Toolbar.prototype.removeToolbar.call(this);\n\t},\n\n\t// @method disable(): void\n\t// Disables the toolbar\n\tdisable: function () {\n\t\tif (!this.enabled()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._activeMode.handler.revertLayers();\n\n\t\tL.Toolbar.prototype.disable.call(this);\n\t},\n\n\t_save: function () {\n\t\tthis._activeMode.handler.save();\n\t\tif (this._activeMode) {\n\t\t\tthis._activeMode.handler.disable();\n\t\t}\n\t},\n\n\t_clearAllLayers: function () {\n\t\tthis._activeMode.handler.removeAllLayers();\n\t\tif (this._activeMode) {\n\t\t\tthis._activeMode.handler.disable();\n\t\t}\n\t},\n\n\t_checkDisabled: function () {\n\t\tvar featureGroup = this.options.featureGroup,\n\t\t\thasLayers = featureGroup.getLayers().length !== 0,\n\t\t\tbutton;\n\n\t\tif (this.options.edit) {\n\t\t\tbutton = this._modes[L.EditToolbar.Edit.TYPE].button;\n\n\t\t\tif (hasLayers) {\n\t\t\t\tL.DomUtil.removeClass(button, 'leaflet-disabled');\n\t\t\t} else {\n\t\t\t\tL.DomUtil.addClass(button, 'leaflet-disabled');\n\t\t\t}\n\n\t\t\tbutton.setAttribute(\n\t\t\t\t'title',\n\t\t\t\thasLayers ?\n\t\t\t\t\tL.drawLocal.edit.toolbar.buttons.edit\n\t\t\t\t\t: L.drawLocal.edit.toolbar.buttons.editDisabled\n\t\t\t);\n\t\t}\n\n\t\tif (this.options.remove) {\n\t\t\tbutton = this._modes[L.EditToolbar.Delete.TYPE].button;\n\n\t\t\tif (hasLayers) {\n\t\t\t\tL.DomUtil.removeClass(button, 'leaflet-disabled');\n\t\t\t} else {\n\t\t\t\tL.DomUtil.addClass(button, 'leaflet-disabled');\n\t\t\t}\n\n\t\t\tbutton.setAttribute(\n\t\t\t\t'title',\n\t\t\t\thasLayers ?\n\t\t\t\t\tL.drawLocal.edit.toolbar.buttons.remove\n\t\t\t\t\t: L.drawLocal.edit.toolbar.buttons.removeDisabled\n\t\t\t);\n\t\t}\n\t}\n});\n\n\n\n/**\n * @class L.EditToolbar.Edit\n * @aka EditToolbar.Edit\n */\nL.EditToolbar.Edit = L.Handler.extend({\n\tstatics: {\n\t\tTYPE: 'edit'\n\t},\n\n\t// @method intialize(): void\n\tinitialize: function (map, options) {\n\t\tL.Handler.prototype.initialize.call(this, map);\n\n\t\tL.setOptions(this, options);\n\n\t\t// Store the selectable layer group for ease of access\n\t\tthis._featureGroup = options.featureGroup;\n\n\t\tif (!(this._featureGroup instanceof L.FeatureGroup)) {\n\t\t\tthrow new Error('options.featureGroup must be a L.FeatureGroup');\n\t\t}\n\n\t\tthis._uneditedLayerProps = {};\n\n\t\t// Save the type so super can fire, need to do this as cannot do this.TYPE :(\n\t\tthis.type = L.EditToolbar.Edit.TYPE;\n\n\t\tvar version = L.version.split('.');\n\t\t//If Version is >= 1.2.0\n\t\tif (parseInt(version[0], 10) === 1 && parseInt(version[1], 10) >= 2) {\n\t\t\tL.EditToolbar.Edit.include(L.Evented.prototype);\n\t\t} else {\n\t\t\tL.EditToolbar.Edit.include(L.Mixin.Events);\n\t\t}\n\t},\n\n\t// @method enable(): void\n\t// Enable the edit toolbar\n\tenable: function () {\n\t\tif (this._enabled || !this._hasAvailableLayers()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.fire('enabled', {handler: this.type});\n\t\t//this disable other handlers\n\n\t\tthis._map.fire(L.Draw.Event.EDITSTART, {handler: this.type});\n\t\t//allow drawLayer to be updated before beginning edition.\n\n\t\tL.Handler.prototype.enable.call(this);\n\t\tthis._featureGroup\n\t\t\t.on('layeradd', this._enableLayerEdit, this)\n\t\t\t.on('layerremove', this._disableLayerEdit, this);\n\t},\n\n\t// @method disable(): void\n\t// Disable the edit toolbar\n\tdisable: function () {\n\t\tif (!this._enabled) {\n\t\t\treturn;\n\t\t}\n\t\tthis._featureGroup\n\t\t\t.off('layeradd', this._enableLayerEdit, this)\n\t\t\t.off('layerremove', this._disableLayerEdit, this);\n\t\tL.Handler.prototype.disable.call(this);\n\t\tthis._map.fire(L.Draw.Event.EDITSTOP, {handler: this.type});\n\t\tthis.fire('disabled', {handler: this.type});\n\t},\n\n\t// @method addHooks(): void\n\t// Add listener hooks for this handler\n\taddHooks: function () {\n\t\tvar map = this._map;\n\n\t\tif (map) {\n\t\t\tmap.getContainer().focus();\n\n\t\t\tthis._featureGroup.eachLayer(this._enableLayerEdit, this);\n\n\t\t\tthis._tooltip = new L.Draw.Tooltip(this._map);\n\t\t\tthis._tooltip.updateContent({\n\t\t\t\ttext: L.drawLocal.edit.handlers.edit.tooltip.text,\n\t\t\t\tsubtext: L.drawLocal.edit.handlers.edit.tooltip.subtext\n\t\t\t});\n\n\t\t\t// Quickly access the tooltip to update for intersection checking\n\t\t\tmap._editTooltip = this._tooltip;\n\n\t\t\tthis._updateTooltip();\n\n\t\t\tthis._map\n\t\t\t\t.on('mousemove', this._onMouseMove, this)\n\t\t\t\t.on('touchmove', this._onMouseMove, this)\n\t\t\t\t.on('MSPointerMove', this._onMouseMove, this)\n\t\t\t\t.on(L.Draw.Event.EDITVERTEX, this._updateTooltip, this);\n\t\t}\n\t},\n\n\t// @method removeHooks(): void\n\t// Remove listener hooks for this handler\n\tremoveHooks: function () {\n\t\tif (this._map) {\n\t\t\t// Clean up selected layers.\n\t\t\tthis._featureGroup.eachLayer(this._disableLayerEdit, this);\n\n\t\t\t// Clear the backups of the original layers\n\t\t\tthis._uneditedLayerProps = {};\n\n\t\t\tthis._tooltip.dispose();\n\t\t\tthis._tooltip = null;\n\n\t\t\tthis._map\n\t\t\t\t.off('mousemove', this._onMouseMove, this)\n\t\t\t\t.off('touchmove', this._onMouseMove, this)\n\t\t\t\t.off('MSPointerMove', this._onMouseMove, this)\n\t\t\t\t.off(L.Draw.Event.EDITVERTEX, this._updateTooltip, this);\n\t\t}\n\t},\n\n\t// @method revertLayers(): void\n\t// Revert each layer's geometry changes\n\trevertLayers: function () {\n\t\tthis._featureGroup.eachLayer(function (layer) {\n\t\t\tthis._revertLayer(layer);\n\t\t}, this);\n\t},\n\n\t// @method save(): void\n\t// Save the layer geometries\n\tsave: function () {\n\t\tvar editedLayers = new L.LayerGroup();\n\t\tthis._featureGroup.eachLayer(function (layer) {\n\t\t\tif (layer.edited) {\n\t\t\t\teditedLayers.addLayer(layer);\n\t\t\t\tlayer.edited = false;\n\t\t\t}\n\t\t});\n\t\tthis._map.fire(L.Draw.Event.EDITED, {layers: editedLayers});\n\t},\n\n\t_backupLayer: function (layer) {\n\t\tvar id = L.Util.stamp(layer);\n\n\t\tif (!this._uneditedLayerProps[id]) {\n\t\t\t// Polyline, Polygon or Rectangle\n\t\t\tif (layer instanceof L.Polyline || layer instanceof L.Polygon || layer instanceof L.Rectangle) {\n\t\t\t\tthis._uneditedLayerProps[id] = {\n\t\t\t\t\tlatlngs: L.LatLngUtil.cloneLatLngs(layer.getLatLngs())\n\t\t\t\t};\n\t\t\t} else if (layer instanceof L.Circle) {\n\t\t\t\tthis._uneditedLayerProps[id] = {\n\t\t\t\t\tlatlng: L.LatLngUtil.cloneLatLng(layer.getLatLng()),\n\t\t\t\t\tradius: layer.getRadius()\n\t\t\t\t};\n\t\t\t} else if (layer instanceof L.Marker || layer instanceof L.CircleMarker) { // Marker\n\t\t\t\tthis._uneditedLayerProps[id] = {\n\t\t\t\t\tlatlng: L.LatLngUtil.cloneLatLng(layer.getLatLng())\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t},\n\n\t_getTooltipText: function () {\n\t\treturn ({\n\t\t\ttext: L.drawLocal.edit.handlers.edit.tooltip.text,\n\t\t\tsubtext: L.drawLocal.edit.handlers.edit.tooltip.subtext\n\t\t});\n\t},\n\n\t_updateTooltip: function () {\n\t\tthis._tooltip.updateContent(this._getTooltipText());\n\t},\n\n\t_revertLayer: function (layer) {\n\t\tvar id = L.Util.stamp(layer);\n\t\tlayer.edited = false;\n\t\tif (this._uneditedLayerProps.hasOwnProperty(id)) {\n\t\t\t// Polyline, Polygon or Rectangle\n\t\t\tif (layer instanceof L.Polyline || layer instanceof L.Polygon || layer instanceof L.Rectangle) {\n\t\t\t\tlayer.setLatLngs(this._uneditedLayerProps[id].latlngs);\n\t\t\t} else if (layer instanceof L.Circle) {\n\t\t\t\tlayer.setLatLng(this._uneditedLayerProps[id].latlng);\n\t\t\t\tlayer.setRadius(this._uneditedLayerProps[id].radius);\n\t\t\t} else if (layer instanceof L.Marker || layer instanceof L.CircleMarker) { // Marker or CircleMarker\n\t\t\t\tlayer.setLatLng(this._uneditedLayerProps[id].latlng);\n\t\t\t}\n\n\t\t\tlayer.fire('revert-edited', {layer: layer});\n\t\t}\n\t},\n\n\t_enableLayerEdit: function (e) {\n\t\tvar layer = e.layer || e.target || e,\n\t\t\tpathOptions, poly;\n\n\t\t// Back up this layer (if haven't before)\n\t\tthis._backupLayer(layer);\n\n\t\tif (this.options.poly) {\n\t\t\tpoly = L.Util.extend({}, this.options.poly);\n\t\t\tlayer.options.poly = poly;\n\t\t}\n\n\t\t// Set different style for editing mode\n\t\tif (this.options.selectedPathOptions) {\n\t\t\tpathOptions = L.Util.extend({}, this.options.selectedPathOptions);\n\n\t\t\t// Use the existing color of the layer\n\t\t\tif (pathOptions.maintainColor) {\n\t\t\t\tpathOptions.color = layer.options.color;\n\t\t\t\tpathOptions.fillColor = layer.options.fillColor;\n\t\t\t}\n\n\t\t\tlayer.options.original = L.extend({}, layer.options);\n\t\t\tlayer.options.editing = pathOptions;\n\n\t\t}\n\n\t\tif (layer instanceof L.Marker) {\n\t\t\tif (layer.editing) {\n\t\t\t\tlayer.editing.enable();\n\t\t\t}\n\t\t\tlayer.dragging.enable();\n\t\t\tlayer\n\t\t\t\t.on('dragend', this._onMarkerDragEnd)\n\t\t\t\t// #TODO: remove when leaflet finally fixes their draggable so it's touch friendly again.\n\t\t\t\t.on('touchmove', this._onTouchMove, this)\n\t\t\t\t.on('MSPointerMove', this._onTouchMove, this)\n\t\t\t\t.on('touchend', this._onMarkerDragEnd, this)\n\t\t\t\t.on('MSPointerUp', this._onMarkerDragEnd, this);\n\t\t} else {\n\t\t\tlayer.editing.enable();\n\t\t}\n\t},\n\n\t_disableLayerEdit: function (e) {\n\t\tvar layer = e.layer || e.target || e;\n\n\t\tlayer.edited = false;\n\t\tif (layer.editing) {\n\t\t\tlayer.editing.disable();\n\t\t}\n\n\t\tdelete layer.options.editing;\n\t\tdelete layer.options.original;\n\t\t// Reset layer styles to that of before select\n\t\tif (this._selectedPathOptions) {\n\t\t\tif (layer instanceof L.Marker) {\n\t\t\t\tthis._toggleMarkerHighlight(layer);\n\t\t\t} else {\n\t\t\t\t// reset the layer style to what is was before being selected\n\t\t\t\tlayer.setStyle(layer.options.previousOptions);\n\t\t\t\t// remove the cached options for the layer object\n\t\t\t\tdelete layer.options.previousOptions;\n\t\t\t}\n\t\t}\n\n\t\tif (layer instanceof L.Marker) {\n\t\t\tlayer.dragging.disable();\n\t\t\tlayer\n\t\t\t\t.off('dragend', this._onMarkerDragEnd, this)\n\t\t\t\t.off('touchmove', this._onTouchMove, this)\n\t\t\t\t.off('MSPointerMove', this._onTouchMove, this)\n\t\t\t\t.off('touchend', this._onMarkerDragEnd, this)\n\t\t\t\t.off('MSPointerUp', this._onMarkerDragEnd, this);\n\t\t} else {\n\t\t\tlayer.editing.disable();\n\t\t}\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tthis._tooltip.updatePosition(e.latlng);\n\t},\n\n\t_onMarkerDragEnd: function (e) {\n\t\tvar layer = e.target;\n\t\tlayer.edited = true;\n\t\tthis._map.fire(L.Draw.Event.EDITMOVE, {layer: layer});\n\t},\n\n\t_onTouchMove: function (e) {\n\t\tvar touchEvent = e.originalEvent.changedTouches[0],\n\t\t\tlayerPoint = this._map.mouseEventToLayerPoint(touchEvent),\n\t\t\tlatlng = this._map.layerPointToLatLng(layerPoint);\n\t\te.target.setLatLng(latlng);\n\t},\n\n\t_hasAvailableLayers: function () {\n\t\treturn this._featureGroup.getLayers().length !== 0;\n\t}\n});\n\n\n\n/**\n * @class L.EditToolbar.Delete\n * @aka EditToolbar.Delete\n */\nL.EditToolbar.Delete = L.Handler.extend({\n\tstatics: {\n\t\tTYPE: 'remove' // not delete as delete is reserved in js\n\t},\n\n\t// @method intialize(): void\n\tinitialize: function (map, options) {\n\t\tL.Handler.prototype.initialize.call(this, map);\n\n\t\tL.Util.setOptions(this, options);\n\n\t\t// Store the selectable layer group for ease of access\n\t\tthis._deletableLayers = this.options.featureGroup;\n\n\t\tif (!(this._deletableLayers instanceof L.FeatureGroup)) {\n\t\t\tthrow new Error('options.featureGroup must be a L.FeatureGroup');\n\t\t}\n\n\t\t// Save the type so super can fire, need to do this as cannot do this.TYPE :(\n\t\tthis.type = L.EditToolbar.Delete.TYPE;\n\n\t\tvar version = L.version.split('.');\n\t\t//If Version is >= 1.2.0\n\t\tif (parseInt(version[0], 10) === 1 && parseInt(version[1], 10) >= 2) {\n\t\t\tL.EditToolbar.Delete.include(L.Evented.prototype);\n\t\t} else {\n\t\t\tL.EditToolbar.Delete.include(L.Mixin.Events);\n\t\t}\n\n\t},\n\n\t// @method enable(): void\n\t// Enable the delete toolbar\n\tenable: function () {\n\t\tif (this._enabled || !this._hasAvailableLayers()) {\n\t\t\treturn;\n\t\t}\n\t\tthis.fire('enabled', {handler: this.type});\n\n\t\tthis._map.fire(L.Draw.Event.DELETESTART, {handler: this.type});\n\n\t\tL.Handler.prototype.enable.call(this);\n\n\t\tthis._deletableLayers\n\t\t\t.on('layeradd', this._enableLayerDelete, this)\n\t\t\t.on('layerremove', this._disableLayerDelete, this);\n\t},\n\n\t// @method disable(): void\n\t// Disable the delete toolbar\n\tdisable: function () {\n\t\tif (!this._enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._deletableLayers\n\t\t\t.off('layeradd', this._enableLayerDelete, this)\n\t\t\t.off('layerremove', this._disableLayerDelete, this);\n\n\t\tL.Handler.prototype.disable.call(this);\n\n\t\tthis._map.fire(L.Draw.Event.DELETESTOP, {handler: this.type});\n\n\t\tthis.fire('disabled', {handler: this.type});\n\t},\n\n\t// @method addHooks(): void\n\t// Add listener hooks to this handler\n\taddHooks: function () {\n\t\tvar map = this._map;\n\n\t\tif (map) {\n\t\t\tmap.getContainer().focus();\n\n\t\t\tthis._deletableLayers.eachLayer(this._enableLayerDelete, this);\n\t\t\tthis._deletedLayers = new L.LayerGroup();\n\n\t\t\tthis._tooltip = new L.Draw.Tooltip(this._map);\n\t\t\tthis._tooltip.updateContent({text: L.drawLocal.edit.handlers.remove.tooltip.text});\n\n\t\t\tthis._map.on('mousemove', this._onMouseMove, this);\n\t\t}\n\t},\n\n\t// @method removeHooks(): void\n\t// Remove listener hooks from this handler\n\tremoveHooks: function () {\n\t\tif (this._map) {\n\t\t\tthis._deletableLayers.eachLayer(this._disableLayerDelete, this);\n\t\t\tthis._deletedLayers = null;\n\n\t\t\tthis._tooltip.dispose();\n\t\t\tthis._tooltip = null;\n\n\t\t\tthis._map.off('mousemove', this._onMouseMove, this);\n\t\t}\n\t},\n\n\t// @method revertLayers(): void\n\t// Revert the deleted layers back to their prior state.\n\trevertLayers: function () {\n\t\t// Iterate of the deleted layers and add them back into the featureGroup\n\t\tthis._deletedLayers.eachLayer(function (layer) {\n\t\t\tthis._deletableLayers.addLayer(layer);\n\t\t\tlayer.fire('revert-deleted', {layer: layer});\n\t\t}, this);\n\t},\n\n\t// @method save(): void\n\t// Save deleted layers\n\tsave: function () {\n\t\tthis._map.fire(L.Draw.Event.DELETED, {layers: this._deletedLayers});\n\t},\n\n\t// @method removeAllLayers(): void\n\t// Remove all delateable layers\n\tremoveAllLayers: function () {\n\t\t// Iterate of the delateable layers and add remove them\n\t\tthis._deletableLayers.eachLayer(function (layer) {\n\t\t\tthis._removeLayer({layer: layer});\n\t\t}, this);\n\t\tthis.save();\n\t},\n\n\t_enableLayerDelete: function (e) {\n\t\tvar layer = e.layer || e.target || e;\n\n\t\tlayer.on('click', this._removeLayer, this);\n\t},\n\n\t_disableLayerDelete: function (e) {\n\t\tvar layer = e.layer || e.target || e;\n\n\t\tlayer.off('click', this._removeLayer, this);\n\n\t\t// Remove from the deleted layers so we can't accidentally revert if the user presses cancel\n\t\tthis._deletedLayers.removeLayer(layer);\n\t},\n\n\t_removeLayer: function (e) {\n\t\tvar layer = e.layer || e.target || e;\n\n\t\tthis._deletableLayers.removeLayer(layer);\n\n\t\tthis._deletedLayers.addLayer(layer);\n\n\t\tlayer.fire('deleted');\n\t},\n\n\t_onMouseMove: function (e) {\n\t\tthis._tooltip.updatePosition(e.latlng);\n\t},\n\n\t_hasAvailableLayers: function () {\n\t\treturn this._deletableLayers.getLayers().length !== 0;\n\t}\n});\n\n\n\n}(window, document));\n//# sourceMappingURL=leaflet.draw-src.map"],"names":["window","document","defaultPrecision","L","drawVersion","Draw","drawLocal","draw","toolbar","actions","title","text","finish","undo","buttons","polyline","polygon","rectangle","circle","marker","circlemarker","handlers","tooltip","start","radius","cont","end","error","simpleshape","edit","save","cancel","clearAll","editDisabled","remove","removeDisabled","subtext","Event","CREATED","EDITED","DELETED","DRAWSTART","DRAWSTOP","DRAWVERTEX","EDITSTART","EDITMOVE","EDITRESIZE","EDITVERTEX","EDITSTOP","DELETESTART","DELETESTOP","TOOLBAROPENED","TOOLBARCLOSED","MARKERCONTEXT","Feature","Handler","extend","initialize","map","options","this","_map","_container","_overlayPane","_panes","overlayPane","_popupPane","popupPane","shapeOptions","Util","setOptions","version","split","parseInt","include","Evented","prototype","Mixin","Events","enable","_enabled","call","fire","handler","type","layerType","disable","addHooks","DomUtil","disableTextSelection","getContainer","focus","_tooltip","Tooltip","DomEvent","on","_cancelDrawing","removeHooks","enableTextSelection","dispose","off","_fireCreatedEvent","layer","e","keyCode","Polyline","statics","TYPE","Poly","allowIntersection","repeatMode","drawError","color","timeout","icon","DivIcon","iconSize","Point","className","touchIcon","guidelineDistance","maxGuideLineLength","stroke","weight","opacity","fill","clickable","metric","feet","nautic","showLength","zIndexOffset","factor","maxPoints","Browser","touch","message","_markers","_markerGroup","LayerGroup","addLayer","_poly","updateContent","_getTooltipText","_mouseMarker","getCenter","divIcon","iconAnchor","_onMouseOut","_onMouseMove","_onMouseDown","_onMouseUp","addTo","_onZoomEnd","_onTouch","_clearHideErrorTimeout","_cleanUpShape","removeLayer","_clearGuides","deleteLastVertex","length","lastMarker","pop","poly","latlngs","getLatLngs","latlng","splice","setLatLngs","_vertexChanged","addVertex","newLatLngIntersects","_showErrorTooltip","_errorShown","_hideErrorTooltip","push","_createMarker","addLatLng","completeShape","_shapeIsValid","_finishShape","_defaultShape","intersects","_updateGuide","newPos","mouseEventToLayerPoint","originalEvent","layerPointToLatLng","_currentLatLng","_updateTooltip","setLatLng","preventDefault","added","layers","_updateFinishHandler","_updateRunningMeasure","_clickHandled","_touchHandled","_disableMarkers","_disableNewMarkers","clientX","clientY","_startPoint","_mouseDownOrigin","point","_endPoint","dragCheckDistance","distanceTo","lastPtDistance","_calculateFinishDistance","Math","abs","devicePixelRatio","_enableNewMarkers","touches","potentialLatLng","finishMarker","Polygon","Infinity","lastMarkerPoint","latLngToContainerPoint","getLatLng","potentialMarker","Marker","potentialMarkerPint","markerCount","latLngToLayerPoint","_drawGuide","latLng","updatePosition","pointA","pointB","fraction","dashPoint","dash","floor","sqrt","pow","x","y","i","_guidesContainer","create","style","backgroundColor","setPosition","_updateGuideColor","l","childNodes","firstChild","removeChild","labelText","distanceStr","_getMeasurementString","previousMarkerIndex","distance","markersLength","_measurementRunningTotal","GeometryUtil","isVersion07x","currentLatLng","previousLatLng","readableDistance","precision","showAsError","setStyle","_hideErrorTimeout","setTimeout","bind","removeError","clearTimeout","showArea","fillColor","fillOpacity","area","_area","measurementString","readableArea","latLngs","geodesicArea","SimpleShape","_endLabelText","_mapDraggable","dragging","enabled","cursor","_initialLabelText","addEventListener","passive","removeEventListener","_shape","_isDrawing","_startLatLng","_drawShape","Rectangle","_isCurrentlyTwoClickDrawing","el","cls","parentElement","classList","contains","_hasAncestor","target","setBounds","LatLngBounds","getBounds","tooltipText","shape","Icon","Default","_onClick","_marker","Touch","CircleMarker","circleMarker","Circle","showRadius","setRadius","getRadius","useMetric","toFixed","Edit","_onDragEnd","_toggleMarkerHighlight","edited","_icon","display","hasClass","removeClass","_offsetMarker","addClass","offset","iconMarginTop","marginTop","iconMarginLeft","marginLeft","addInitHook","editing","editable","_latlngs","_holes","concat","_updateLatLngs","_flat","_eachVertexHandler","callback","_verticesHandlers","_initHandlers","updateMarkers","PolyVerticesEdit","path","_path","original","forEach","_initMarkers","clearLayers","j","len","markerLeft","markerRight","_onMarkerClick","_onContextMenu","_createMiddleMarker","_updatePrevNext","index","draggable","_origLatLng","_index","_onMarkerDragStart","_onMarkerDrag","_fireEdit","_onTouchMove","_spliceLatLngs","removed","apply","arguments","_convertLatLngs","redraw","_removeMarker","_updateIndexes","oldOrigLatLng","LatLngUtil","cloneLatLng","_latlng","_editTooltip","originalColor","_middleLeft","_getMiddleLatLng","_prev","_middleRight","_next","_bounds","_southWest","_northEast","minPoints","stopPropagation","layerPoint","delta","eachLayer","marker1","marker2","onClick","onDragStart","onDragEnd","setOpacity","lat","lng","p1","project","p2","unproject","_add","_divideBy","moveIcon","resizeIcon","touchMoveIcon","touchResizeIcon","_unbindMarker","_moveMarker","_resizeMarkers","_createMoveMarker","_createResizeMarker","_bindMarker","_onMarkerDragEnd","_onTouchStart","_onTouchEnd","_move","_resize","corners","_getCorners","currentCornerIndex","_cornerIndex","_oppositeCorner","_toggleCornerMarkers","center","_repositionCornerMarkers","newCenter","newLatLngs","bounds","latLngBounds","getNorthWest","getNorthEast","getSouthEast","getSouthWest","resizemarkerPoint","_getResizeMarkerPoint","_radius","cos","PI","moveLatLng","editTooltip","Map","mergeOptions","touchExtend","TouchExtend","_pane","_detectIE","_onTouchCancel","_onTouchLeave","_touchEvent","touchEvent","pointerType","_filterClick","containerPoint","mouseEventToContainerPoint","pageX","pageY","timeStamp","elapsed","_lastClick","_simulatedClick","_simulated","stop","_loaded","ua","navigator","userAgent","msie","indexOf","substring","rv","edge","_initInteraction","addInteractiveTarget","_initInteractionLegacy","events","_onMouseClick","_onKeyPress","_fireMouseEvent","MarkerDrag","cloneLatLngs","clone","Array","isArray","km","ha","m","mi","ac","yd","ft","nm","pointsCount","d2r","sin","formattedNumber","n","formatted","parseFloat","format","numeric","delimiters","thousands","decimal","splitValue","replace","isMetric","areaStr","units","isFeet","isNauticalMile","LineUtil","segmentsIntersect","p","p3","_checkCounterclockwise","points","_getProjectedPoints","_tooFewPointsForIntersection","_lineSegmentsIntersectsRange","skipFirst","newPointIntersects","newPoint","lastPoint","maxIndex","extraPoints","minIndex","_originalPoints","firstPoint","Control","position","Error","_toolbars","DrawToolbar","_toolbarEnabled","EditToolbar","onAdd","toolbarContainer","container","addedTopClass","topClassName","toolbarId","hasOwnProperty","addToolbar","appendChild","onRemove","removeToolbar","setDrawingOptions","enabledToolbar","drawControlTooltips","drawControl","addControl","Toolbar","Class","_modes","_actionButtons","_activeMode","buttonIndex","buttonClassPrefix","_toolbarClass","modeHandlers","getModeHandlers","_toolbarContainer","_initModeHandler","_lastButtonIndex","_actionsContainer","handlerId","_disposeButton","button","_handlerActivated","_handlerDeactivated","classNamePredix","buttonTitle","_createButton","context","_detectIOS","test","MSStream","link","sr","href","innerHTML","buttonEvent","_showActionsToolbar","_hideActionsToolbar","_createActions","li","di","dl","getActions","lastButtonIndex","toolbarPosition","offsetTop","top","_visible","_singleLineLabel","visibility","pos","tooltipContainer","selectedPathOptions","dashArray","maintainColor","featureGroup","_selectedFeatureCount","Delete","_save","removeAllLayers","_clearAllLayers","_checkDisabled","revertLayers","hasLayers","getLayers","setAttribute","_featureGroup","FeatureGroup","_uneditedLayerProps","_hasAvailableLayers","_enableLayerEdit","_disableLayerEdit","_revertLayer","editedLayers","_backupLayer","id","stamp","pathOptions","_selectedPathOptions","previousOptions","changedTouches","_deletableLayers","_enableLayerDelete","_disableLayerDelete","_deletedLayers","_removeLayer"],"mappings":"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","x_google_ignoreList":[0]}
