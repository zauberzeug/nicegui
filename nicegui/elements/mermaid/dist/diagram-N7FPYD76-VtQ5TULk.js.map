{"version":3,"file":"diagram-N7FPYD76-VtQ5TULk.js","sources":["../node_modules/mermaid/dist/chunks/mermaid.esm.min/diagram-N7FPYD76.mjs"],"sourcesContent":["import{a as z}from\"./chunk-4KE642ED.mjs\";import{a as j}from\"./chunk-UQ4X76PG.mjs\";import\"./chunk-PLCDSWN2.mjs\";import\"./chunk-BQEYV4WX.mjs\";import\"./chunk-F5P7Q7EI.mjs\";import\"./chunk-MO23DTBY.mjs\";import\"./chunk-YVFZI336.mjs\";import{a as E}from\"./chunk-HEMZA52I.mjs\";import{l as y}from\"./chunk-YR5264OA.mjs\";import\"./chunk-TI4EEUUG.mjs\";import{A as x,N as C,Q as w,R as S,S as B,T as $,U as v,V as W,W as F,b as P,s as D}from\"./chunk-U6SPV2NK.mjs\";import\"./chunk-F5X5OFIH.mjs\";import\"./chunk-CIPFSH2J.mjs\";import\"./chunk-QFDCAKKT.mjs\";import\"./chunk-5ZJXQJOJ.mjs\";import\"./chunk-YPUTD6PB.mjs\";import\"./chunk-6BY5RJGC.mjs\";import{a}from\"./chunk-GTKDMUJJ.mjs\";var G={packet:[]},h=structuredClone(G),q=D.packet,V=a(()=>{let t=y({...q,...x().packet});return t.showBits&&(t.paddingY+=10),t},\"getConfig\"),L=a(()=>h.packet,\"getPacket\"),N=a(t=>{t.length>0&&h.packet.push(t)},\"pushWord\"),I=a(()=>{w(),h=structuredClone(G)},\"clear\"),f={pushWord:N,getPacket:L,getConfig:V,clear:I,setAccTitle:S,getAccTitle:B,setDiagramTitle:W,getDiagramTitle:F,getAccDescription:v,setAccDescription:$};var M=1e4,Y=a(t=>{z(t,f);let e=-1,i=[],n=1,{bitsPerRow:s}=f.getConfig();for(let{start:r,end:o,bits:l,label:k}of t.blocks){if(r!==void 0&&o!==void 0&&o<r)throw new Error(`Packet block ${r} - ${o} is invalid. End must be greater than start.`);if(r??=e+1,r!==e+1)throw new Error(`Packet block ${r} - ${o??r} is not contiguous. It should start from ${e+1}.`);if(l===0)throw new Error(`Packet block ${r} is invalid. Cannot have a zero bit field.`);for(o??=r+(l??1)-1,l??=o-r+1,e=o,P.debug(`Packet block ${r} - ${e} with label ${k}`);i.length<=s+1&&f.getPacket().length<M;){let[d,p]=U({start:r,end:o,bits:l,label:k},n,s);if(i.push(d),d.end+1===n*s&&(f.pushWord(i),i=[],n++),!p)break;({start:r,end:o,bits:l,label:k}=p)}}f.pushWord(i)},\"populate\"),U=a((t,e,i)=>{if(t.start===void 0)throw new Error(\"start should have been set during first phase\");if(t.end===void 0)throw new Error(\"end should have been set during first phase\");if(t.start>t.end)throw new Error(`Block start ${t.start} is greater than block end ${t.end}.`);if(t.end+1<=e*i)return[t,void 0];let n=e*i-1,s=e*i;return[{start:t.start,end:n,label:t.label,bits:n-t.start},{start:s,end:t.end,label:t.label,bits:t.end-s}]},\"getNextFittingBlock\"),T={parse:a(async t=>{let e=await j(\"packet\",t);P.debug(e),Y(e)},\"parse\")};var H=a((t,e,i,n)=>{let s=n.db,r=s.getConfig(),{rowHeight:o,paddingY:l,bitWidth:k,bitsPerRow:d}=r,p=s.getPacket(),c=s.getDiagramTitle(),g=o+l,m=g*(p.length+1)-(c?0:o),u=k*d+2,b=E(e);b.attr(\"viewbox\",`0 0 ${u} ${m}`),C(b,m,u,r.useMaxWidth);for(let[O,_]of p.entries())K(b,_,O,r);b.append(\"text\").text(c).attr(\"x\",u/2).attr(\"y\",m-g/2).attr(\"dominant-baseline\",\"middle\").attr(\"text-anchor\",\"middle\").attr(\"class\",\"packetTitle\")},\"draw\"),K=a((t,e,i,{rowHeight:n,paddingX:s,paddingY:r,bitWidth:o,bitsPerRow:l,showBits:k})=>{let d=t.append(\"g\"),p=i*(n+r)+r;for(let c of e){let g=c.start%l*o+1,m=(c.end-c.start+1)*o-s;if(d.append(\"rect\").attr(\"x\",g).attr(\"y\",p).attr(\"width\",m).attr(\"height\",n).attr(\"class\",\"packetBlock\"),d.append(\"text\").attr(\"x\",g+m/2).attr(\"y\",p+n/2).attr(\"class\",\"packetLabel\").attr(\"dominant-baseline\",\"middle\").attr(\"text-anchor\",\"middle\").text(c.label),!k)continue;let u=c.end===c.start,b=p-2;d.append(\"text\").attr(\"x\",g+(u?m/2:0)).attr(\"y\",b).attr(\"class\",\"packetByte start\").attr(\"dominant-baseline\",\"auto\").attr(\"text-anchor\",u?\"middle\":\"start\").text(c.start),u||d.append(\"text\").attr(\"x\",g+m).attr(\"y\",b).attr(\"class\",\"packetByte end\").attr(\"dominant-baseline\",\"auto\").attr(\"text-anchor\",\"end\").text(c.end)}},\"drawWord\"),A={draw:H};var X={byteFontSize:\"10px\",startByteColor:\"black\",endByteColor:\"black\",labelColor:\"black\",labelFontSize:\"12px\",titleColor:\"black\",titleFontSize:\"14px\",blockStrokeColor:\"black\",blockStrokeWidth:\"1\",blockFillColor:\"#efefef\"},R=a(({packet:t}={})=>{let e=y(X,t);return`\n\t.packetByte {\n\t\tfont-size: ${e.byteFontSize};\n\t}\n\t.packetByte.start {\n\t\tfill: ${e.startByteColor};\n\t}\n\t.packetByte.end {\n\t\tfill: ${e.endByteColor};\n\t}\n\t.packetLabel {\n\t\tfill: ${e.labelColor};\n\t\tfont-size: ${e.labelFontSize};\n\t}\n\t.packetTitle {\n\t\tfill: ${e.titleColor};\n\t\tfont-size: ${e.titleFontSize};\n\t}\n\t.packetBlock {\n\t\tstroke: ${e.blockStrokeColor};\n\t\tstroke-width: ${e.blockStrokeWidth};\n\t\tfill: ${e.blockFillColor};\n\t}\n\t`},\"styles\");var ht={parser:T,db:f,renderer:A,styles:R};export{ht as diagram};\n"],"names":["G","packet","h","structuredClone","q","D","V","a","t","y","x","showBits","paddingY","L","f","pushWord","length","push","getPacket","getConfig","clear","w","setAccTitle","S","getAccTitle","B","setDiagramTitle","W","getDiagramTitle","F","getAccDescription","v","setAccDescription","$","Y","z","e","i","n","bitsPerRow","s","start","r","end","o","bits","l","label","k","blocks","Error","P","debug","d","p","U","T","parse","async","j","H","db","rowHeight","bitWidth","c","g","m","u","b","E","attr","C","useMaxWidth","O","_","entries","K","append","text","paddingX","A","draw","X","byteFontSize","startByteColor","endByteColor","labelColor","labelFontSize","titleColor","titleFontSize","blockStrokeColor","blockStrokeWidth","blockFillColor","R","ht","parser","renderer","styles"],"mappings":"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","x_google_ignoreList":[0]}