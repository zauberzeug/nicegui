{"version":3,"file":"index.js","sources":["../node_modules/nipplejs/src/utils.js","../node_modules/nipplejs/src/super.js","../node_modules/nipplejs/src/nipple.js","../node_modules/nipplejs/src/collection.js","../node_modules/nipplejs/src/manager.js","../node_modules/nipplejs/src/index.js"],"sourcesContent":["///////////////////////\n///      UTILS      ///\n///////////////////////\n\nexport const distance = (p1, p2) => {\n    const dx = p2.x - p1.x;\n    const dy = p2.y - p1.y;\n\n    return Math.sqrt((dx * dx) + (dy * dy));\n};\n\nexport const angle = (p1, p2) => {\n    const dx = p2.x - p1.x;\n    const dy = p2.y - p1.y;\n\n    return degrees(Math.atan2(dy, dx));\n};\n\nexport const findCoord = (p, d, a) => {\n    const b = {x: 0, y: 0};\n    a = radians(a);\n    b.x = p.x - d * Math.cos(a);\n    b.y = p.y - d * Math.sin(a);\n    return b;\n};\n\nexport const radians = (a) => {\n    return a * (Math.PI / 180);\n};\n\nexport const degrees = (a) => {\n    return a * (180 / Math.PI);\n};\n\nexport const isPressed = (evt) => {\n    if (isNaN(evt.buttons)) {\n        return evt.pressure !== 0;\n    }\n    return evt.buttons !== 0;\n};\n\nconst timers = new Map();\nexport const throttle = (cb) => {\n    if (timers.has(cb)) {\n        clearTimeout(timers.get(cb));\n    }\n    timers.set(cb, setTimeout(cb, 100));\n};\n\nexport const bindEvt = (el, arg, handler) => {\n    const types = arg.split(/[ ,]+/g);\n    let type;\n    for (let i = 0; i < types.length; i += 1) {\n        type = types[i];\n        if (el.addEventListener) {\n            el.addEventListener(type, handler, false);\n        } else if (el.attachEvent) {\n            el.attachEvent(type, handler);\n        }\n    }\n};\n\nexport const unbindEvt = (el, arg, handler) => {\n    const types = arg.split(/[ ,]+/g);\n    let type;\n    for (let i = 0; i < types.length; i += 1) {\n        type = types[i];\n        if (el.removeEventListener) {\n            el.removeEventListener(type, handler);\n        } else if (el.detachEvent) {\n            el.detachEvent(type, handler);\n        }\n    }\n};\n\nexport const trigger = (el, type, data) => {\n    const evt = new CustomEvent(type, data);\n    el.dispatchEvent(evt);\n};\n\nexport const prepareEvent = (evt) => {\n    evt.preventDefault();\n    return evt.type.match(/^touch/) ? evt.changedTouches : evt;\n};\n\nexport const getScroll = () => {\n    const x = (window.pageXOffset !== undefined) ?\n        window.pageXOffset :\n        (document.documentElement || document.body.parentNode || document.body)\n            .scrollLeft;\n\n    const y = (window.pageYOffset !== undefined) ?\n        window.pageYOffset :\n        (document.documentElement || document.body.parentNode || document.body)\n            .scrollTop;\n    return {\n        x: x,\n        y: y\n    };\n};\n\nexport const applyPosition = (el, pos) => {\n    if (pos.top || pos.right || pos.bottom || pos.left) {\n        el.style.top = pos.top;\n        el.style.right = pos.right;\n        el.style.bottom = pos.bottom;\n        el.style.left = pos.left;\n    } else {\n        el.style.left = pos.x + 'px';\n        el.style.top = pos.y + 'px';\n    }\n};\n\nexport const getTransitionStyle = (property, values, time) => {\n    const obj = configStylePropertyObject(property);\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (typeof values === 'string') {\n                obj[i] = values + ' ' + time;\n            } else {\n                let st = '';\n                for (let j = 0, max = values.length; j < max; j += 1) {\n                    st += values[j] + ' ' + time + ', ';\n                }\n                obj[i] = st.slice(0, -2);\n            }\n        }\n    }\n    return obj;\n};\n\nexport const getVendorStyle = (property, value) => {\n    const obj = configStylePropertyObject(property);\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            obj[i] = value;\n        }\n    }\n    return obj;\n};\n\nexport const configStylePropertyObject = (prop) => {\n    const obj = {};\n    obj[prop] = '';\n    const vendors = ['webkit', 'Moz', 'o'];\n    vendors.forEach(function (vendor) {\n        obj[vendor + prop.charAt(0).toUpperCase() + prop.slice(1)] = '';\n    });\n    return obj;\n};\n\nexport const extend = (objA, objB) => {\n    for (let i in objB) {\n        if (objB.hasOwnProperty(i)) {\n            objA[i] = objB[i];\n        }\n    }\n    return objA;\n};\n\n// Overwrite only what's already present\nexport const safeExtend = (objA, objB) => {\n    const obj = {};\n    for (let i in objA) {\n        if (objA.hasOwnProperty(i) && objB.hasOwnProperty(i)) {\n            obj[i] = objB[i];\n        } else if (objA.hasOwnProperty(i)) {\n            obj[i] = objA[i];\n        }\n    }\n    return obj;\n};\n\n// Map for array or unique item.\nexport const map = (ar, fn) => {\n    if (ar.length) {\n        for (let i = 0, max = ar.length; i < max; i += 1) {\n            fn(ar[i]);\n        }\n    } else {\n        fn(ar);\n    }\n};\n\n// Clamp position within the range\nexport const clamp = (pos, nipplePos, size) => ({\n    //                          left-clamping        right-clamping\n    x: Math.min(Math.max(pos.x, nipplePos.x - size), nipplePos.x + size),\n    //                          top-clamping         bottom-clamping\n    y: Math.min(Math.max(pos.y, nipplePos.y - size), nipplePos.y + size)\n});\n","///////////////////////\n///   SUPER CLASS   ///\n///////////////////////\nimport * as u from './utils';\n\n// Constants\nvar isTouch = !!('ontouchstart' in window);\nvar isPointer = window.PointerEvent ? true : false;\nvar isMSPointer = window.MSPointerEvent ? true : false;\nvar events = {\n    touch: {\n        start: 'touchstart',\n        move: 'touchmove',\n        end: 'touchend, touchcancel'\n    },\n    mouse: {\n        start: 'mousedown',\n        move: 'mousemove',\n        end: 'mouseup'\n    },\n    pointer: {\n        start: 'pointerdown',\n        move: 'pointermove',\n        end: 'pointerup, pointercancel'\n    },\n    MSPointer: {\n        start: 'MSPointerDown',\n        move: 'MSPointerMove',\n        end: 'MSPointerUp'\n    }\n};\nvar toBind;\nvar secondBind = {};\nif (isPointer) {\n    toBind = events.pointer;\n} else if (isMSPointer) {\n    toBind = events.MSPointer;\n} else if (isTouch) {\n    toBind = events.touch;\n    secondBind = events.mouse;\n} else {\n    toBind = events.mouse;\n}\n\nfunction Super () {}\n\n// Basic event system.\nSuper.prototype.on = function (arg, cb) {\n    var self = this;\n    var types = arg.split(/[ ,]+/g);\n    var type;\n    self._handlers_ = self._handlers_ || {};\n\n    for (var i = 0; i < types.length; i += 1) {\n        type = types[i];\n        self._handlers_[type] = self._handlers_[type] || [];\n        self._handlers_[type].push(cb);\n    }\n    return self;\n};\n\nSuper.prototype.off = function (type, cb) {\n    var self = this;\n    self._handlers_ = self._handlers_ || {};\n\n    if (type === undefined) {\n        self._handlers_ = {};\n    } else if (cb === undefined) {\n        self._handlers_[type] = null;\n    } else if (self._handlers_[type] &&\n            self._handlers_[type].indexOf(cb) >= 0) {\n        self._handlers_[type].splice(self._handlers_[type].indexOf(cb), 1);\n    }\n\n    return self;\n};\n\nSuper.prototype.trigger = function (arg, data) {\n    var self = this;\n    var types = arg.split(/[ ,]+/g);\n    var type;\n    self._handlers_ = self._handlers_ || {};\n\n    for (var i = 0; i < types.length; i += 1) {\n        type = types[i];\n        if (self._handlers_[type] && self._handlers_[type].length) {\n            self._handlers_[type].forEach(function (handler) {\n                handler.call(self, {\n                    type: type,\n                    target: self\n                }, data);\n            });\n        }\n    }\n};\n\n// Configuration\nSuper.prototype.config = function (options) {\n    var self = this;\n    self.options = self.defaults || {};\n    if (options) {\n        self.options = u.safeExtend(self.options, options);\n    }\n};\n\n// Bind internal events.\nSuper.prototype.bindEvt = function (el, type) {\n    var self = this;\n    self._domHandlers_ = self._domHandlers_ || {};\n\n    self._domHandlers_[type] = function () {\n        if (typeof self['on' + type] === 'function') {\n            self['on' + type].apply(self, arguments);\n        } else {\n            // eslint-disable-next-line no-console\n            console.warn('[WARNING] : Missing \"on' + type + '\" handler.');\n        }\n    };\n\n    u.bindEvt(el, toBind[type], self._domHandlers_[type]);\n\n    if (secondBind[type]) {\n        // Support for both touch and mouse at the same time.\n        u.bindEvt(el, secondBind[type], self._domHandlers_[type]);\n    }\n\n    return self;\n};\n\n// Unbind dom events.\nSuper.prototype.unbindEvt = function (el, type) {\n    var self = this;\n    self._domHandlers_ = self._domHandlers_ || {};\n\n    u.unbindEvt(el, toBind[type], self._domHandlers_[type]);\n\n    if (secondBind[type]) {\n        // Support for both touch and mouse at the same time.\n        u.unbindEvt(el, secondBind[type], self._domHandlers_[type]);\n    }\n\n    delete self._domHandlers_[type];\n\n    return this;\n};\n\nexport default Super;\n","import Super from './super';\nimport * as u from './utils';\n\n///////////////////////\n///   THE NIPPLE    ///\n///////////////////////\n\nfunction Nipple (collection, options) {\n    this.identifier = options.identifier;\n    this.position = options.position;\n    this.frontPosition = options.frontPosition;\n    this.collection = collection;\n\n    // Defaults\n    this.defaults = {\n        size: 100,\n        threshold: 0.1,\n        color: 'white',\n        fadeTime: 250,\n        dataOnly: false,\n        restJoystick: true,\n        restOpacity: 0.5,\n        mode: 'dynamic',\n        zone: document.body,\n        lockX: false,\n        lockY: false,\n        shape: 'circle'\n    };\n\n    this.config(options);\n\n    // Overwrites\n    if (this.options.mode === 'dynamic') {\n        this.options.restOpacity = 0;\n    }\n\n    this.id = Nipple.id;\n    Nipple.id += 1;\n    this.buildEl()\n        .stylize();\n\n    // Nipple's API.\n    this.instance = {\n        el: this.ui.el,\n        on: this.on.bind(this),\n        off: this.off.bind(this),\n        show: this.show.bind(this),\n        hide: this.hide.bind(this),\n        add: this.addToDom.bind(this),\n        remove: this.removeFromDom.bind(this),\n        destroy: this.destroy.bind(this),\n        setPosition:this.setPosition.bind(this),\n        resetDirection: this.resetDirection.bind(this),\n        computeDirection: this.computeDirection.bind(this),\n        trigger: this.trigger.bind(this),\n        position: this.position,\n        frontPosition: this.frontPosition,\n        ui: this.ui,\n        identifier: this.identifier,\n        id: this.id,\n        options: this.options\n    };\n\n    return this.instance;\n}\n\nNipple.prototype = new Super();\nNipple.constructor = Nipple;\nNipple.id = 0;\n\n// Build the dom element of the Nipple instance.\nNipple.prototype.buildEl = function (options) {\n    this.ui = {};\n\n    if (this.options.dataOnly) {\n        return this;\n    }\n\n    this.ui.el = document.createElement('div');\n    this.ui.back = document.createElement('div');\n    this.ui.front = document.createElement('div');\n\n    this.ui.el.className = 'nipple collection_' + this.collection.id;\n    this.ui.back.className = 'back';\n    this.ui.front.className = 'front';\n\n    this.ui.el.setAttribute('id', 'nipple_' + this.collection.id +\n        '_' + this.id);\n\n    this.ui.el.appendChild(this.ui.back);\n    this.ui.el.appendChild(this.ui.front);\n\n    return this;\n};\n\n// Apply CSS to the Nipple instance.\nNipple.prototype.stylize = function () {\n    if (this.options.dataOnly) {\n        return this;\n    }\n    var animTime = this.options.fadeTime + 'ms';\n    var borderStyle = u.getVendorStyle('borderRadius', '50%');\n    var transitStyle = u.getTransitionStyle('transition', 'opacity', animTime);\n    var styles = {};\n    styles.el = {\n        position: 'absolute',\n        opacity: this.options.restOpacity,\n        display: 'block',\n        'zIndex': 999\n    };\n\n    styles.back = {\n        position: 'absolute',\n        display: 'block',\n        width: this.options.size + 'px',\n        height: this.options.size + 'px',\n        left: 0,\n        marginLeft: -this.options.size / 2 + 'px',\n        marginTop: -this.options.size / 2 + 'px',\n        background: this.options.color,\n        'opacity': '.5'\n    };\n\n    styles.front = {\n        width: this.options.size / 2 + 'px',\n        height: this.options.size / 2 + 'px',\n        position: 'absolute',\n        display: 'block',\n        left: 0,\n        marginLeft: -this.options.size / 4 + 'px',\n        marginTop: -this.options.size / 4 + 'px',\n        background: this.options.color,\n        'opacity': '.5',\n        transform: 'translate(0px, 0px)'\n    };\n\n    u.extend(styles.el, transitStyle);\n    if(this.options.shape === 'circle'){\n        u.extend(styles.back, borderStyle);\n    }\n    u.extend(styles.front, borderStyle);\n\n    this.applyStyles(styles);\n\n    return this;\n};\n\nNipple.prototype.applyStyles = function (styles) {\n    // Apply styles\n    for (var i in this.ui) {\n        if (this.ui.hasOwnProperty(i)) {\n            for (var j in styles[i]) {\n                this.ui[i].style[j] = styles[i][j];\n            }\n        }\n    }\n\n    return this;\n};\n\n// Inject the Nipple instance into DOM.\nNipple.prototype.addToDom = function () {\n    // We're not adding it if we're dataOnly or already in dom.\n    if (this.options.dataOnly || document.body.contains(this.ui.el)) {\n        return this;\n    }\n    this.options.zone.appendChild(this.ui.el);\n    return this;\n};\n\n// Remove the Nipple instance from DOM.\nNipple.prototype.removeFromDom = function () {\n    if (this.options.dataOnly || !document.body.contains(this.ui.el)) {\n        return this;\n    }\n    this.options.zone.removeChild(this.ui.el);\n    return this;\n};\n\n// Entirely destroy this nipple\nNipple.prototype.destroy = function () {\n    clearTimeout(this.removeTimeout);\n    clearTimeout(this.showTimeout);\n    clearTimeout(this.restTimeout);\n    this.trigger('destroyed', this.instance);\n    this.removeFromDom();\n    this.off();\n};\n\n// Fade in the Nipple instance.\nNipple.prototype.show = function (cb) {\n    var self = this;\n\n    if (self.options.dataOnly) {\n        return self;\n    }\n\n    clearTimeout(self.removeTimeout);\n    clearTimeout(self.showTimeout);\n    clearTimeout(self.restTimeout);\n\n    self.addToDom();\n\n    self.restCallback();\n\n    setTimeout(function () {\n        self.ui.el.style.opacity = 1;\n    }, 0);\n\n    self.showTimeout = setTimeout(function () {\n        self.trigger('shown', self.instance);\n        if (typeof cb === 'function') {\n            cb.call(this);\n        }\n    }, self.options.fadeTime);\n\n    return self;\n};\n\n// Fade out the Nipple instance.\nNipple.prototype.hide = function (cb) {\n    var self = this;\n\n    if (self.options.dataOnly) {\n        return self;\n    }\n\n    self.ui.el.style.opacity = self.options.restOpacity;\n\n    clearTimeout(self.removeTimeout);\n    clearTimeout(self.showTimeout);\n    clearTimeout(self.restTimeout);\n\n    self.removeTimeout = setTimeout(\n        function () {\n            var display = self.options.mode === 'dynamic' ? 'none' : 'block';\n            self.ui.el.style.display = display;\n            if (typeof cb === 'function') {\n                cb.call(self);\n            }\n\n            self.trigger('hidden', self.instance);\n        },\n        self.options.fadeTime\n    );\n\n    if (self.options.restJoystick) {\n        const rest = self.options.restJoystick;\n        const newPosition = {};\n\n        newPosition.x = rest === true || rest.x !== false ? 0 : self.instance.frontPosition.x;\n        newPosition.y = rest === true || rest.y !== false ? 0 : self.instance.frontPosition.y;\n\n        self.setPosition(cb, newPosition);\n    }\n\n    return self;\n};\n\n// Set the nipple to the specified position\nNipple.prototype.setPosition = function (cb, position) {\n    var self = this;\n    self.frontPosition = {\n        x: position.x,\n        y: position.y\n    };\n    var animTime = self.options.fadeTime + 'ms';\n\n    var transitStyle = {};\n    transitStyle.front = u.getTransitionStyle('transition',\n        ['transform'], animTime);\n\n    var styles = {front: {}};\n    styles.front = {\n        transform: 'translate(' + self.frontPosition.x + 'px,' + self.frontPosition.y + 'px)'\n    };\n\n    self.applyStyles(transitStyle);\n    self.applyStyles(styles);\n\n    self.restTimeout = setTimeout(\n        function () {\n            if (typeof cb === 'function') {\n                cb.call(self);\n            }\n            self.restCallback();\n        },\n        self.options.fadeTime\n    );\n};\n\nNipple.prototype.restCallback = function () {\n    var self = this;\n    var transitStyle = {};\n    transitStyle.front = u.getTransitionStyle('transition', 'none', '');\n    self.applyStyles(transitStyle);\n    self.trigger('rested', self.instance);\n};\n\nNipple.prototype.resetDirection = function () {\n    // Fully rebuild the object to let the iteration possible.\n    this.direction = {\n        x: false,\n        y: false,\n        angle: false\n    };\n};\n\nNipple.prototype.computeDirection = function (obj) {\n    var rAngle = obj.angle.radian;\n    var angle45 = Math.PI / 4;\n    var angle90 = Math.PI / 2;\n    var direction, directionX, directionY;\n\n    // Angular direction\n    //     \\  UP /\n    //      \\   /\n    // LEFT       RIGHT\n    //      /   \\\n    //     /DOWN \\\n    //\n    if (\n        rAngle > angle45 &&\n        rAngle < (angle45 * 3) &&\n        !obj.lockX\n    ) {\n        direction = 'up';\n    } else if (\n        rAngle > -angle45 &&\n        rAngle <= angle45 &&\n        !obj.lockY\n    ) {\n        direction = 'left';\n    } else if (\n        rAngle > (-angle45 * 3) &&\n        rAngle <= -angle45 &&\n        !obj.lockX\n    ) {\n        direction = 'down';\n    } else if (!obj.lockY) {\n        direction = 'right';\n    }\n\n    // Plain direction\n    //    UP                 |\n    // _______               | RIGHT\n    //                  LEFT |\n    //   DOWN                |\n    if (!obj.lockY) {\n        if (rAngle > -angle90 && rAngle < angle90) {\n            directionX = 'left';\n        } else {\n            directionX = 'right';\n        }\n    }\n\n    if (!obj.lockX) {\n        if (rAngle > 0) {\n            directionY = 'up';\n        } else {\n            directionY = 'down';\n        }\n    }\n\n    if (obj.force > this.options.threshold) {\n        var oldDirection = {};\n        var i;\n        for (i in this.direction) {\n            if (this.direction.hasOwnProperty(i)) {\n                oldDirection[i] = this.direction[i];\n            }\n        }\n\n        var same = {};\n\n        this.direction = {\n            x: directionX,\n            y: directionY,\n            angle: direction\n        };\n\n        obj.direction = this.direction;\n\n        for (i in oldDirection) {\n            if (oldDirection[i] === this.direction[i]) {\n                same[i] = true;\n            }\n        }\n\n        // If all 3 directions are the same, we don't trigger anything.\n        if (same.x && same.y && same.angle) {\n            return obj;\n        }\n\n        if (!same.x || !same.y) {\n            this.trigger('plain', obj);\n        }\n\n        if (!same.x) {\n            this.trigger('plain:' + directionX, obj);\n        }\n\n        if (!same.y) {\n            this.trigger('plain:' + directionY, obj);\n        }\n\n        if (!same.angle) {\n            this.trigger('dir dir:' + direction, obj);\n        }\n    } else {\n        this.resetDirection();\n    }\n\n    return obj;\n};\n\nexport default Nipple;\n","import Nipple from './nipple';\nimport Super from './super';\nimport * as u from './utils';\n\n///////////////////////////\n///   THE COLLECTION    ///\n///////////////////////////\n\nfunction Collection (manager, options) {\n    var self = this;\n    self.nipples = [];\n    self.idles = [];\n    self.actives = [];\n    self.ids = [];\n    self.pressureIntervals = {};\n    self.manager = manager;\n    self.id = Collection.id;\n    Collection.id += 1;\n\n    // Defaults\n    self.defaults = {\n        zone: document.body,\n        multitouch: false,\n        maxNumberOfNipples: 10,\n        mode: 'dynamic',\n        position: {top: 0, left: 0},\n        catchDistance: 200,\n        size: 100,\n        threshold: 0.1,\n        color: 'white',\n        fadeTime: 250,\n        dataOnly: false,\n        restJoystick: true,\n        restOpacity: 0.5,\n        lockX: false,\n        lockY: false,\n        shape: 'circle',\n        dynamicPage: false,\n        follow: false\n    };\n\n    self.config(options);\n\n    // Overwrites\n    if (self.options.mode === 'static' || self.options.mode === 'semi') {\n        self.options.multitouch = false;\n    }\n\n    if (!self.options.multitouch) {\n        self.options.maxNumberOfNipples = 1;\n    }\n    const computedStyle = getComputedStyle(self.options.zone.parentElement);\n    if (computedStyle && computedStyle.display === 'flex') {\n        self.parentIsFlex = true;\n    }\n\n    self.updateBox();\n    self.prepareNipples();\n    self.bindings();\n    self.begin();\n\n    return self.nipples;\n}\n\nCollection.prototype = new Super();\nCollection.constructor = Collection;\nCollection.id = 0;\n\nCollection.prototype.prepareNipples = function () {\n    var self = this;\n    var nips = self.nipples;\n\n    // Public API Preparation.\n    nips.on = self.on.bind(self);\n    nips.off = self.off.bind(self);\n    nips.options = self.options;\n    nips.destroy = self.destroy.bind(self);\n    nips.ids = self.ids;\n    nips.id = self.id;\n    nips.processOnMove = self.processOnMove.bind(self);\n    nips.processOnEnd = self.processOnEnd.bind(self);\n    nips.get = function (id) {\n        if (id === undefined) {\n            return nips[0];\n        }\n        for (var i = 0, max = nips.length; i < max; i += 1) {\n            if (nips[i].identifier === id) {\n                return nips[i];\n            }\n        }\n        return false;\n    };\n};\n\nCollection.prototype.bindings = function () {\n    var self = this;\n    // Touch start event.\n    self.bindEvt(self.options.zone, 'start');\n    // Avoid native touch actions (scroll, zoom etc...) on the zone.\n    self.options.zone.style.touchAction = 'none';\n    self.options.zone.style.msTouchAction = 'none';\n};\n\nCollection.prototype.begin = function () {\n    var self = this;\n    var opts = self.options;\n\n    // We place our static nipple\n    // if needed.\n    if (opts.mode === 'static') {\n        var nipple = self.createNipple(\n            opts.position,\n            self.manager.getIdentifier()\n        );\n        // Add it to the dom.\n        nipple.add();\n        // Store it in idles.\n        self.idles.push(nipple);\n    }\n};\n\n// Nipple Factory\nCollection.prototype.createNipple = function (position, identifier) {\n    var self = this;\n    var scroll = self.manager.scroll;\n    var toPutOn = {};\n    var opts = self.options;\n    var offset = {\n        x: self.parentIsFlex ? scroll.x : (scroll.x + self.box.left),\n        y: self.parentIsFlex ? scroll.y : (scroll.y + self.box.top)\n    };\n\n    if (position.x && position.y) {\n        toPutOn = {\n            x: position.x - offset.x,\n            y: position.y - offset.y\n        };\n    } else if (\n        position.top ||\n        position.right ||\n        position.bottom ||\n        position.left\n    ) {\n\n        // We need to compute the position X / Y of the joystick.\n        var dumb = document.createElement('DIV');\n        dumb.style.display = 'hidden';\n        dumb.style.top = position.top;\n        dumb.style.right = position.right;\n        dumb.style.bottom = position.bottom;\n        dumb.style.left = position.left;\n        dumb.style.position = 'absolute';\n\n        opts.zone.appendChild(dumb);\n        var dumbBox = dumb.getBoundingClientRect();\n        opts.zone.removeChild(dumb);\n\n        toPutOn = position;\n        position = {\n            x: dumbBox.left + scroll.x,\n            y: dumbBox.top + scroll.y\n        };\n    }\n\n    var nipple = new Nipple(self, {\n        color: opts.color,\n        size: opts.size,\n        threshold: opts.threshold,\n        fadeTime: opts.fadeTime,\n        dataOnly: opts.dataOnly,\n        restJoystick: opts.restJoystick,\n        restOpacity: opts.restOpacity,\n        mode: opts.mode,\n        identifier: identifier,\n        position: position,\n        zone: opts.zone,\n        frontPosition: {\n            x: 0,\n            y: 0\n        },\n        shape: opts.shape\n    });\n\n    if (!opts.dataOnly) {\n        u.applyPosition(nipple.ui.el, toPutOn);\n        u.applyPosition(nipple.ui.front, nipple.frontPosition);\n    }\n    self.nipples.push(nipple);\n    self.trigger('added ' + nipple.identifier + ':added', nipple);\n    self.manager.trigger('added ' + nipple.identifier + ':added', nipple);\n\n    self.bindNipple(nipple);\n\n    return nipple;\n};\n\nCollection.prototype.updateBox = function () {\n    var self = this;\n    self.box = self.options.zone.getBoundingClientRect();\n};\n\nCollection.prototype.bindNipple = function (nipple) {\n    var self = this;\n    var type;\n    // Bubble up identified events.\n    var handler = function (evt, data) {\n        // Identify the event type with the nipple's id.\n        type = evt.type + ' ' + data.id + ':' + evt.type;\n        self.trigger(type, data);\n    };\n\n    // When it gets destroyed.\n    nipple.on('destroyed', self.onDestroyed.bind(self));\n\n    // Other events that will get bubbled up.\n    nipple.on('shown hidden rested dir plain', handler);\n    nipple.on('dir:up dir:right dir:down dir:left', handler);\n    nipple.on('plain:up plain:right plain:down plain:left', handler);\n};\n\nCollection.prototype.pressureFn = function (touch, nipple, identifier) {\n    var self = this;\n    var previousPressure = 0;\n    clearInterval(self.pressureIntervals[identifier]);\n    // Create an interval that will read the pressure every 100ms\n    self.pressureIntervals[identifier] = setInterval(function () {\n        var pressure = touch.force || touch.pressure ||\n            touch.webkitForce || 0;\n        if (pressure !== previousPressure) {\n            nipple.trigger('pressure', pressure);\n            self.trigger('pressure ' +\n                nipple.identifier + ':pressure', pressure);\n            previousPressure = pressure;\n        }\n    }.bind(self), 100);\n};\n\nCollection.prototype.onstart = function (evt) {\n    var self = this;\n    var opts = self.options;\n    var origEvt = evt;\n    evt = u.prepareEvent(evt);\n\n    // Update the box position\n    self.updateBox();\n\n    var process = function (touch) {\n        // If we can create new nipples\n        // meaning we don't have more active nipples than we should.\n        if (self.actives.length < opts.maxNumberOfNipples) {\n            self.processOnStart(touch);\n        }\n        else if(origEvt.type.match(/^touch/)){\n            // zombies occur when end event is not received on Safari\n            // first touch removed before second touch, we need to catch up...\n            // so remove where touches in manager that no longer exist\n            Object.keys(self.manager.ids).forEach(function(k){\n                if(Object.values(origEvt.touches).findIndex(function(t){return t.identifier===k;}) < 0){\n                    // manager has id that doesn't exist in touches\n                    var e = [evt[0]];\n                    e.identifier = k;\n                    self.processOnEnd(e);\n                }\n            });\n            if(self.actives.length < opts.maxNumberOfNipples){\n                self.processOnStart(touch);\n            }\n        }\n    };\n\n    u.map(evt, process);\n\n    // We ask upstream to bind the document\n    // on 'move' and 'end'\n    self.manager.bindDocument();\n    return false;\n};\n\nCollection.prototype.processOnStart = function (evt) {\n    var self = this;\n    var opts = self.options;\n    var indexInIdles;\n    var identifier = self.manager.getIdentifier(evt);\n    var pressure = evt.force || evt.pressure || evt.webkitForce || 0;\n    var position = {\n        x: evt.pageX,\n        y: evt.pageY\n    };\n\n    var nipple = self.getOrCreate(identifier, position);\n\n    // Update its touch identifier\n    if (nipple.identifier !== identifier) {\n        self.manager.removeIdentifier(nipple.identifier);\n    }\n    nipple.identifier = identifier;\n\n    var process = function (nip) {\n        // Trigger the start.\n        nip.trigger('start', nip);\n        self.trigger('start ' + nip.id + ':start', nip);\n\n        nip.show();\n        if (pressure > 0) {\n            self.pressureFn(evt, nip, nip.identifier);\n        }\n        // Trigger the first move event.\n        self.processOnMove(evt);\n    };\n\n    // Transfer it from idles to actives.\n    if ((indexInIdles = self.idles.indexOf(nipple)) >= 0) {\n        self.idles.splice(indexInIdles, 1);\n    }\n\n    // Store the nipple in the actives array\n    self.actives.push(nipple);\n    self.ids.push(nipple.identifier);\n\n    if (opts.mode !== 'semi') {\n        process(nipple);\n    } else {\n        // In semi we check the distance of the touch\n        // to decide if we have to reset the nipple\n        var distance = u.distance(position, nipple.position);\n        if (distance <= opts.catchDistance) {\n            process(nipple);\n        } else {\n            nipple.destroy();\n            self.processOnStart(evt);\n            return;\n        }\n    }\n\n    return nipple;\n};\n\nCollection.prototype.getOrCreate = function (identifier, position) {\n    var self = this;\n    var opts = self.options;\n    var nipple;\n\n    // If we're in static or semi, we might already have an active.\n    if (/(semi|static)/.test(opts.mode)) {\n        // Get the active one.\n        // TODO: Multi-touche for semi and static will start here.\n        // Return the nearest one.\n        nipple = self.idles[0];\n        if (nipple) {\n            self.idles.splice(0, 1);\n            return nipple;\n        }\n\n        if (opts.mode === 'semi') {\n            // If we're in semi mode, we need to create one.\n            return self.createNipple(position, identifier);\n        }\n\n        // eslint-disable-next-line no-console\n        console.warn('Coudln\\'t find the needed nipple.');\n        return false;\n    }\n    // In dynamic, we create a new one.\n    nipple = self.createNipple(position, identifier);\n    return nipple;\n};\n\nCollection.prototype.processOnMove = function (evt) {\n    var self = this;\n    var opts = self.options;\n    var identifier = self.manager.getIdentifier(evt);\n    var nipple = self.nipples.get(identifier);\n    var scroll = self.manager.scroll;\n\n    // If we're moving without pressing\n    // it's that we went out the active zone\n    if (!u.isPressed(evt)) {\n        this.processOnEnd(evt);\n        return;\n    }\n\n    if (!nipple) {\n        // This is here just for safety.\n        // It shouldn't happen.\n        // eslint-disable-next-line no-console\n        console.error('Found zombie joystick with ID ' + identifier);\n        self.manager.removeIdentifier(identifier);\n        return;\n    }\n\n    if (opts.dynamicPage) {\n        var elBox = nipple.el.getBoundingClientRect();\n        nipple.position = {\n            x: scroll.x + elBox.left,\n            y: scroll.y + elBox.top\n        };\n    }\n\n    nipple.identifier = identifier;\n\n    var size = nipple.options.size / 2;\n    var pos = {\n        x: evt.pageX,\n        y: evt.pageY\n    };\n\n    if (opts.lockX){\n        pos.y = nipple.position.y;\n    }\n    if (opts.lockY) {\n        pos.x = nipple.position.x;\n    }\n\n    var dist = u.distance(pos, nipple.position);\n    var angle = u.angle(pos, nipple.position);\n    var rAngle = u.radians(angle);\n    var force = dist / size;\n\n    var raw = {\n        distance: dist,\n        position: pos\n    };\n\n    // Clamp the position\n    var clamped_dist;\n    var clamped_pos;\n    if (nipple.options.shape === 'circle') {\n        // Clamp to a circle\n        clamped_dist = Math.min(dist, size);\n        clamped_pos = u.findCoord(nipple.position, clamped_dist, angle);\n    } else {\n        // Clamp to a square\n        clamped_pos = u.clamp(pos, nipple.position, size);\n        clamped_dist = u.distance(clamped_pos, nipple.position);\n    }\n\n    if (opts.follow) {\n        // follow behaviour\n        if (dist > size) {\n            let delta_x = pos.x - clamped_pos.x;\n            let delta_y = pos.y - clamped_pos.y;\n            nipple.position.x += delta_x;\n            nipple.position.y += delta_y;\n            nipple.el.style.top = (nipple.position.y - (self.box.top + scroll.y)) + 'px';\n            nipple.el.style.left = (nipple.position.x - (self.box.left + scroll.x)) + 'px';\n\n            dist = u.distance(pos, nipple.position);\n        }\n    } else {\n        // clamp behaviour\n        pos = clamped_pos;\n        dist = clamped_dist;\n    }\n\n    var xPosition = pos.x - nipple.position.x;\n    var yPosition = pos.y - nipple.position.y;\n\n    nipple.frontPosition = {\n        x: xPosition,\n        y: yPosition\n    };\n\n    if (!opts.dataOnly) {\n        nipple.ui.front.style.transform = 'translate(' + xPosition + 'px,' + yPosition + 'px)';\n    }\n\n    // Prepare event's datas.\n    var toSend = {\n        identifier: nipple.identifier,\n        position: pos,\n        force: force,\n        pressure: evt.force || evt.pressure || evt.webkitForce || 0,\n        distance: dist,\n        angle: {\n            radian: rAngle,\n            degree: angle\n        },\n        vector: {\n            x: xPosition / size,\n            y: - yPosition / size\n        },\n        raw: raw,\n        instance: nipple,\n        lockX: opts.lockX,\n        lockY: opts.lockY\n    };\n\n    // Compute the direction's datas.\n    toSend = nipple.computeDirection(toSend);\n\n    // Offset angles to follow units circle.\n    toSend.angle = {\n        radian: u.radians(180 - angle),\n        degree: 180 - angle\n    };\n\n    // Send everything to everyone.\n    nipple.trigger('move', toSend);\n    self.trigger('move ' + nipple.id + ':move', toSend);\n};\n\nCollection.prototype.processOnEnd = function (evt) {\n    var self = this;\n    var opts = self.options;\n    var identifier = self.manager.getIdentifier(evt);\n    var nipple = self.nipples.get(identifier);\n    var removedIdentifier = self.manager.removeIdentifier(nipple.identifier);\n\n    if (!nipple) {\n        return;\n    }\n\n    if (!opts.dataOnly) {\n        nipple.hide(function () {\n            if (opts.mode === 'dynamic') {\n                nipple.trigger('removed', nipple);\n                self.trigger('removed ' + nipple.id + ':removed', nipple);\n                self.manager\n                    .trigger('removed ' + nipple.id + ':removed', nipple);\n                nipple.destroy();\n            }\n        });\n    }\n\n    // Clear the pressure interval reader\n    clearInterval(self.pressureIntervals[nipple.identifier]);\n\n    // Reset the direciton of the nipple, to be able to trigger a new direction\n    // on start.\n    nipple.resetDirection();\n\n    nipple.trigger('end', nipple);\n    self.trigger('end ' + nipple.id + ':end', nipple);\n\n    // Remove identifier from our bank.\n    if (self.ids.indexOf(nipple.identifier) >= 0) {\n        self.ids.splice(self.ids.indexOf(nipple.identifier), 1);\n    }\n\n    // Clean our actives array.\n    if (self.actives.indexOf(nipple) >= 0) {\n        self.actives.splice(self.actives.indexOf(nipple), 1);\n    }\n\n    if (/(semi|static)/.test(opts.mode)) {\n        // Transfer nipple from actives to idles\n        // if we're in semi or static mode.\n        self.idles.push(nipple);\n    } else if (self.nipples.indexOf(nipple) >= 0) {\n        // Only if we're not in semi or static mode\n        // we can remove the instance.\n        self.nipples.splice(self.nipples.indexOf(nipple), 1);\n    }\n\n    // We unbind move and end.\n    self.manager.unbindDocument();\n\n    // We add back the identifier of the idle nipple;\n    if (/(semi|static)/.test(opts.mode)) {\n        self.manager.ids[removedIdentifier.id] = removedIdentifier.identifier;\n    }\n};\n\n// Remove destroyed nipple from the lists\nCollection.prototype.onDestroyed = function(evt, nipple) {\n    var self = this;\n    if (self.nipples.indexOf(nipple) >= 0) {\n        self.nipples.splice(self.nipples.indexOf(nipple), 1);\n    }\n    if (self.actives.indexOf(nipple) >= 0) {\n        self.actives.splice(self.actives.indexOf(nipple), 1);\n    }\n    if (self.idles.indexOf(nipple) >= 0) {\n        self.idles.splice(self.idles.indexOf(nipple), 1);\n    }\n    if (self.ids.indexOf(nipple.identifier) >= 0) {\n        self.ids.splice(self.ids.indexOf(nipple.identifier), 1);\n    }\n\n    // Remove the identifier from our bank\n    self.manager.removeIdentifier(nipple.identifier);\n\n    // We unbind move and end.\n    self.manager.unbindDocument();\n};\n\n// Cleanly destroy the manager\nCollection.prototype.destroy = function () {\n    var self = this;\n    self.unbindEvt(self.options.zone, 'start');\n\n    // Destroy nipples.\n    self.nipples.forEach(function(nipple) {\n        nipple.destroy();\n    });\n\n    // Clean 3DTouch intervals.\n    for (var i in self.pressureIntervals) {\n        if (self.pressureIntervals.hasOwnProperty(i)) {\n            clearInterval(self.pressureIntervals[i]);\n        }\n    }\n\n    // Notify the manager passing the instance\n    self.trigger('destroyed', self.nipples);\n    // We unbind move and end.\n    self.manager.unbindDocument();\n    // Unbind everything.\n    self.off();\n};\n\nexport default Collection;\n","import Collection from './collection';\nimport Super from './super';\nimport * as u from './utils';\n\n///////////////////////\n///     MANAGER     ///\n///////////////////////\n\nfunction Manager (options) {\n    var self = this;\n    self.ids = {};\n    self.index = 0;\n    self.collections = [];\n    self.scroll = u.getScroll();\n\n    self.config(options);\n    self.prepareCollections();\n\n    // Listen for resize, to reposition every joysticks\n    var resizeHandler = function () {\n        var pos;\n        self.collections.forEach(function (collection) {\n            collection.forEach(function (nipple) {\n                pos = nipple.el.getBoundingClientRect();\n                nipple.position = {\n                    x: self.scroll.x + pos.left,\n                    y: self.scroll.y + pos.top\n                };\n            });\n        });\n    };\n    u.bindEvt(window, 'resize', function () {\n        u.throttle(resizeHandler);\n    });\n\n    // Listen for scrolls, so we have a global scroll value\n    // without having to request it all the time.\n    var scrollHandler = function () {\n        self.scroll = u.getScroll();\n    };\n    u.bindEvt(window, 'scroll', function () {\n        u.throttle(scrollHandler);\n    });\n\n    return self.collections;\n}\n\nManager.prototype = new Super();\nManager.constructor = Manager;\n\nManager.prototype.prepareCollections = function () {\n    var self = this;\n    // Public API Preparation.\n    self.collections.create = self.create.bind(self);\n    // Listen to anything\n    self.collections.on = self.on.bind(self);\n    // Unbind general events\n    self.collections.off = self.off.bind(self);\n    // Destroy everything\n    self.collections.destroy = self.destroy.bind(self);\n    // Get any nipple\n    self.collections.get = function (id) {\n        var nipple;\n        // Use .every() to break the loop as soon as found.\n        self.collections.every(function (collection) {\n            nipple = collection.get(id);\n            return nipple ? false : true;\n        });\n        return nipple;\n    };\n};\n\nManager.prototype.create = function (options) {\n    return this.createCollection(options);\n};\n\n// Collection Factory\nManager.prototype.createCollection = function (options) {\n    var self = this;\n    var collection = new Collection(self, options);\n\n    self.bindCollection(collection);\n    self.collections.push(collection);\n\n    return collection;\n};\n\nManager.prototype.bindCollection = function (collection) {\n    var self = this;\n    var type;\n    // Bubble up identified events.\n    var handler = function (evt, data) {\n        // Identify the event type with the nipple's identifier.\n        type = evt.type + ' ' + data.id + ':' + evt.type;\n        self.trigger(type, data);\n    };\n\n    // When it gets destroyed we clean.\n    collection.on('destroyed', self.onDestroyed.bind(self));\n\n    // Other events that will get bubbled up.\n    collection.on('shown hidden rested dir plain', handler);\n    collection.on('dir:up dir:right dir:down dir:left', handler);\n    collection.on('plain:up plain:right plain:down plain:left', handler);\n};\n\nManager.prototype.bindDocument = function () {\n    var self = this;\n    // Bind only if not already binded\n    if (!self.binded) {\n        self.bindEvt(document, 'move')\n            .bindEvt(document, 'end');\n        self.binded = true;\n    }\n};\n\nManager.prototype.unbindDocument = function (force) {\n    var self = this;\n    // If there are no touch left\n    // unbind the document.\n    if (!Object.keys(self.ids).length || force === true) {\n        self.unbindEvt(document, 'move')\n            .unbindEvt(document, 'end');\n        self.binded = false;\n    }\n};\n\nManager.prototype.getIdentifier = function (evt) {\n    var id;\n    // If no event, simple increment\n    if (!evt) {\n        id = this.index;\n    } else {\n        // Extract identifier from event object.\n        // Unavailable in mouse events so replaced by latest increment.\n        id = evt.identifier === undefined ? evt.pointerId : evt.identifier;\n        if (id === undefined) {\n            id = this.latest || 0;\n        }\n    }\n\n    if (this.ids[id] === undefined) {\n        this.ids[id] = this.index;\n        this.index += 1;\n    }\n\n    // Keep the latest id used in case we're using an unidentified mouseEvent\n    this.latest = id;\n    return this.ids[id];\n};\n\nManager.prototype.removeIdentifier = function (identifier) {\n    var removed = {};\n    for (var id in this.ids) {\n        if (this.ids[id] === identifier) {\n            removed.id = id;\n            removed.identifier = this.ids[id];\n            delete this.ids[id];\n            break;\n        }\n    }\n    return removed;\n};\n\nManager.prototype.onmove = function (evt) {\n    var self = this;\n    self.onAny('move', evt);\n    return false;\n};\n\nManager.prototype.onend = function (evt) {\n    var self = this;\n    self.onAny('end', evt);\n    return false;\n};\n\nManager.prototype.oncancel = function (evt) {\n    var self = this;\n    self.onAny('end', evt);\n    return false;\n};\n\nManager.prototype.onAny = function (which, evt) {\n    var self = this;\n    var id;\n    var processFn = 'processOn' + which.charAt(0).toUpperCase() +\n        which.slice(1);\n    evt = u.prepareEvent(evt);\n    var processColl = function (e, id, coll) {\n        if (coll.ids.indexOf(id) >= 0) {\n            coll[processFn](e);\n            // Mark the event to avoid cleaning it later.\n            e._found_ = true;\n        }\n    };\n    var processEvt = function (e) {\n        id = self.getIdentifier(e);\n        u.map(self.collections, processColl.bind(null, e, id));\n        // If the event isn't handled by any collection,\n        // we need to clean its identifier.\n        if (!e._found_) {\n            self.removeIdentifier(id);\n        }\n    };\n\n    u.map(evt, processEvt);\n\n    return false;\n};\n\n// Cleanly destroy the manager\nManager.prototype.destroy = function () {\n    var self = this;\n    self.unbindDocument(true);\n    self.ids = {};\n    self.index = 0;\n    self.collections.forEach(function(collection) {\n        collection.destroy();\n    });\n    self.off();\n};\n\n// When a collection gets destroyed\n// we clean behind.\nManager.prototype.onDestroyed = function (evt, coll) {\n    var self = this;\n    if (self.collections.indexOf(coll) < 0) {\n        return false;\n    }\n    self.collections.splice(self.collections.indexOf(coll), 1);\n};\n\nexport default Manager;\n","import Manager from './manager';\n\nconst factory = new Manager();\nexport default {\n    create: function (options) {\n        return factory.create(options);\n    },\n    factory: factory\n};\n"],"names":["distance","p1","p2","dx","x","dy","y","Math","sqrt","radians","a","PI","degrees","timers","Map","throttle","cb","has","clearTimeout","get","set","setTimeout","bindEvt","el","arg","handler","types","split","type","i","length","addEventListener","attachEvent","unbindEvt","removeEventListener","detachEvent","prepareEvent","evt","preventDefault","match","changedTouches","getScroll","undefined","window","pageXOffset","document","documentElement","body","parentNode","scrollLeft","pageYOffset","scrollTop","applyPosition","pos","top","right","bottom","left","style","getTransitionStyle","property","values","time","obj","configStylePropertyObject","hasOwnProperty","st","j","max","slice","prop","forEach","vendor","charAt","toUpperCase","extend","objA","objB","map","ar","fn","toBind","isTouch","isPointer","PointerEvent","isMSPointer","MSPointerEvent","events","start","move","end","secondBind","Super","Nipple","collection","options","this","identifier","position","frontPosition","defaults","size","threshold","color","fadeTime","dataOnly","restJoystick","restOpacity","mode","zone","lockX","lockY","shape","config","id","buildEl","stylize","instance","ui","on","bind","off","show","hide","add","addToDom","remove","removeFromDom","destroy","setPosition","resetDirection","computeDirection","trigger","Collection","manager","self","nipples","idles","actives","ids","pressureIntervals","multitouch","maxNumberOfNipples","catchDistance","dynamicPage","follow","computedStyle","getComputedStyle","parentElement","display","parentIsFlex","updateBox","prepareNipples","bindings","begin","Manager","index","collections","scroll","u.getScroll","prepareCollections","resizeHandler","nipple","getBoundingClientRect","u.bindEvt","u.throttle","scrollHandler","prototype","_handlers_","push","indexOf","splice","data","call","target","u.safeExtend","_domHandlers_","apply","arguments","console","warn","u.unbindEvt","constructor","createElement","back","front","className","setAttribute","appendChild","animTime","borderStyle","value","u.getVendorStyle","transitStyle","u.getTransitionStyle","styles","opacity","zIndex","width","height","marginLeft","marginTop","background","transform","u.extend","applyStyles","contains","removeChild","removeTimeout","showTimeout","restTimeout","restCallback","rest","newPosition","direction","angle","directionX","directionY","rAngle","radian","angle45","angle90","force","oldDirection","same","nips","processOnMove","processOnEnd","touchAction","msTouchAction","opts","createNipple","getIdentifier","toPutOn","offset","box","dumb","dumbBox","u.applyPosition","bindNipple","onDestroyed","pressureFn","touch","previousPressure","clearInterval","setInterval","pressure","webkitForce","onstart","origEvt","u.prepareEvent","u.map","processOnStart","Object","keys","k","touches","findIndex","t","e","bindDocument","indexInIdles","pageX","pageY","getOrCreate","removeIdentifier","process","nip","u.distance","test","isNaN","buttons","u.isPressed","error","elBox","clamped_dist","clamped_pos","dist","atan2","u.angle","u.radians","raw","min","p","d","b","cos","sin","u.findCoord","nipplePos","u.clamp","delta_x","delta_y","xPosition","yPosition","toSend","degree","vector","removedIdentifier","unbindDocument","create","every","createCollection","bindCollection","binded","pointerId","latest","removed","onmove","onAny","onend","oncancel","which","processFn","processColl","coll","_found_","factory"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5]}